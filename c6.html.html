<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×©×™×¢×•×¨ ××ª××˜×™×§×” ×œ×›×™×ª×” ×’'</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 30px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        .menu {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .menu-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .game-area {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 20px;
            padding: 30px;
            margin-top: 20px;
            border: 4px solid #f39c12;
        }
        
        .challenge-area {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 20px;
            padding: 30px;
            margin-top: 20px;
            border: 4px solid #f39c12;
        }
        
        .score-area {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .points {
            color: #27ae60;
        }
        
        .wrong {
            color: #e74c3c;
        }
        
        .timer {
            color: #e67e22;
        }
        
        .question {
            text-align: center;
            font-size: 2.5em;
            font-weight: bold;
            color: #2c3e50;
            margin: 30px 0;
            direction: ltr;
        }
        
        .answer-input {
            text-align: center;
            margin: 20px 0;
        }
        
        input[type="number"] {
            font-size: 2em;
            padding: 15px;
            border: 3px solid #667eea;
            border-radius: 15px;
            width: 200px;
            text-align: center;
        }
        
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        input[type="number"] {
            -moz-appearance: textfield;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.3em;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.4);
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.6);
        }
        
        .lesson-content {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            border-radius: 20px;
            padding: 30px;
            color: white;
            margin-top: 20px;
            font-size: 1.2em;
            line-height: 1.8;
        }
        
        .example {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            font-size: 1.3em;
        }
        
        .ltr-text {
            direction: ltr;
            display: inline-block;
        }
        
        .hidden {
            display: none;
        }
        
        .feedback {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            border-radius: 15px;
        }
        
        .correct {
            background: #d4edda;
            color: #155724;
        }
        
        .incorrect {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ ×©×™×¢×•×¨ ××ª××˜×™×§×” ××ª×§×“× ×œ×›×™×ª×” ×’' ğŸ“</h1>
            <p class="subtitle">×›×¤×œ ×•×—×™×œ×•×§ ×¢×“ 100, ×—×™×‘×•×¨ ×•×—×™×¡×•×¨ ×“×•-×¡×¤×¨×ª×™, ×‘×¢×™×•×ª ××™×œ×•×œ×™×•×ª ×•×¢×•×“!</p>
        </div>
        
        <div class="menu" id="menu">
            <button class="menu-btn" onclick="showLesson('multiplication')">×œ×™××•×“ ×›×¤×œ âœ–ï¸</button>
            <button class="menu-btn" onclick="showLesson('division')">×œ×™××•×“ ×—×™×œ×•×§ â—</button>
            <button class="menu-btn" onclick="startGame('multiplication')">×ª×¨×’×•×œ ×›×¤×œ ğŸ¯</button>
            <button class="menu-btn" onclick="startGame('division')">×ª×¨×’×•×œ ×—×™×œ×•×§ ğŸ²</button>
            <button class="menu-btn" onclick="startGame('mixed')">××ª×’×¨ ××¢×•×¨×‘ ğŸ”¥</button>
            <button class="menu-btn" onclick="showLesson('word')">×”×¡×‘×¨ ×¢×œ ×‘×¢×™×•×ª ××™×œ×•×œ×™×•×ª ğŸ’¡</button>
        </div>
        
        <div id="content"></div>
    </div>

    <script>
        let score = 0;
        let wrong = 0;
        let timeLeft = 60;
        let timer;
        let currentAnswer;
        let gameType;
        let audioContext;
        let isChecking = false;
        
        // Initialize audio context on first user interaction
        function initAudio() {
            if (!audioContext) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Audio not supported');
                }
            }
        }
        
        function playClickSound() {
            initAudio();
            if (!audioContext) return;
            
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 600;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.08);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.08);
            } catch (e) {
                console.log('Sound error');
            }
        }
        
        function playCorrectSound() {
            initAudio();
            if (!audioContext) return;
            
            try {
                const times = [0, 0.1, 0.2];
                const frequencies = [523.25, 659.25, 783.99];
                
                for (let i = 0; i < times.length; i++) {
                    (function(time, freq) {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.value = freq;
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0, audioContext.currentTime + time);
                        gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + time + 0.01);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + time + 0.15);
                        
                        oscillator.start(audioContext.currentTime + time);
                        oscillator.stop(audioContext.currentTime + time + 0.15);
                    })(times[i], frequencies[i]);
                }
            } catch (e) {
                console.log('Sound error');
            }
        }
        
        function playWrongSound() {
            initAudio();
            if (!audioContext) return;
            
            try {
                const times = [0, 0.08];
                const frequencies = [400, 300];
                
                for (let i = 0; i < times.length; i++) {
                    (function(time, freq) {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.value = freq;
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0, audioContext.currentTime + time);
                        gainNode.gain.linearRampToValueAtTime(0.12, audioContext.currentTime + time + 0.01);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + time + 0.12);
                        
                        oscillator.start(audioContext.currentTime + time);
                        oscillator.stop(audioContext.currentTime + time + 0.12);
                    })(times[i], frequencies[i]);
                }
            } catch (e) {
                console.log('Sound error');
            }
        }

        function showLesson(type) {
            playClickSound();
            const content = document.getElementById('content');
            let lessonHTML = '<div class="lesson-content">';
            
            if (type === 'multiplication') {
                lessonHTML += `
                    <h2 style="text-align: center; margin-bottom: 20px;">×œ×™××•×“ ×›×¤×œ - ×œ×•×— ×”×›×¤×œ! ğŸ“Š</h2>
                    <p><strong>×›×¤×œ</strong> ×–×” ×—×™×‘×•×¨ ×—×•×–×¨ ×©×œ ××•×ª×• ××¡×¤×¨!</p>
                    <div class="example">
                        <p>×œ×“×•×’××”: <span class="ltr-text">3 Ã— 4 = ?</span></p>
                        <p>×–×” ××•××¨: <span class="ltr-text">4 + 4 + 4 = 12</span></p>
                        <p>××•: <span class="ltr-text">3 + 3 + 3 + 3 = 12</span></p>
                    </div>
                    <div class="example">
                        <p><strong>×˜×™×¤ ×—×©×•×‘:</strong> ğŸŒŸ</p>
                        <p><span class="ltr-text">6 Ã— 5</span> ×–×” ××•×ª×• ×“×‘×¨ ×›××• <span class="ltr-text">5 Ã— 6</span></p>
                        <p>×”×ª×•×¦××” ×”×™× ×ª××™×“ <span class="ltr-text">30</span>!</p>
                    </div>
                    <div class="example">
                        <p><strong>×˜×¨×™×§ ×œ×›×¤×œ ×‘-9:</strong></p>
                        <p><span class="ltr-text">6 Ã— 9 = ?</span></p>
                        <p>×”×¡×¤×¨×” ×”×¨××©×•× ×”: <span class="ltr-text">6-1 = 5</span></p>
                        <p>×”×¡×¤×¨×” ×”×©× ×™×™×”: <span class="ltr-text">9-5 = 4</span></p>
                        <p>×”×ª×©×•×‘×”: <span class="ltr-text">54</span>! âœ¨</p>
                    </div>
                    <button class="submit-btn" onclick="startGame('multiplication')">×‘×•× × ×ª×¨×’×œ! ğŸ¯</button>
                `;
            } else if (type === 'division') {
                lessonHTML += `
                    <h2 style="text-align: center; margin-bottom: 20px;">×œ×™××•×“ ×—×™×œ×•×§ - ×—×œ×•×§×” ×©×•×•×”! â—</h2>
                    <p><strong>×—×™×œ×•×§</strong> ×–×” ×œ×—×œ×§ ××¡×¤×¨ ×œ×—×œ×§×™× ×©×•×•×™×!</p>
                    <div class="example">
                        <p>×œ×“×•×’××”: <span class="ltr-text">12 Ã· 3 = ?</span></p>
                        <p>×›××” ×¤×¢××™× <span class="ltr-text">3</span> × ×›× ×¡ ×‘-<span class="ltr-text">12</span>?</p>
                        <p><span class="ltr-text">3 + 3 + 3 + 3 = 12</span></p>
                        <p>×”×ª×©×•×‘×”: <span class="ltr-text">4</span> ×¤×¢××™×! âœ…</p>
                    </div>
                    <div class="example">
                        <p><strong>×˜×™×¤ ×—×©×•×‘:</strong> ğŸŒŸ</p>
                        <p>×—×™×œ×•×§ ×”×•× ×”×”×¤×š ××›×¤×œ!</p>
                        <p>×× <span class="ltr-text">4 Ã— 6 = 24</span></p>
                        <p>××– <span class="ltr-text">24 Ã· 4 = 6</span></p>
                        <p>×•- <span class="ltr-text">24 Ã· 6 = 4</span></p>
                    </div>
                    <div class="example">
                        <p><strong>×–×›×•×¨:</strong></p>
                        <p>×›×œ ××¡×¤×¨ ×—×œ×§×™ ×¢×¦××• = <span class="ltr-text">1</span></p>
                        <p>×›×œ ××¡×¤×¨ ×—×œ×§×™ <span class="ltr-text">1</span> = ×”××¡×¤×¨ ×¢×¦××•</p>
                    </div>
                    <button class="submit-btn" onclick="startGame('division')">×‘×•× × ×ª×¨×’×œ! ğŸ¯</button>
                `;
            } else if (type === 'word') {
                lessonHTML += `
                    <h2 style="text-align: center; margin-bottom: 20px;">×‘×¢×™×•×ª ××™×œ×•×œ×™×•×ª ğŸ“–</h2>
                    <p><strong>××™×š ×¤×•×ª×¨×™× ×‘×¢×™×•×ª ××™×œ×•×œ×™×•×ª?</strong></p>
                    <div class="example">
                        <p><strong>×©×œ×‘ 1:</strong> ×§×¨× ××ª ×”×©××œ×” ×‘×¢×™×•×Ÿ ğŸ‘€</p>
                        <p><strong>×©×œ×‘ 2:</strong> ××¦× ××ª ×”××¡×¤×¨×™× ×”×—×©×•×‘×™× ğŸ”¢</p>
                        <p><strong>×©×œ×‘ 3:</strong> ×‘×—×¨ ×¤×¢×•×œ×” <span class="ltr-text">(+ - Ã— Ã·)</span> âœï¸</p>
                        <p><strong>×©×œ×‘ 4:</strong> ×¤×ª×•×¨ ×•×‘×“×•×§! âœ…</p>
                    </div>
                    <div class="example">
                        <p><strong>×“×•×’××”:</strong></p>
                        <p>"×œ×©×¨×” ×™×© <span class="ltr-text">4</span> ×§×•×¤×¡××•×ª ×¢×¤×¨×•× ×•×ª. ×‘×›×œ ×§×•×¤×¡×” <span class="ltr-text">6</span> ×¢×¤×¨×•× ×•×ª. ×›××” ×¢×¤×¨×•× ×•×ª ×™×© ×œ×”?"</p>
                        <p>ğŸ“ ×”××¡×¤×¨×™×: <span class="ltr-text">4</span> ×•-<span class="ltr-text">6</span></p>
                        <p>ğŸ¤” ×”×¤×¢×•×œ×”: ×›×¤×œ (×›×™ ×™×© ×›××” ×§×•×¤×¡××•×ª ×©×œ ××•×ª×” ×›××•×ª)</p>
                        <p>âœ¨ ×”×¤×ª×¨×•×Ÿ: <span class="ltr-text">4 Ã— 6 = 24</span> ×¢×¤×¨×•× ×•×ª</p>
                    </div>
                    <button class="submit-btn" onclick="startGame('word')">××ª×’×¨ ×‘×¢×™×•×ª! ğŸ”¥</button>
                `;
            }
            
            lessonHTML += '</div>';
            content.innerHTML = lessonHTML;
        }

        function startGame(type) {
            playClickSound();
            gameType = type;
            score = 0;
            wrong = 0;
            timeLeft = 60;
            isChecking = false;
            
            const content = document.getElementById('content');
            const areaClass = type === 'mixed' ? 'challenge-area' : 'game-area';
            content.innerHTML = `
                <div class="${areaClass}">
                    <div class="score-area">
                        <div>× ×§×•×“×•×ª: <span class="points" id="score">0</span></div>
                        <div>×˜×¢×•×™×•×ª: <span class="wrong" id="wrong">0</span></div>
                        <div class="timer">â° ×–××Ÿ × ×•×ª×¨: <span id="timer">60</span> ×©× ×™×•×ª</div>
                    </div>
                    <div class="question" id="question"></div>
                    <div class="answer-input">
                        <input type="number" id="answer" placeholder="?" />
                    </div>
                    <div style="text-align: center;">
                        <button class="submit-btn" onclick="checkAnswer()">âœ“ ×‘×“×•×§</button>
                    </div>
                    <div id="feedback"></div>
                </div>
            `;
            
            nextQuestion();
            startTimer();
            
            const answerInput = document.getElementById('answer');
            if (answerInput) {
                answerInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') checkAnswer();
                });
            }
        }

        function nextQuestion() {
            const questionEl = document.getElementById('question');
            if (!questionEl) return;
            
            let num1, num2, operation;
            
            if (gameType === 'multiplication') {
                num1 = Math.floor(Math.random() * 10) + 1;
                num2 = Math.floor(Math.random() * 10) + 1;
                currentAnswer = num1 * num2;
                questionEl.innerHTML = `${num1} Ã— ${num2} = ?`;
            } else if (gameType === 'division') {
                num2 = Math.floor(Math.random() * 9) + 2;
                currentAnswer = Math.floor(Math.random() * 9) + 1;
                num1 = num2 * currentAnswer;
                questionEl.innerHTML = `${num1} Ã· ${num2} = ?`;
            } else if (gameType === 'word') {
                const wordProblems = [
                    {
                        text: '×‘×›×™×ª×” ×™×© {0} ×ª×œ××™×“×™×. ×›×œ ×ª×œ××™×“ ×§×™×‘×œ {1} ×¢×¤×¨×•× ×•×ª. ×›××” ×¢×¤×¨×•× ×•×ª ×—×•×œ×§×• ×‘×¡×š ×”×›×œ?',
                        type: 'Ã—'
                    },
                    {
                        text: '×œ××•×¨×” ×™×© {0} ××“×‘×§×•×ª. ×”×™× ×¨×•×¦×” ×œ×—×œ×§ ××•×ª×Ÿ ×©×•×•×” ×‘×©×•×•×” ×œ-{1} ×™×œ×“×™×. ×›××” ××“×‘×§×•×ª ×™×§×‘×œ ×›×œ ×™×œ×“?',
                        type: 'Ã·'
                    },
                    {
                        text: '×‘×¡×¤×¨×™×™×” ×”×™×• {0} ×¡×¤×¨×™×. ×”×•×¡×™×¤×• ×¢×•×“ {1} ×¡×¤×¨×™× ×—×“×©×™×. ×›××” ×¡×¤×¨×™× ×™×© ×›×¢×ª?',
                        type: '+'
                    },
                    {
                        text: '×œ×“× ×™ ×”×™×• {0} ×©×§×œ×™×. ×”×•× ×§× ×” ×¦×¢×¦×•×¢ ×‘-{1} ×©×§×œ×™×. ×›××” ×›×¡×£ × ×©××¨ ×œ×•?',
                        type: '-'
                    },
                    {
                        text: '×‘×’×™× ×” ×™×© {0} ×©×•×¨×•×ª ×©×œ ×¤×¨×—×™×. ×‘×›×œ ×©×•×¨×” {1} ×¤×¨×—×™×. ×›××” ×¤×¨×—×™× ×™×© ×‘×’×™× ×”?',
                        type: 'Ã—'
                    },
                    {
                        text: '×‘××©×—×§ ××¡×¤×• {0} × ×§×•×“×•×ª. ×¦×¨×™×š ×œ×—×œ×§ ××•×ª×Ÿ ×‘×™×Ÿ {1} ×©×—×§× ×™×. ×›××” × ×§×•×“×•×ª ×™×§×‘×œ ×›×œ ×©×—×§×Ÿ?',
                        type: 'Ã·'
                    },
                    {
                        text: '×‘×—× ×•×ª ×”×™×• {0} ×‘×œ×•× ×™× ××“×•××™× ×•-{1} ×‘×œ×•× ×™× ×›×—×•×œ×™×. ×›××” ×‘×œ×•× ×™× ×™×© ×‘×¡×š ×”×›×œ?',
                        type: '+'
                    },
                    {
                        text: '××× ×§× ×ª×” {0} ×¢×•×’×™×•×ª. ×”××—×™× ××›×œ×• {1} ×¢×•×’×™×•×ª. ×›××” ×¢×•×’×™×•×ª × ×©××¨×•?',
                        type: '-'
                    },
                    {
                        text: '×‘×›×œ ×§×•×¤×¡×” ×™×© {0} ×¡×•×›×¨×™×•×ª. ×™×© {1} ×§×•×¤×¡××•×ª. ×›××” ×¡×•×›×¨×™×•×ª ×™×© ×‘×¡×š ×”×›×œ?',
                        type: 'Ã—'
                    },
                    {
                        text: '×—×™×œ×§×• {0} ×ª×¤×•×—×™× ×‘×™×Ÿ {1} ×™×œ×“×™× ×‘××•×¤×Ÿ ×©×•×•×”. ×›××” ×ª×¤×•×—×™× ×§×™×‘×œ ×›×œ ×™×œ×“?',
                        type: 'Ã·'
                    }
                ];
                
                const problem = wordProblems[Math.floor(Math.random() * wordProblems.length)];
                
                if (problem.type === 'Ã—') {
                    num1 = Math.floor(Math.random() * 8) + 2;
                    num2 = Math.floor(Math.random() * 8) + 2;
                    currentAnswer = num1 * num2;
                } else if (problem.type === 'Ã·') {
                    num2 = Math.floor(Math.random() * 7) + 2;
                    currentAnswer = Math.floor(Math.random() * 8) + 2;
                    num1 = num2 * currentAnswer;
                } else if (problem.type === '+') {
                    num1 = Math.floor(Math.random() * 40) + 10;
                    num2 = Math.floor(Math.random() * 40) + 10;
                    currentAnswer = num1 + num2;
                } else {
                    num1 = Math.floor(Math.random() * 50) + 30;
                    num2 = Math.floor(Math.random() * 25) + 5;
                    currentAnswer = num1 - num2;
                }
                
                const questionText = problem.text.replace('{0}', `<span class="ltr-text">${num1}</span>`).replace('{1}', `<span class="ltr-text">${num2}</span>`);
                questionEl.style.fontSize = '1.8em';
                questionEl.style.direction = 'rtl';
                questionEl.innerHTML = questionText;
            } else {
                const ops = ['+', '-', 'Ã—', 'Ã·'];
                operation = ops[Math.floor(Math.random() * ops.length)];
                
                if (operation === '+') {
                    num1 = Math.floor(Math.random() * 50) + 10;
                    num2 = Math.floor(Math.random() * 50) + 10;
                    currentAnswer = num1 + num2;
                } else if (operation === '-') {
                    num1 = Math.floor(Math.random() * 50) + 30;
                    num2 = Math.floor(Math.random() * 30) + 1;
                    currentAnswer = num1 - num2;
                } else if (operation === 'Ã—') {
                    num1 = Math.floor(Math.random() * 10) + 1;
                    num2 = Math.floor(Math.random() * 10) + 1;
                    currentAnswer = num1 * num2;
                } else {
                    num2 = Math.floor(Math.random() * 9) + 2;
                    currentAnswer = Math.floor(Math.random() * 9) + 1;
                    num1 = num2 * currentAnswer;
                }
                
                questionEl.style.fontSize = '2.5em';
                questionEl.style.direction = 'ltr';
                questionEl.innerHTML = `${num1} ${operation} ${num2} = ?`;
            }
            
            const answerInput = document.getElementById('answer');
            const feedbackEl = document.getElementById('feedback');
            
            if (answerInput) {
                answerInput.value = '';
                answerInput.focus();
            }
            if (feedbackEl) {
                feedbackEl.innerHTML = '';
            }
        }

        function checkAnswer() {
            if (isChecking) return;
            
            playClickSound();
            const answerInput = document.getElementById('answer');
            const feedback = document.getElementById('feedback');
            const scoreEl = document.getElementById('score');
            const wrongEl = document.getElementById('wrong');
            
            if (!answerInput || !feedback) return;
            
            const userAnswer = parseInt(answerInput.value);
            
            if (isNaN(userAnswer)) {
                feedback.innerHTML = '<div class="feedback incorrect">×× × ×”×›× ×¡ ×ª×©×•×‘×”!</div>';
                playWrongSound();
                return;
            }
            
            isChecking = true;
            
            if (userAnswer === currentAnswer) {
                playCorrectSound();
                score += 2;
                if (scoreEl) scoreEl.textContent = score;
                feedback.innerHTML = '<div class="feedback correct">ğŸ‰ ××¦×•×™×Ÿ! ×ª×©×•×‘×” × ×›×•× ×”!</div>';
                setTimeout(function() {
                    isChecking = false;
                    nextQuestion();
                }, 1000);
            } else {
                playWrongSound();
                wrong++;
                if (wrongEl) wrongEl.textContent = wrong;
                feedback.innerHTML = `<div class="feedback incorrect">âŒ ×œ× × ×›×•×Ÿ. ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™× <span class="ltr-text">${currentAnswer}</span></div>`;
                setTimeout(function() {
                    isChecking = false;
                    nextQuestion();
                }, 2000);
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            
            timer = setInterval(function() {
                timeLeft--;
                const timerEl = document.getElementById('timer');
                if (timerEl) {
                    timerEl.textContent = timeLeft;
                }
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            clearInterval(timer);
            const content = document.getElementById('content');
            let message = '';
            let bgColor = '';
            let borderColor = '';
            
            if (score >= 20) {
                message = 'ğŸ† ××“×”×™×! ××ª×” ××œ×•×£ ××ª××˜×™×§×”!';
                bgColor = 'background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);';
                borderColor = 'border: 4px solid #27ae60;';
            } else if (score >= 10) {
                message = 'â­ ×›×œ ×”×›×‘×•×“! ×¢×‘×•×“×” ×˜×•×‘×”!';
                bgColor = 'background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);';
                borderColor = 'border: 4px solid #74b9ff;';
            } else {
                message = 'ğŸ’ª ×”××©×š ×œ×”×ª×××Ÿ, ××ª×” ××©×ª×¤×¨!';
                bgColor = 'background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);';
                borderColor = 'border: 4px solid #f39c12;';
            }
            
            content.innerHTML = `
                <div style="border-radius: 20px; padding: 30px; margin-top: 20px; ${bgColor} ${borderColor}">
                    <h2 style="text-align: center; font-size: 2.5em; margin-bottom: 20px; color: #2c3e50;">×”××©×—×§ ×”×¡×ª×™×™×!</h2>
                    <div style="text-align: center; font-size: 2em; margin: 30px 0;">
                        <p style="color: #27ae60; margin: 10px 0;">× ×§×•×“×•×ª: <span class="ltr-text">${score}</span> ğŸ¯</p>
                        <p style="color: #e74c3c; margin: 10px 0;">×˜×¢×•×™×•×ª: <span class="ltr-text">${wrong}</span> âŒ</p>
                        <p style="font-size: 1.5em; margin: 30px 0; color: #2c3e50;">${message}</p>
                    </div>
                    <div style="text-align: center;">
                        <button class="submit-btn" onclick="startGame('${gameType}')">×©×—×§ ×©×•×‘! ğŸ”„</button>
                        <button class="submit-btn" onclick="location.reload()">×—×–×•×¨ ×œ×ª×¤×¨×™×˜ ğŸ </button>
                    </div>
                </div>
            `;
        }
        
        document.addEventListener('wheel', function(e) {
            if (document.activeElement && document.activeElement.type === 'number') {
                document.activeElement.blur();
            }
        });
    </script>
</body>
</html>