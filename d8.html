<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×’××•××˜×¨×™×” - ×›×™×ª×” ×“'</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; background: white; border-radius: 25px; padding: 40px; box-shadow: 0 25px 70px rgba(0,0,0,0.4); }
        h1 { color: #667eea; text-align: center; margin-bottom: 15px; font-size: 3em; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        .subtitle { text-align: center; color: #666; margin-bottom: 35px; font-size: 1.3em; }
        .tabs { display: flex; gap: 12px; margin-bottom: 35px; flex-wrap: wrap; justify-content: center; }
        .tab { padding: 16px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 12px; cursor: pointer; font-size: 1.15em; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white; }
        .tab:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, #7c8ef5 0%, #8a5eb8 100%); }
        .tab.active { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); transform: scale(1.05); }
        .content { display: none; }
        .content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .lesson { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); }
        .lesson h2 { color: #ff6b6b; margin-bottom: 20px; font-size: 1.8em; }
        .lesson p { font-size: 1.2em; line-height: 1.8; margin-bottom: 15px; color: #333; }
        .example { background: white; padding: 20px; border-right: 5px solid #667eea; margin: 20px 0; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.08); }
        .example h3 { color: #f093fb; margin-bottom: 12px; font-size: 1.3em; }
        .shape-display { text-align: center; margin: 20px 0; }
        .game { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; color: white; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .game h2 { margin-bottom: 20px; font-size: 2em; }
        .question-counter { text-align: center; font-size: 1.3em; margin: 15px 0; color: #fff; background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px; }
        .score { text-align: center; font-size: 1.8em; margin: 25px 0; color: #fff; font-weight: bold; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 12px; }
        .problem-display { font-size: 1.8em; text-align: center; margin: 30px 0; padding: 25px; background: rgba(255,255,255,0.3); border-radius: 15px; font-weight: bold; line-height: 1.6; }
        input[type="number"] { width: 200px; padding: 15px; font-size: 1.8em; border: 4px solid white; border-radius: 10px; text-align: center; margin: 10px; font-weight: bold; }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type="number"] { -moz-appearance: textfield; }
        input[type="number"]::placeholder { text-align: center; font-size: 0.7em; color: #999; }
        button { background: white; color: #667eea; border: none; padding: 14px 35px; font-size: 1.2em; border-radius: 10px; cursor: pointer; transition: all 0.3s; font-weight: bold; box-shadow: 0 6px 12px rgba(0,0,0,0.2); margin: 5px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .feedback { padding: 20px; border-radius: 12px; margin-top: 20px; font-size: 1.3em; text-align: center; font-weight: bold; }
        .correct { background: #51cf66; color: white; }
        .incorrect { background: #ff6b6b; color: white; }
        .controls { text-align: center; margin: 25px 0; }
        .round-complete { background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%); padding: 40px; border-radius: 20px; text-align: center; color: white; margin: 20px 0; }
        .round-complete h3 { font-size: 2.5em; margin-bottom: 20px; }
        .round-complete p { font-size: 1.5em; margin: 15px 0; }
        .new-round-btn { background: white; color: #51cf66; font-size: 1.5em; padding: 20px 40px; margin-top: 20px; border: none; border-radius: 15px; cursor: pointer; font-weight: bold; box-shadow: 0 8px 16px rgba(0,0,0,0.2); transition: all 0.3s; }
        .new-round-btn:hover { transform: scale(1.05); box-shadow: 0 12px 24px rgba(0,0,0,0.3); }
        .steps { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: right; }
        .steps p { margin: 10px 0; font-size: 1.1em; }
        .formula-box { background: #fff3cd; border: 3px solid #ffc107; padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center; font-size: 1.3em; font-weight: bold; color: #856404; }
        .options { display: flex; flex-direction: column; gap: 15px; max-width: 400px; margin: 20px auto; }
        .option-btn { background: white; color: #667eea; padding: 15px 30px; font-size: 1.3em; border-radius: 10px; border: 3px solid white; cursor: pointer; transition: all 0.3s; }
        .option-btn:hover { transform: scale(1.05); background: #f093fb; color: white; border-color: #f093fb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>×’××•××˜×¨×™×” ğŸ“</h1>
        <div class="subtitle">×›×™×ª×” ×“' - ×‘×•××• ×œ×œ××•×“ ×¦×•×¨×•×ª ×•×—×™×©×•×‘×™×!</div>
        
        <div class="tabs">
            <button class="tab active" data-tab="lesson1">ğŸ“š ×©×™×¢×•×¨: ××©×•×œ×©×™× ×•××¢×’×œ</button>
            <button class="tab" data-tab="game1">ğŸ® ××©×—×§: ×–×™×”×•×™ ×¦×•×¨×•×ª</button>
            <button class="tab" data-tab="lesson2">ğŸ“š ×©×™×¢×•×¨: ×–×•×•×™×•×ª</button>
            <button class="tab" data-tab="game2">ğŸ¯ ××©×—×§: ×—×™×©×•×‘ ×–×•×•×™×•×ª</button>
            <button class="tab" data-tab="lesson3">ğŸ“š ×©×™×¢×•×¨: ×”×™×§×£ ×•×©×˜×—</button>
            <button class="tab" data-tab="game3">ğŸ† ××©×—×§: ×—×™×©×•×‘×™×</button>
        </div>
        
        <div id="lesson1" class="content active">
            <div class="lesson">
                <h2>×¡×•×’×™ ××©×•×œ×©×™×</h2>
                <p>××©×•×œ×©×™× ××¡×•×•×’×™× ×œ×¤×™ ×”×¦×œ×¢×•×ª ×•×”×–×•×•×™×•×ª ×©×œ×”×:</p>
                
                <div class="example">
                    <h3>×¡×™×•×•×’ ×œ×¤×™ ×¦×œ×¢×•×ª:</h3>
                    <p><strong>××©×•×œ×© ×©×•×•×” ×¦×œ×¢×•×ª:</strong> ×›×œ ×©×œ×•×© ×”×¦×œ×¢×•×ª ×©×•×•×ª</p>
                    <div class="shape-display">
                        <svg width="120" height="110" style="display: inline-block;">
                            <polygon points="60,10 10,100 110,100" fill="#51cf66" stroke="#2b8a3e" stroke-width="3"/>
                            <text x="60" y="70" text-anchor="middle" fill="white" font-size="16" font-weight="bold">6 ×¡"×</text>
                        </svg>
                    </div>
                    
                    <p><strong>××©×•×œ×© ×©×•×•×” ×©×•×§×™×™×:</strong> ×©×ª×™ ×¦×œ×¢×•×ª ×©×•×•×ª</p>
                    <div class="shape-display">
                        <svg width="120" height="120" style="display: inline-block;">
                            <polygon points="60,10 20,110 100,110" fill="#4dabf7" stroke="#1971c2" stroke-width="3"/>
                            <text x="35" y="65" fill="white" font-size="14" font-weight="bold">7</text>
                            <text x="75" y="65" fill="white" font-size="14" font-weight="bold">7</text>
                        </svg>
                    </div>
                    
                    <p><strong>××©×•×œ×© ×©×•× ×” ×¦×œ×¢×•×ª:</strong> ×›×œ ×”×¦×œ×¢×•×ª ×‘××•×¨×›×™× ×©×•× ×™×</p>
                    <div class="shape-display">
                        <svg width="140" height="100" style="display: inline-block;">
                            <polygon points="20,10 10,90 130,80" fill="#ff6b6b" stroke="#c92a2a" stroke-width="3"/>
                            <text x="50" y="50" fill="white" font-size="14" font-weight="bold">5, 6, 8</text>
                        </svg>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×¡×™×•×•×’ ×œ×¤×™ ×–×•×•×™×•×ª:</h3>
                    <p><strong>××©×•×œ×© ×—×“ ×–×•×•×™×ª:</strong> ×›×œ ×”×–×•×•×™×•×ª ×§×˜× ×•×ª ×-90Â°</p>
                    <p><strong>××©×•×œ×© ×™×©×¨ ×–×•×•×™×ª:</strong> ×™×© ×–×•×•×™×ª ××—×ª ×©×œ 90Â° ×‘×“×™×•×§</p>
                    <p><strong>××©×•×œ×© ×§×”×” ×–×•×•×™×ª:</strong> ×™×© ×–×•×•×™×ª ××—×ª ×’×“×•×œ×” ×-90Â°</p>
                </div>
                
                <h2 style="color: #ff6b6b; margin-top: 30px;">××¢×’×œ - ×—×œ×§×™× ×—×©×•×‘×™×</h2>
                
                <div class="example">
                    <div class="shape-display">
                        <svg width="300" height="300" style="display: inline-block;">
                            <circle cx="150" cy="150" r="100" fill="none" stroke="#667eea" stroke-width="4"/>
                            <circle cx="150" cy="150" r="5" fill="#ff6b6b"/>
                            <line x1="150" y1="150" x2="250" y2="150" stroke="#51cf66" stroke-width="3"/>
                            <line x1="50" y1="150" x2="250" y2="150" stroke="#ffd43b" stroke-width="3"/>
                            <line x1="100" y1="80" x2="220" y2="190" stroke="#4dabf7" stroke-width="3"/>
                            
                            <text x="200" y="145" fill="#51cf66" font-size="16" font-weight="bold">×¨×“×™×•×¡</text>
                            <text x="150" y="130" fill="#ffd43b" font-size="16" font-weight="bold">×§×•×˜×¨</text>
                            <text x="165" y="110" fill="#4dabf7" font-size="16" font-weight="bold">××™×ª×¨</text>
                            <text x="145" y="170" fill="#ff6b6b" font-size="14" font-weight="bold">××¨×›×–</text>
                        </svg>
                    </div>
                    
                    <div class="steps">
                        <p><strong>×¨×“×™×•×¡:</strong> ×§×˜×¢ ×”××—×‘×¨ ××ª ×”××¨×›×– ×œ× ×§×•×“×” ×¢×œ ×”××¢×’×œ</p>
                        <p><strong>×§×•×˜×¨:</strong> ×§×˜×¢ ×”×¢×•×‘×¨ ×‘××¨×›×– ×•××—×‘×¨ ×©×ª×™ × ×§×•×“×•×ª ×¢×œ ×”××¢×’×œ (×§×•×˜×¨ = 2 Ã— ×¨×“×™×•×¡)</p>
                        <p><strong>××™×ª×¨:</strong> ×§×˜×¢ ×”××—×‘×¨ ×©×ª×™ × ×§×•×“×•×ª ×›×œ×©×”×Ÿ ×¢×œ ×”××¢×’×œ</p>
                    </div>
                    
                    <div class="formula-box">
                        ×§×•×˜×¨ = 2 Ã— ×¨×“×™×•×¡
                    </div>
                    
                    <div class="formula-box" style="margin-top: 10px;">
                        ×¨×“×™×•×¡ = ×§×•×˜×¨ Ã· 2
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’×××•×ª ×œ×—×™×©×•×‘ ×¨×“×™×•×¡ ×•×§×•×˜×¨:</h3>
                    
                    <p><strong>×“×•×’××” 1:</strong> ×—×™×©×•×‘ ×§×•×˜×¨</p>
                    <div class="steps">
                        <p>××¢×’×œ ×©×”×¨×“×™×•×¡ ×©×œ×• ×”×•× 7 ×¡"×. ××” ×”×§×•×˜×¨?</p>
                        <p>×§×•×˜×¨ = 2 Ã— ×¨×“×™×•×¡</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>2 Ã— 7 = 14 ×§×•×˜×¨</strong></p>
                    </div>
                    
                    <p><strong>×“×•×’××” 2:</strong> ×—×™×©×•×‘ ×¨×“×™×•×¡</p>
                    <div class="steps">
                        <p>××¢×’×œ ×©×”×§×•×˜×¨ ×©×œ×• ×”×•× 18 ×¡"×. ××” ×”×¨×“×™×•×¡?</p>
                        <p>×¨×“×™×•×¡ = ×§×•×˜×¨ Ã· 2</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>18 Ã· 2 = 9 ×¨×“×™×•×¡</strong></p>
                    </div>
                    
                    <p><strong>×“×•×’××” 3:</strong> ×‘×¢×™×” ××™×œ×•×œ×™×ª</p>
                    <div class="steps">
                        <p>×’×œ×’×œ ××•×¤× ×™×™× ×©×”×¨×“×™×•×¡ ×©×œ×• 30 ×¡"×.</p>
                        <p>××” ×”×§×•×˜×¨ ×©×œ ×”×’×œ×’×œ?</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>2 Ã— 30 = 60 ×§×•×˜×¨</strong></p>
                    </div>
                    
                    <p><strong>×“×•×’××” 4:</strong> ×‘×¢×™×” ××™×œ×•×œ×™×ª</p>
                    <div class="steps">
                        <p>×¤×™×¦×” ×¢×’×•×œ×” ×©×”×§×•×˜×¨ ×©×œ×” 40 ×¡"×.</p>
                        <p>××” ×”×¨×“×™×•×¡ ×©×œ ×”×¤×™×¦×”?</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>40 Ã· 2 = 20 ×¨×“×™×•×¡</strong></p>
                    </div>
                    
                    <div class="shape-display" style="margin-top: 20px;">
                        <svg width="280" height="180" style="display: inline-block; background: #f8f9fa; border-radius: 10px; padding: 10px;">
                            <circle cx="90" cy="90" r="60" fill="none" stroke="#667eea" stroke-width="3"/>
                            <circle cx="90" cy="90" r="3" fill="#ff6b6b"/>
                            <line x1="90" y1="90" x2="150" y2="90" stroke="#51cf66" stroke-width="3"/>
                            <line x1="30" y1="90" x2="150" y2="90" stroke="#ffd43b" stroke-width="3" stroke-dasharray="5,5"/>
                            <text x="120" y="85" fill="#51cf66" font-size="14" font-weight="bold">×¨×“×™×•×¡ = 6</text>
                            <text x="70" y="75" fill="#ffd43b" font-size="14" font-weight="bold">×§×•×˜×¨ = 12</text>
                        </svg>
                    </div>
                </div>
                
                <h2 style="color: #ff6b6b; margin-top: 30px;">×”×™×§×£ ××©×•×œ×©</h2>
                
                <div class="example">
                    <h3>×›×™×¦×“ ××—×©×‘×™× ×”×™×§×£ ××©×•×œ×©?</h3>
                    <p>×”×™×§×£ ××©×•×œ×© = ×¡×›×•× ×›×œ ×©×œ×•×© ×”×¦×œ×¢×•×ª</p>
                    
                    <div class="formula-box">
                        ×”×™×§×£ = ×¦×œ×¢ × + ×¦×œ×¢ ×‘ + ×¦×œ×¢ ×’
                    </div>
                    
                    <h3 style="margin-top: 25px;">×“×•×’××” 1: ××©×•×œ×© ×©×•×•×” ×¦×œ×¢×•×ª</h3>
                    <div class="shape-display">
                        <svg width="150" height="140" style="display: inline-block;">
                            <polygon points="75,20 20,120 130,120" fill="#51cf66" stroke="#2b8a3e" stroke-width="3"/>
                            <text x="75" y="80" text-anchor="middle" fill="white" font-size="18" font-weight="bold">7 ×¡"×</text>
                        </svg>
                    </div>
                    <div class="steps">
                        <p>×›×œ ×©×œ×•×© ×”×¦×œ×¢×•×ª ×©×•×•×ª: 7 ×¡"×</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>7 + 7 + 7 = 21</strong></p>
                        <p><strong>××• ×‘×§×™×¦×•×¨:</strong></p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>3 Ã— 7 = 21</strong></p>
                    </div>
                    
                    <h3 style="margin-top: 25px;">×“×•×’××” 2: ××©×•×œ×© ×©×•×•×” ×©×•×§×™×™×</h3>
                    <div class="shape-display">
                        <svg width="150" height="150" style="display: inline-block;">
                            <polygon points="75,20 25,130 125,130" fill="#4dabf7" stroke="#1971c2" stroke-width="3"/>
                            <text x="45" y="80" fill="white" font-size="16" font-weight="bold">8 ×¡"×</text>
                            <text x="95" y="80" fill="white" font-size="16" font-weight="bold">8 ×¡"×</text>
                            <text x="75" y="145" text-anchor="middle" fill="#1971c2" font-size="16" font-weight="bold">6 ×¡"×</text>
                        </svg>
                    </div>
                    <div class="steps">
                        <p>×©×ª×™ ×¦×œ×¢×•×ª ×©×•×•×ª: 8 ×¡"×, ×‘×¡×™×¡: 6 ×¡"×</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>8 + 8 + 6 = 22</strong></p>
                    </div>
                    
                    <h3 style="margin-top: 25px;">×“×•×’××” 3: ××©×•×œ×© ×©×•× ×” ×¦×œ×¢×•×ª</h3>
                    <div class="shape-display">
                        <svg width="180" height="140" style="display: inline-block;">
                            <polygon points="30,20 20,120 160,110" fill="#ff6b6b" stroke="#c92a2a" stroke-width="3"/>
                            <text x="20" y="75" fill="white" font-size="16" font-weight="bold">5</text>
                            <text x="95" y="25" fill="white" font-size="16" font-weight="bold">8</text>
                            <text x="90" y="130" fill="#c92a2a" font-size="16" font-weight="bold">10 ×¡"×</text>
                        </svg>
                    </div>
                    <div class="steps">
                        <p>×©×œ×•×© ×¦×œ×¢×•×ª ×©×•× ×•×ª: 5 ×¡"×, 8 ×¡"×, 10 ×¡"×</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>5 + 8 + 10 = 23</strong></p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game1" class="content">
            <div class="game">
                <h2>××©×—×§ ×–×™×”×•×™ ×¦×•×¨×•×ª ×•××¢×’×œ</h2>
                <div class="question-counter">×©××œ×” <span id="q-count1">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="score1">0</span></div>
                <div class="problem-display" id="problem1">×˜×•×¢×Ÿ...</div>
                <div class="controls" id="controls1"></div>
                <div id="feedback1"></div>
                <div id="round-end1" style="display: none;"></div>
            </div>
        </div>
        
        <div id="lesson2" class="content">
            <div class="lesson">
                <h2>×–×•×•×™×•×ª - ××•×©×’×™× ×‘×¡×™×¡×™×™×</h2>
                
                <div class="example">
                    <h3>××”×™ ×–×•×•×™×ª?</h3>
                    <p>×–×•×•×™×ª ×”×™× ×”×¤×ª×™×—×” ×‘×™×Ÿ ×©×ª×™ ×§×¨× ×™×™× ×”×™×•×¦××•×ª ×××•×ª×” × ×§×•×“×”.</p>
                    <p>×–×•×•×™×ª × ××“×“×ª ×‘××¢×œ×•×ª (Â°) ×‘×¢×–×¨×ª ××“ ×–×•×•×™×•×ª (××“×™×“×•×Ÿ).</p>
                </div>
                
                <div class="example">
                    <h3>×¡×•×’×™ ×–×•×•×™×•×ª:</h3>
                    <p><strong>×–×•×•×™×ª ×—×“×”:</strong> ×§×˜× ×” ×-90Â°</p>
                    <p><strong>×–×•×•×™×ª ×™×©×¨×”:</strong> ×‘×“×™×•×§ 90Â°</p>
                    <p><strong>×–×•×•×™×ª ×§×”×”:</strong> ×’×“×•×œ×” ×-90Â° ××š ×§×˜× ×” ×-180Â°</p>
                    <p><strong>×–×•×•×™×ª ×©×˜×•×—×”:</strong> ×‘×“×™×•×§ 180Â° (×§×• ×™×©×¨)</p>
                    <p><strong>×–×•×•×™×ª ×§×¢×•×¨×”:</strong> ×’×“×•×œ×” ×-180Â°</p>
                </div>
                
                <div class="example">
                    <h3>×™×—×¡×™× ×‘×™×Ÿ ×–×•×•×™×•×ª:</h3>
                    
                    <p><strong>×–×•×•×™×•×ª ×¦××•×“×•×ª:</strong> ×©×ª×™ ×–×•×•×™×•×ª ×©×—×•×œ×§×•×ª ×§×¨×Ÿ ××©×•×ª×¤×ª</p>
                    <div class="shape-display">
                        <svg width="250" height="150">
                            <line x1="20" y1="130" x2="230" y2="130" stroke="#667eea" stroke-width="3"/>
                            <line x1="125" y1="130" x2="180" y2="30" stroke="#667eea" stroke-width="3"/>
                            <text x="80" y="115" fill="#667eea" font-size="20" font-weight="bold">Î±</text>
                            <text x="160" y="115" fill="#667eea" font-size="20" font-weight="bold">Î²</text>
                        </svg>
                    </div>
                    
                    <div class="formula-box">
                        ×–×•×•×™×•×ª ××©×œ×™××•×ª: Î± + Î² = 90Â°
                    </div>
                    <p>×©×ª×™ ×–×•×•×™×•×ª ×©×¡×›×•××Ÿ 90 ××¢×œ×•×ª</p>
                    
                    <div class="formula-box">
                        ×–×•×•×™×•×ª ××©×•×›×œ×œ×•×ª: Î± + Î² = 180Â°
                    </div>
                    <p>×©×ª×™ ×–×•×•×™×•×ª ×©×¡×›×•××Ÿ 180 ××¢×œ×•×ª</p>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××”:</h3>
                    <p>×× Î± = 35Â°, ××”×™ ×”×–×•×•×™×ª ×”××©×œ×™××” ×©×œ×”?</p>
                    <div class="steps">
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>90Â° - 35Â° = 55Â°</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×”×–×•×•×™×ª ×”××©×œ×™××” ×”×™× 55Â°</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×¢×•×“ ×“×•×’×××•×ª:</h3>
                    
                    <p><strong>×“×•×’××” 1:</strong> ×–×•×•×™×•×ª ××©×œ×™××•×ª</p>
                    <div class="steps">
                        <p>×–×•×•×™×ª ××—×ª ×”×™× 62Â°. ××”×™ ×”×–×•×•×™×ª ×”××©×œ×™××”?</p>
                        <p>×–×•×•×™×•×ª ××©×œ×™××•×ª: ×¡×›×•××Ÿ = 90Â°</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>90Â° - 62Â° = 28Â°</strong></p>
                    </div>
                    
                    <p><strong>×“×•×’××” 2:</strong> ×–×•×•×™×•×ª ××©×•×›×œ×œ×•×ª</p>
                    <div class="steps">
                        <p>×–×•×•×™×ª ××—×ª ×”×™× 115Â°. ××”×™ ×”×–×•×•×™×ª ×”××©×•×›×œ×œ×ª?</p>
                        <p>×–×•×•×™×•×ª ××©×•×›×œ×œ×•×ª: ×¡×›×•××Ÿ = 180Â°</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>180Â° - 115Â° = 65Â°</strong></p>
                    </div>
                    
                    <p><strong>×“×•×’××” 3:</strong> ×‘×“×™×§×ª ×¡×›×•×</p>
                    <div class="steps">
                        <p>×©×ª×™ ×–×•×•×™×•×ª: 43Â° ×•-47Â°. ×”×× ×”×Ÿ ××©×œ×™××•×ª?</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>43Â° + 47Â° = 90Â°</strong></p>
                        <p><strong>×›×Ÿ!</strong> ×”×Ÿ ××©×œ×™××•×ª ×›×™ ×”×¡×›×•× ×©×•×•×” ×œ-90Â°</p>
                    </div>
                    
                    <p><strong>×“×•×’××” 4:</strong> ×‘×¢×™×” ××™×œ×•×œ×™×ª</p>
                    <div class="steps">
                        <p>×©×ª×™ ×–×•×•×™×•×ª ×¦××•×“×•×ª ×™×•×¦×¨×•×ª ×§×• ×™×©×¨ (180Â°).</p>
                        <p>×× ×–×•×•×™×ª ××—×ª ×”×™× 72Â°, ××”×™ ×”×–×•×•×™×ª ×”×©× ×™×™×”?</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>180Â° - 72Â° = 108Â°</strong></p>
                    </div>
                    
                    <p><strong>×“×•×’××” 5:</strong> ×–×™×”×•×™ ×¡×•×’ ×–×•×•×™×ª</p>
                    <div class="steps">
                        <p>×–×•×•×™×ª ×©×œ 45Â° - ×—×“×” (×§×˜× ×” ×-90Â°)</p>
                        <p>×–×•×•×™×ª ×©×œ 90Â° - ×™×©×¨×” (×‘×“×™×•×§ 90Â°)</p>
                        <p>×–×•×•×™×ª ×©×œ 135Â° - ×§×”×” (×‘×™×Ÿ 90Â° ×œ-180Â°)</p>
                        <p>×–×•×•×™×ª ×©×œ 180Â° - ×©×˜×•×—×” (×§×• ×™×©×¨)</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game2" class="content">
            <div class="game">
                <h2>××©×—×§ ×–×•×•×™×•×ª</h2>
                <div class="question-counter">×©××œ×” <span id="q-count2">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="score2">0</span></div>
                <div class="problem-display" id="problem2">×˜×•×¢×Ÿ...</div>
                <div class="controls" id="controls2">
                    <input type="number" id="answer2" placeholder="×”×›× ×¡ ×ª×©×•×‘×”">
                    <br><br>
                    <button id="check2">×‘×“×•×§</button>
                </div>
                <div id="feedback2"></div>
                <div id="round-end2" style="display: none;"></div>
            </div>
        </div>
        
        <div id="lesson3" class="content">
            <div class="lesson">
                <h2>×”×™×§×£ - ××“×™×“×ª ×”×™×§×£ ×¦×•×¨×”</h2>
                <p>×”×™×§×£ ×”×•× ××•×¨×š ×”×’×‘×•×œ ×”××§×™×£ ××ª ×”×¦×•×¨×” (×”×¡×›×•× ×©×œ ×›×œ ×”×¦×œ×¢×•×ª).</p>
                
                <div class="example">
                    <h3>×“×•×’××” 1: ××œ×‘×Ÿ</h3>
                    <div class="shape-display">
                        <svg width="280" height="180">
                            <rect x="40" y="30" width="200" height="120" fill="#4dabf7" stroke="#1971c2" stroke-width="3"/>
                            <text x="140" y="20" text-anchor="middle" fill="#1971c2" font-size="18" font-weight="bold">10 ×¡"×</text>
                            <text x="250" y="95" fill="#1971c2" font-size="18" font-weight="bold">6 ×¡"×</text>
                        </svg>
                    </div>
                    <div class="formula-box">
                        ×”×™×§×£ ××œ×‘×Ÿ = 2 Ã— (××•×¨×š + ×¨×•×—×‘)
                    </div>
                    <div class="steps">
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>2 Ã— (10 + 6) = 2 Ã— 16 = 32</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×”×™×§×£ = 32 ×¡"×</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: ×¨×™×‘×•×¢</h3>
                    <div class="shape-display">
                        <svg width="180" height="180">
                            <rect x="40" y="40" width="100" height="100" fill="#51cf66" stroke="#2b8a3e" stroke-width="3"/>
                            <text x="90" y="30" text-anchor="middle" fill="#2b8a3e" font-size="18" font-weight="bold">8 ×¡"×</text>
                        </svg>
                    </div>
                    <div class="formula-box">
                        ×”×™×§×£ ×¨×™×‘×•×¢ = 4 Ã— ×¦×œ×¢
                    </div>
                    <div class="steps">
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>4 Ã— 8 = 32</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×”×™×§×£ = 32 ×¡"×</p>
                    </div>
                </div>
                
                <h2 style="color: #ff6b6b; margin-top: 30px;">×©×˜×— - ××“×™×“×ª ×©×˜×— ×”×¤× ×™×</h2>
                <p>×©×˜×— ×”×•× ×›××•×ª ×”××§×•× ×©×”×¦×•×¨×” ×ª×•×¤×¡×ª (× ××“×“ ×‘×™×—×™×“×•×ª ×¨×™×‘×•×¢×™×•×ª).</p>
                
                <div class="example">
                    <h3>×©×˜×— ××œ×‘×Ÿ</h3>
                    <div class="formula-box">
                        ×©×˜×— ××œ×‘×Ÿ = ××•×¨×š Ã— ×¨×•×—×‘
                    </div>
                    <div class="steps">
                        <p>×“×•×’××”: ××œ×‘×Ÿ ×‘××•×¨×š 12 ×¡"× ×•×¨×•×—×‘ 5 ×¡"×</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>12 Ã— 5 = 60</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×©×˜×— = 60 ×¡"×Â²</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×©×˜×— ×¨×™×‘×•×¢</h3>
                    <div class="formula-box">
                        ×©×˜×— ×¨×™×‘×•×¢ = ×¦×œ×¢ Ã— ×¦×œ×¢ = ×¦×œ×¢Â²
                    </div>
                    <div class="steps">
                        <p>×“×•×’××”: ×¨×™×‘×•×¢ ×©×¦×œ×¢×• 9 ×¡"×</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>9 Ã— 9 = 81</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×©×˜×— = 81 ×¡"×Â²</p>
                    </div>
                </div>
                
                <h2 style="color: #ff6b6b; margin-top: 30px;">× ×¤×— - ×”×™×›×¨×•×ª ×¨××©×•× ×™×ª</h2>
                <div class="example">
                    <p>× ×¤×— ××•×“×“ ×›××” ××§×•× ×ª×•×¤×¡ ×’×•×£ ×ª×œ×ª-××™××“×™ (× ××“×“ ×‘×™×—×™×“×•×ª ××¢×•×§×‘×•×ª).</p>
                    <div class="formula-box">
                        × ×¤×— ×§×•×¤×¡×” = ××•×¨×š Ã— ×¨×•×—×‘ Ã— ×’×•×‘×”
                    </div>
                    <div class="steps">
                        <p>×“×•×’××”: ×§×•×¤×¡×” ×‘××•×¨×š 5 ×¡"×, ×¨×•×—×‘ 4 ×¡"×, ×’×•×‘×” 3 ×¡"×</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>5 Ã— 4 Ã— 3 = 60</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> × ×¤×— = 60 ×¡"×Â³</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game3" class="content">
            <div class="game">
                <h2>××©×—×§ ×—×™×©×•×‘ ×”×™×§×£ ×•×©×˜×—</h2>
                <div class="question-counter">×©××œ×” <span id="q-count3">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="score3">0</span></div>
                <div class="problem-display" id="problem3">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer3" placeholder="×”×›× ×¡ ×ª×©×•×‘×”">
                    <br><br>
                    <button onclick="checkAns(3);">×‘×“×•×§</button>
                </div>
                <div id="feedback3"></div>
                <div id="round-end3" style="display: none;"></div>
            </div>
        </div>
    </div>

<script>
var scores = {1: 0, 2: 0, 3: 0};
var currentQuestion = {1: 0, 2: 0, 3: 0};
var questionBank = {1: [], 2: [], 3: []};
var gameData = {1: {}, 2: {}, 3: {}};
var answerLocked = {1: false, 2: false, 3: false};

function generateQ1() {
    var type = Math.floor(Math.random() * 6);
    
    if (type === 0) {
        var sides = ['×›×œ ×©×œ×•×© ×”×¦×œ×¢×•×ª ×©×•×•×ª', '×©×ª×™ ×¦×œ×¢×•×ª ×©×•×•×ª', '×›×œ ×”×¦×œ×¢×•×ª ×©×•× ×•×ª'];
        var answers = ['××©×•×œ×© ×©×•×•×” ×¦×œ×¢×•×ª', '××©×•×œ×© ×©×•×•×” ×©×•×§×™×™×', '××©×•×œ×© ×©×•× ×” ×¦×œ×¢×•×ª'];
        var idx = Math.floor(Math.random() * 3);
        return {
            text: '××©×•×œ×© ×©×‘×• ' + sides[idx] + ' × ×§×¨×:',
            type: 'options',
            options: ['××©×•×œ×© ×©×•×•×” ×¦×œ×¢×•×ª', '××©×•×œ×© ×©×•×•×” ×©×•×§×™×™×', '××©×•×œ×© ×©×•× ×” ×¦×œ×¢×•×ª'],
            answer: answers[idx]
        };
    } else if (type === 1) {
        var r = Math.floor(Math.random() * 8) + 3;
        return {
            text: '×¨×“×™×•×¡ ×©×œ ××¢×’×œ ×”×•× ' + r + ' ×¡"×. ××”×• ×”×§×•×˜×¨?',
            answer: r * 2
        };
    } else if (type === 2) {
        var d = Math.floor(Math.random() * 12) + 8;
        if (d % 2 === 1) d++;
        return {
            text: '×§×•×˜×¨ ×©×œ ××¢×’×œ ×”×•× ' + d + ' ×¡"×. ××”×• ×”×¨×“×™×•×¡?',
            answer: d / 2
        };
    } else if (type === 3) {
        var parts = ['×¨×“×™×•×¡', '×§×•×˜×¨', '××™×ª×¨'];
        var defs = [
            '×§×˜×¢ ×”××—×‘×¨ ××ª ×”××¨×›×– ×œ× ×§×•×“×” ×¢×œ ×”××¢×’×œ',
            '×§×˜×¢ ×”×¢×•×‘×¨ ×‘××¨×›×– ×•××—×‘×¨ ×©×ª×™ × ×§×•×“×•×ª ×¢×œ ×”××¢×’×œ',
            '×§×˜×¢ ×”××—×‘×¨ ×©×ª×™ × ×§×•×“×•×ª ×¢×œ ×”××¢×’×œ'
        ];
        var idx = Math.floor(Math.random() * 3);
        return {
            text: defs[idx] + ' - ××™×š ×§×•×¨××™× ×œ×§×˜×¢ ×–×”?',
            type: 'options',
            options: ['×¨×“×™×•×¡', '×§×•×˜×¨', '××™×ª×¨'],
            answer: parts[idx]
        };
    } else if (type === 4) {
        var angles = ['×—×“', '×™×©×¨', '×§×”×”'];
        var ranges = ['×›×œ ×”×–×•×•×™×•×ª ×§×˜× ×•×ª ×-90Â°', '×™×© ×–×•×•×™×ª ××—×ª ×©×œ 90Â°', '×™×© ×–×•×•×™×ª ××—×ª ×’×“×•×œ×” ×-90Â°'];
        var idx = Math.floor(Math.random() * 3);
        return {
            text: '××©×•×œ×© ×©×‘×• ' + ranges[idx] + ' ×”×•× ××©×•×œ×©:',
            type: 'options',
            options: ['×—×“ ×–×•×•×™×ª', '×™×©×¨ ×–×•×•×™×ª', '×§×”×” ×–×•×•×™×ª'],
            answer: angles[idx] + ' ×–×•×•×™×ª'
        };
    } else {
        return {
            text: '×”×§×˜×¢ ×”××¨×•×š ×‘×™×•×ª×¨ ×‘××¢×’×œ ×”×•×:',
            type: 'options',
            options: ['×¨×“×™×•×¡', '×§×•×˜×¨', '××™×ª×¨'],
            answer: '×§×•×˜×¨'
        };
    }
}

function generateQ2() {
    var type = Math.floor(Math.random() * 4);
    
    if (type === 0) {
        var angle = Math.floor(Math.random() * 60) + 20;
        return {
            text: '××¦× ××ª ×”×–×•×•×™×ª ×”××©×œ×™××” ×œ-' + angle + 'Â°\n(×–×•×•×™×•×ª ××©×œ×™××•×ª ×¡×›×•××Ÿ 90Â°)',
            answer: 90 - angle
        };
    } else if (type === 1) {
        var angle = Math.floor(Math.random() * 120) + 30;
        return {
            text: '××¦× ××ª ×”×–×•×•×™×ª ×”××©×•×›×œ×œ×ª ×œ-' + angle + 'Â°\n(×–×•×•×™×•×ª ××©×•×›×œ×œ×•×ª ×¡×›×•××Ÿ 180Â°)',
            answer: 180 - angle
        };
    } else if (type === 2) {
        var angle1 = Math.floor(Math.random() * 50) + 20;
        return {
            text: '×–×•×•×™×ª ××—×ª ×”×™× ' + angle1 + 'Â°. ×”×–×•×•×™×ª ×”×¦××•×“×” ×œ×” ×”×™× ' + (90 - angle1) + 'Â°.\n×›××” ××¢×œ×•×ª ×™×© ×‘×™×—×“ ×‘×©×ª×™ ×”×–×•×•×™×•×ª?',
            answer: 90
        };
    } else {
        var rand = Math.floor(Math.random() * 3);
        var angle;
        var ans;
        
        if (rand === 0) {
            angle = Math.floor(Math.random() * 60) + 20;
            ans = '×—×“×”';
        } else if (rand === 1) {
            angle = 90;
            ans = '×™×©×¨×”';
        } else {
            angle = Math.floor(Math.random() * 70) + 100;
            ans = '×§×”×”';
        }
        
        return {
            text: '×–×•×•×™×ª ×©×œ ' + angle + 'Â° ×”×™× ×–×•×•×™×ª:',
            type: 'options',
            options: ['×—×“×”', '×™×©×¨×”', '×§×”×”'],
            answer: ans
        };
    }
}

function generateQ3() {
    var type = Math.floor(Math.random() * 8);
    
    if (type === 0) {
        var length = Math.floor(Math.random() * 12) + 5;
        var width = Math.floor(Math.random() * 10) + 3;
        return {
            text: '××œ×‘×Ÿ ×‘××•×¨×š ' + length + ' ×¡"× ×•×¨×•×—×‘ ' + width + ' ×¡"×.\n××”×• ×”×”×™×§×£?',
            answer: 2 * (length + width)
        };
    } else if (type === 1) {
        var side = Math.floor(Math.random() * 12) + 4;
        return {
            text: '×¨×™×‘×•×¢ ×©×¦×œ×¢×• ' + side + ' ×¡"×.\n××”×• ×”×”×™×§×£?',
            answer: 4 * side
        };
    } else if (type === 2) {
        var length = Math.floor(Math.random() * 15) + 5;
        var width = Math.floor(Math.random() * 12) + 3;
        return {
            text: '××œ×‘×Ÿ ×‘××•×¨×š ' + length + ' ×¡"× ×•×¨×•×—×‘ ' + width + ' ×¡"×.\n××”×• ×”×©×˜×—?',
            answer: length * width
        };
    } else if (type === 3) {
        var side = Math.floor(Math.random() * 12) + 4;
        return {
            text: '×¨×™×‘×•×¢ ×©×¦×œ×¢×• ' + side + ' ×¡"×.\n××”×• ×”×©×˜×—?',
            answer: side * side
        };
    } else if (type === 4) {
        var l = Math.floor(Math.random() * 8) + 3;
        var w = Math.floor(Math.random() * 6) + 2;
        var h = Math.floor(Math.random() * 7) + 2;
        return {
            text: '×§×•×¤×¡×” ×‘××•×¨×š ' + l + ' ×¡"×, ×¨×•×—×‘ ' + w + ' ×¡"×, ×’×•×‘×” ' + h + ' ×¡"×.\n××”×• ×”× ×¤×—?',
            answer: l * w * h
        };
    } else if (type === 5) {
        var side = Math.floor(Math.random() * 10) + 4;
        return {
            text: '××©×•×œ×© ×©×•×•×” ×¦×œ×¢×•×ª ×©×›×œ ×¦×œ×¢ ×©×œ×• ' + side + ' ×¡"×.\n××”×• ×”×”×™×§×£?',
            answer: side * 3
        };
    } else if (type === 6) {
        var side1 = Math.floor(Math.random() * 8) + 5;
        var base = Math.floor(Math.random() * 10) + 4;
        return {
            text: '××©×•×œ×© ×©×•×•×” ×©×•×§×™×™× ×¢× ×©×•×§×™×™× ×‘××•×¨×š ' + side1 + ' ×¡"× ×•×‘×¡×™×¡ ' + base + ' ×¡"×.\n××”×• ×”×”×™×§×£?',
            answer: side1 * 2 + base
        };
    } else {
        var a = Math.floor(Math.random() * 8) + 4;
        var b = Math.floor(Math.random() * 10) + 5;
        var c = Math.floor(Math.random() * 9) + 6;
        return {
            text: '××©×•×œ×© ×©×•× ×” ×¦×œ×¢×•×ª ×¢× ×¦×œ×¢×•×ª: ' + a + ' ×¡"×, ' + b + ' ×¡"×, ' + c + ' ×¡"×.\n××”×• ×”×”×™×§×£?',
            answer: a + b + c
        };
    }
}

function initGame(g) {
    var allQuestions = [];
    var attempts = 0;
    var maxAttempts = 200;
    
    while (allQuestions.length < 20 && attempts < maxAttempts) {
        var newQ;
        if (g === 1) newQ = generateQ1();
        else if (g === 2) newQ = generateQ2();
        else newQ = generateQ3();
        
        var isDuplicate = false;
        for (var i = 0; i < allQuestions.length; i++) {
            if (JSON.stringify(allQuestions[i]) === JSON.stringify(newQ)) {
                isDuplicate = true;
                break;
            }
        }
        
        if (!isDuplicate) {
            allQuestions.push(newQ);
        }
        attempts++;
    }
    
    allQuestions.sort(function() { return Math.random() - 0.5; });
    
    questionBank[g] = allQuestions.slice(0, 12);
    
    nextQ(g);
}

function nextQ(g) {
    if (currentQuestion[g] >= 12) { 
        showEnd(g); 
        return; 
    }
    
    answerLocked[g] = false;
    
    gameData[g] = questionBank[g][currentQuestion[g]];
    if (!gameData[g]) return;
    
    document.getElementById('q-count' + g).textContent = currentQuestion[g] + 1;
    document.getElementById('problem' + g).innerHTML = gameData[g].text.replace(/\n/g, '<br>');
    
    if (g === 1 && gameData[g].type === 'options') {
        var html = '<div class="options">';
        for (var i = 0; i < gameData[g].options.length; i++) {
            html += '<button class="option-btn" onclick="checkOption(1, \'' + gameData[g].options[i] + '\')">' + gameData[g].options[i] + '</button>';
        }
        html += '</div>';
        document.getElementById('controls1').innerHTML = html;
    } else if (g === 1) {
        var html = '<input type="number" id="answer1" placeholder="×”×›× ×¡ ×ª×©×•×‘×”"><br><br><button onclick="checkAns(1)">×‘×“×•×§</button>';
        document.getElementById('controls1').innerHTML = html;
    } else if (g === 2 && gameData[g].type === 'options') {
        var html = '<div class="options">';
        for (var i = 0; i < gameData[g].options.length; i++) {
            html += '<button class="option-btn" onclick="checkOption(2, \'' + gameData[g].options[i] + '\')">' + gameData[g].options[i] + '</button>';
        }
        html += '</div>';
        document.getElementById('controls2').innerHTML = html;
    } else if (g === 2) {
        document.getElementById('controls2').innerHTML = '<input type="number" id="answer2" placeholder="×”×›× ×¡ ×ª×©×•×‘×”"><br><br><button onclick="checkAns(2)">×‘×“×•×§</button>';
    } else if (g === 3) {
        var answerEl = document.getElementById('answer3');
        if (answerEl) answerEl.value = '';
    }
    
    document.getElementById('feedback' + g).innerHTML = '';
}

function checkOption(g, selected) {
    if (answerLocked[g]) return;
    answerLocked[g] = true;
    
    currentQuestion[g]++;
    if (selected === gameData[g].answer) {
        scores[g]++;
        playSound('correct');
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback correct">× ×›×•×Ÿ ××¢×•×œ×”! âœ”</div>';
    } else {
        playSound('incorrect');
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback incorrect">×œ× × ×›×•×Ÿ. ×ª×©×•×‘×” × ×›×•× ×”: ' + gameData[g].answer + '</div>';
    }
    document.getElementById('score' + g).textContent = scores[g];
    
    setTimeout(function() {
        document.getElementById('feedback' + g).scrollIntoView({ behavior: 'smooth', block: 'center' });
    }, 100);
    
    setTimeout(function() { nextQ(g); }, 2500);
}

function checkAns(g) {
    if (answerLocked[g]) return;
    
    var answerEl = document.getElementById('answer' + g);
    if (!answerEl) return;
    
    var ans = parseInt(answerEl.value);
    if (isNaN(ans)) return;
    
    answerLocked[g] = true;
    
    currentQuestion[g]++;
    if (ans === gameData[g].answer) {
        scores[g]++;
        playSound('correct');
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback correct">× ×›×•×Ÿ ××¢×•×œ×”! âœ”</div>';
    } else {
        playSound('incorrect');
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback incorrect">×œ× × ×›×•×Ÿ. ×ª×©×•×‘×” × ×›×•× ×”: ' + gameData[g].answer + '</div>';
    }
    document.getElementById('score' + g).textContent = scores[g];
    
    setTimeout(function() {
        document.getElementById('feedback' + g).scrollIntoView({ behavior: 'smooth', block: 'center' });
    }, 100);
    
    setTimeout(function() { nextQ(g); }, 2000);
}

function showEnd(g) {
    var pct = Math.round((scores[g] / 12) * 100);
    var msg = pct >= 80 ? '××¢×•×œ×”! ğŸŒŸ' : pct >= 60 ? '×™×¤×” ×××•×“! ğŸ‘' : '×›×œ ×”×›×‘×•×“! ×”××©×š ×œ×”×ª×××Ÿ! ğŸ’ª';
    var html = '<div class="round-complete"><h3>×¡×™×™××ª!</h3><p>' + msg + '</p><p>×¦×™×•×Ÿ: ' + scores[g] + '/12 (' + pct + '%)</p><button class="new-round-btn" onclick="resetGame(' + g + ')">×¡×™×‘×•×‘ × ×•×¡×£</button></div>';
    document.getElementById('round-end' + g).innerHTML = html;
    document.getElementById('round-end' + g).style.display = 'block';
    document.getElementById('problem' + g).style.display = 'none';
    
    if (g === 1) {
        document.getElementById('controls1').style.display = 'none';
    } else if (g === 2) {
        document.getElementById('controls2').style.display = 'none';
    }
}

function resetGame(g) {
    scores[g] = 0;
    currentQuestion[g] = 0;
    answerLocked[g] = false;
    document.getElementById('score' + g).textContent = '0';
    document.getElementById('round-end' + g).style.display = 'none';
    document.getElementById('feedback' + g).innerHTML = '';
    document.getElementById('problem' + g).style.display = 'block';
    
    if (g === 1) {
        document.getElementById('controls1').style.display = 'block';
    } else if (g === 2) {
        document.getElementById('controls2').style.display = 'block';
    }
    
    initGame(g);
}

window.onload = function() {
    var tabs = document.querySelectorAll('.tab');
    for (var i = 0; i < tabs.length; i++) {
        tabs[i].onclick = function() {
            playSound('click');
            var tabId = this.getAttribute('data-tab');
            var allContent = document.querySelectorAll('.content');
            var allTabs = document.querySelectorAll('.tab');
            
            for (var j = 0; j < allContent.length; j++) {
                allContent[j].classList.remove('active');
            }
            for (var k = 0; k < allTabs.length; k++) {
                allTabs[k].classList.remove('active');
            }
            
            document.getElementById(tabId).classList.add('active');
            this.classList.add('active');
        };
    }
    
    document.addEventListener('wheel', function(e) {
        if (document.activeElement.type === 'number') {
            document.activeElement.blur();
        }
    });
    
    initGame(1);
    initGame(2);
    initGame(3);
};

function playSound(type) {
    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    if (type === 'click') {
        var osc = audioContext.createOscillator();
        var gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.type = 'sine';
        osc.frequency.value = 600;
        gain.gain.setValueAtTime(0.15, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + 0.15);
    } else if (type === 'correct') {
        var notes = [523.25, 659.25, 783.99];
        for (var i = 0; i < notes.length; i++) {
            var osc = audioContext.createOscillator();
            var gain = audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);
            osc.type = 'sine';
            osc.frequency.value = notes[i];
            gain.gain.setValueAtTime(0.1, audioContext.currentTime + i * 0.1);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.1 + 0.3);
            osc.start(audioContext.currentTime + i * 0.1);
            osc.stop(audioContext.currentTime + i * 0.1 + 0.3);
        }
    } else if (type === 'incorrect') {
        var osc = audioContext.createOscillator();
        var gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.type = 'sine';
        osc.frequency.value = 200;
        gain.gain.setValueAtTime(0.15, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + 0.3);
    }
}
</script>
</body>
</html>
