<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â­ ×œ×•×— ×”×›×•×›×‘×™× - ×›×™×ª×” ×' â­</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .stats {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            color: white;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-input {
            font-size: 2em;
            font-weight: bold;
            width: 80px;
            text-align: center;
            border: 2px solid white;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            padding: 5px;
        }

        .stat-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.5);
        }

        .stat-label {
            font-size: 0.9em;
            margin-top: 5px;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #667eea;
            border-radius: 10px;
            text-align: right;
        }

        .students-list {
            display: grid;
            gap: 15px;
        }

        .student-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .student-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.2);
        }

        .student-name-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .student-name {
            font-size: 1.6em;
            font-weight: bold;
            color: #333;
        }

        .name-input {
            font-size: 1.3em;
            font-weight: bold;
            padding: 5px 10px;
            border: 2px solid #667eea;
            border-radius: 8px;
            text-align: right;
            background: white;
            min-width: 150px;
        }

        .delete-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
            margin-right: 10px;
        }

        .delete-btn:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }

        .add-student-container {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            text-align: center;
        }

        .add-student-input {
            padding: 10px 15px;
            font-size: 1.1em;
            border: 2px solid #667eea;
            border-radius: 8px;
            text-align: right;
            margin-left: 10px;
            min-width: 200px;
        }

        .add-student-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.2s;
        }

        .add-student-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .edit-mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .edit-mode-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .backup-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            margin: 0 5px;
        }

        .restore-btn {
            background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            margin: 0 5px;
        }

        .backup-btn:hover, .restore-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .student-stars {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stars-display {
            font-size: 2.5em;
            min-width: 100px;
            text-align: center;
            position: relative;
        }

        .stars-display:hover .star-emoji {
            animation: starBounce 0.6s ease-in-out infinite, starShine 1.5s ease-in-out infinite;
        }

        .star-emoji {
            display: inline-block;
            transition: transform 0.2s ease;
        }

        @keyframes starBounce {
            0%, 100% {
                transform: translateY(0) scale(1);
            }
            25% {
                transform: translateY(-8px) scale(1.15) rotate(-5deg);
            }
            75% {
                transform: translateY(-4px) scale(1.1) rotate(5deg);
            }
        }

        @keyframes starShine {
            0%, 100% {
                filter: brightness(1) drop-shadow(0 0 0px gold);
            }
            50% {
                filter: brightness(1.4) drop-shadow(0 0 8px gold);
            }
        }

        .star-count {
            background: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #667eea;
            margin-left: 10px;
        }

        .btn {
            background: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .btn-add {
            color: #4CAF50;
        }

        .btn-remove {
            color: #f44336;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .save-indicator {
            text-align: center;
            margin-top: 20px;
            color: #4CAF50;
            font-size: 0.9em;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .save-indicator.show {
            opacity: 1;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .student-card {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>â­ ×œ×•×— ×”×›×•×›×‘×™× â­</h1>
        <div class="subtitle">×›×™×ª×” ×'2 - ××“×¨×™×›×” ×©×™×œ×ª</div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalStudents">29</div>
                <input type="number" class="stat-input" id="totalStudentsInput" style="display: none;" min="1" max="100">
                <div class="stat-label">×ª×œ××™×“×™× ×‘×›×™×ª×”</div>
            </div>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ğŸ” ×—×™×¤×•×© ×ª×œ××™×“...">
        </div>

        <div style="text-align: center; margin-bottom: 20px;">
            <button class="edit-mode-btn" id="editModeBtn" onclick="toggleEditMode()">âœï¸ ××¦×‘ ×¢×¨×™×›×”</button>
            <button class="backup-btn" onclick="exportData()">ğŸ’¾ ×©××•×¨ ×’×™×‘×•×™</button>
            <button class="restore-btn" onclick="document.getElementById('importFile').click()">ğŸ“‚ ×©×—×–×¨ ××’×™×‘×•×™</button>
            <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
        </div>

        <div class="students-list" id="studentsList"></div>

        <div class="add-student-container" id="addStudentContainer" style="display: none;">
            <input type="text" class="add-student-input" id="newStudentName" placeholder="×©× ×”×ª×œ××™×“ ×”×—×“×©" onkeypress="if(event.key==='Enter') addNewStudent()">
            <button class="add-student-btn" onclick="addNewStudent()">â• ×”×•×¡×£ ×ª×œ××™×“</button>
        </div>

        <div class="save-indicator" id="saveIndicator">âœ“ ×”×©×™× ×•×™×™× × ×©××¨×•</div>
    </div>

    <script>
        // × ×ª×•× ×™ ×ª×œ××™×“×™× ×”×ª×—×œ×ª×™×™×
        let students = [
            { name: "×‘×¨×§", stars: 3 },
            { name: "× ×¢×", stars: 3 },
            { name: "×“× ×™××œ ××“×¨", stars: 2 },
            { name: "×’××™×”", stars: 2 },
            { name: "×’×™×œ×™", stars: 2 },
            { name: "×××™×œ×™", stars: 0 },
            { name: "×“× ×™××œ ×”×‘×ª", stars: 3 },
            { name: "×™×•××‘", stars: 1 },
            { name: "×“× ×™××œ ×‘×•× ×Ÿ", stars: 2 },
            { name: "×¨×•× ×™", stars: 3 },
            { name: "×¨×•××™", stars: 4 },
            { name: "×©×§×“", stars: 3 },
            { name: "××•×Ÿ", stars: 3 },
            { name: "×œ×™×” ×¨×•×•×”", stars: 2 },
            { name: "×©×—×¨", stars: 2 },
            { name: "××•×¨", stars: 4 },
            { name: "××œ×”", stars: 2 },
            { name: "×œ×™×” ×’×•×—××Ÿ", stars: 2 },
            { name: "××™×”", stars: 4 },
            { name: "××“×¨", stars: 1 },
            { name: "×“× ×™××œ ×•×™×™×¡×‘×Ÿ", stars: 2 },
            { name: "×“×™×Ÿ", stars: 3 },
            { name: "×™×¢×œ", stars: 0 },
            { name: "×¢×•×¤×¨×™", stars: 1 },
            { name: "×ª×•×", stars: 4 },
            { name: "××œ×•×Ÿ", stars: 3 },
            { name: "×™× ××™", stars: 4 },
            { name: "××œ×™×” ×”×œ×¤×¨×™×Ÿ", stars: 3 },
            { name: "×“× ×™", stars: 4 }
        ];

        let isEditMode = false;
        let displayCount = 29; // ××¡×¤×¨ ×”×ª×œ××™×“×™× ×”××•×¦×’ (× ×™×ª×Ÿ ×œ×¢×¨×™×›×”)

        // ×˜×¢×™× ×ª × ×ª×•× ×™× ×©××•×¨×™×
        function loadData() {
            const saved = localStorage.getItem('studentsStars');
            if (saved) {
                students = JSON.parse(saved);
            }
            
            const savedCount = localStorage.getItem('displayCount');
            if (savedCount) {
                displayCount = parseInt(savedCount);
            }
        }

        // ×©××™×¨×ª × ×ª×•× ×™×
        function saveData() {
            localStorage.setItem('studentsStars', JSON.stringify(students));
            showSaveIndicator();
        }

        // ×”×¦×’×ª ××™× ×“×™×§×˜×•×¨ ×©××™×¨×”
        function showSaveIndicator() {
            const indicator = document.getElementById('saveIndicator');
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }

        // ×¢×“×›×•×Ÿ ×¡×˜×˜×™×¡×˜×™×§×•×ª
        function updateStats() {
            document.getElementById('totalStudents').textContent = displayCount;
            document.getElementById('totalStudentsInput').value = displayCount;
        }

        // ×”×•×¡×¤×ª ×›×•×›×‘
        function addStar(index) {
            students[index].stars++;
            saveData();
            renderStudents();
        }

        // ×”×•×¨×“×ª ×›×•×›×‘
        function removeStar(index) {
            if (students[index].stars > 0) {
                students[index].stars--;
                saveData();
                renderStudents();
            }
        }

        // ×¢×¨×™×›×ª ×©× ×ª×œ××™×“
        function toggleEditMode() {
            isEditMode = !isEditMode;
            const btn = document.getElementById('editModeBtn');
            const addContainer = document.getElementById('addStudentContainer');
            const totalDisplay = document.getElementById('totalStudents');
            const totalInput = document.getElementById('totalStudentsInput');
            
            if (isEditMode) {
                btn.textContent = 'âœ“ ×¡×™×•× ×¢×¨×™×›×”';
                btn.classList.add('active');
                addContainer.style.display = 'block';
                totalDisplay.style.display = 'none';
                totalInput.style.display = 'block';
            } else {
                btn.textContent = 'âœï¸ ××¦×‘ ×¢×¨×™×›×”';
                btn.classList.remove('active');
                addContainer.style.display = 'none';
                totalDisplay.style.display = 'block';
                totalInput.style.display = 'none';
                
                // ×©××™×¨×ª ××¡×¤×¨ ×”×ª×œ××™×“×™× ×”××¢×•×“×›×Ÿ
                const newCount = parseInt(totalInput.value);
                if (newCount > 0) {
                    displayCount = newCount;
                    localStorage.setItem('displayCount', displayCount);
                    showSaveIndicator();
                }
            }
            
            renderStudents();
        }

        function saveName(index) {
            const input = document.getElementById('nameInput' + index);
            const newName = input.value.trim();
            
            if (newName !== '') {
                students[index].name = newName;
                saveData();
            }
        }

        // ×”×•×¡×¤×ª ×ª×œ××™×“ ×—×“×©
        function addNewStudent() {
            const input = document.getElementById('newStudentName');
            const name = input.value.trim();
            
            if (name !== '') {
                students.push({ name: name, stars: 0 });
                saveData();
                renderStudents();
                input.value = '';
            } else {
                alert('×× × ×”×›× ×¡ ×©× ×ª×œ××™×“');
            }
        }

        // ××—×™×§×ª ×ª×œ××™×“
        function deleteStudent(index) {
            if (confirm(`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ${students[index].name}?`)) {
                students.splice(index, 1);
                saveData();
                renderStudents();
            }
        }

        // ×™×™×¦×•× × ×ª×•× ×™× ×œ×’×™×‘×•×™
        function exportData() {
            const data = {
                students: students,
                displayCount: displayCount,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            const today = new Date().toISOString().split('T')[0];
            link.download = `×’×™×‘×•×™_×›×•×›×‘×™×_${today}.json`;
            link.click();
            
            alert('âœ“ ×§×•×‘×¥ ×”×’×™×‘×•×™ × ×©××¨ ×‘×”×•×¨×“×•×ª!\n\n×©××•×¨ ××•×ª×• ×‘××§×•× ×‘×˜×•×— (×“×¨×™×™×‘/××™×™×œ)');
        }

        // ×™×™×‘×•× × ×ª×•× ×™× ××’×™×‘×•×™
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.students && Array.isArray(data.students)) {
                        students = data.students;
                        if (data.displayCount) {
                            displayCount = data.displayCount;
                        }
                        saveData();
                        renderStudents();
                        alert('âœ“ ×”×’×™×‘×•×™ ×©×•×—×–×¨ ×‘×”×¦×œ×—×”!');
                    } else {
                        alert('âŒ ×§×•×‘×¥ ×œ× ×ª×§×™×Ÿ');
                    }
                } catch (error) {
                    alert('âŒ ×©×’×™××” ×‘×§×¨×™××ª ×”×§×•×‘×¥');
                }
            };
            reader.readAsText(file);
            
            // ××™×¤×•×¡ ×”-input ×›×“×™ ×©××¤×©×¨ ×œ×™×™×‘× ×©×•×‘ ××ª ××•×ª×• ×§×•×‘×¥
            event.target.value = '';
        }

        // ×—×™×¤×•×© ×ª×œ××™×“
        document.getElementById('searchInput').addEventListener('input', function(e) {
            renderStudents(e.target.value);
        });

        // ×”×¦×’×ª ×ª×œ××™×“×™×
        function renderStudents(searchTerm = '') {
            const list = document.getElementById('studentsList');
            list.innerHTML = '';

            let displayStudents = [...students];

            // ×¡×™× ×•×Ÿ ×œ×¤×™ ×—×™×¤×•×©
            if (searchTerm) {
                displayStudents = displayStudents.filter(student => 
                    student.name.includes(searchTerm)
                );
            }

            displayStudents.forEach((student) => {
                const originalIndex = students.findIndex(s => s.name === student.name && s.stars === student.stars);
                const card = document.createElement('div');
                card.className = 'student-card';
                
                // ×™×¦×™×¨×ª ×›×•×›×‘×™× ×¢× class × ×¤×¨×“ ×œ×›×œ ××—×“
                let starsHTML = '';
                for (let i = 0; i < student.stars; i++) {
                    starsHTML += '<span class="star-emoji">â­</span>';
                }
                
                let nameHTML;
                if (isEditMode) {
                    nameHTML = `
                        <div class="student-name-container">
                            <button class="delete-btn" onclick="deleteStudent(${originalIndex})">ğŸ—‘ï¸</button>
                            <input type="text" class="name-input" id="nameInput${originalIndex}" 
                                   value="${student.name}" 
                                   onblur="saveName(${originalIndex})"
                                   onkeypress="if(event.key==='Enter') this.blur()">
                        </div>
                    `;
                } else {
                    nameHTML = `
                        <div class="student-name-container">
                            <span class="student-name">${student.name}</span>
                        </div>
                    `;
                }
                
                card.innerHTML = `
                    ${nameHTML}
                    <div class="student-stars">
                        <button class="btn btn-remove" onclick="removeStar(${originalIndex})">âˆ’</button>
                        <div class="stars-display">
                            ${starsHTML}
                            <span class="star-count">${student.stars}</span>
                        </div>
                        <button class="btn btn-add" onclick="addStar(${originalIndex})">+</button>
                    </div>
                `;
                
                list.appendChild(card);
            });

            updateStats();
        }

        // ×˜×¢×™× ×” ×”×ª×—×œ×ª×™×ª
        loadData();
        renderStudents();
    </script>
</body>
</html>
