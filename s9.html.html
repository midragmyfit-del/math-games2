<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×œ××“ ×œ×¦×™×™×¨ ×¦×•×¨×•×ª ×—××•×“×•×ª</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .title {
            text-align: center;
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .main-container {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            flex-wrap: wrap;
            justify-content: center;
        }
        .canvas-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            flex: 1;
            min-width: 300px;
        }
        .canvas-title {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
        }
        canvas {
            border: 3px solid #667eea;
            border-radius: 15px;
            cursor: none;
            display: block;
            margin: 0 auto;
            background: white;
        }
        #cursor {
            position: fixed;
            border: 3px solid #fff;
            box-shadow: 0 0 0 2px #000, inset 0 0 0 2px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            display: none;
            transform: translate(-50%, -50%);
        }
        #cursor::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 1px;
            height: 10px;
            background: #000;
            box-shadow: 1px 0 0 #fff, -1px 0 0 #fff;
        }
        #cursor::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 1px;
            background: #000;
            box-shadow: 0 1px 0 #fff, 0 -1px 0 #fff;
        }
        .controls {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 300px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .control-section { text-align: center; }
        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        .instruction-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .step-counter {
            font-size: 1.1em;
            color: #666;
            margin-top: 10px;
        }
        .button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.5);
        }
        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }
        .nav-buttons { display: flex; gap: 10px; }
        .color-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            justify-items: center;
        }
        .color-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 3px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }
        .color-btn:hover { transform: scale(1.2); }
        .color-btn.selected {
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
            transform: scale(1.2);
        }
        .tool-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 10px;
        }
        .tool-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-size: 1.5em;
            transition: all 0.3s;
        }
        .tool-btn:hover { transform: scale(1.1); }
        .tool-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }
        .drawing-menu {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            max-width: 600px;
            width: 90%;
        }
        .drawing-menu.hidden { display: none; }
        .menu-title {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
        }
        .drawing-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .drawing-option {
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        .drawing-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: #667eea;
        }
        .drawing-icon { font-size: 3em; margin-bottom: 10px; }
        .drawing-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }
        .difficulty-stars {
            color: #FFD700;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .overlay.hidden { display: none; }
        .size-slider { width: 100%; margin: 10px 0; }
    </style>
</head>
<body>
    <div id="cursor"></div>
    <div class="overlay hidden" id="overlay"></div>
    
    <div class="drawing-menu" id="drawingMenu">
        <div class="menu-title">ğŸ¨ ×‘×—×¨ ×¦×™×•×¨ ×—××•×“ ×œ×¦×™×™×¨</div>
        <div class="drawing-options">
            <div class="drawing-option" onclick="selectDrawing('peacock')">
                <div class="drawing-icon">ğŸ¦š</div>
                <div class="drawing-name">×˜×•×•×¡ ××¨×”×™×‘</div>
                <div class="difficulty-stars">â˜…â˜…â˜…â˜…â˜†</div>
            </div>
            <div class="drawing-option" onclick="selectDrawing('frog')">
                <div class="drawing-icon">ğŸ¸</div>
                <div class="drawing-name">×¦×¤×¨×“×¢ ×—××•×“×”</div>
                <div class="difficulty-stars">â˜…â˜…â˜†â˜†â˜†</div>
            </div>
            <div class="drawing-option" onclick="selectDrawing('palm')">
                <div class="drawing-icon">ğŸŒ´</div>
                <div class="drawing-name">×“×§×œ ×˜×¨×•×¤×™</div>
                <div class="difficulty-stars">â˜…â˜…â˜…â˜…â˜†</div>
            </div>
            <div class="drawing-option" onclick="selectDrawing('moon')">
                <div class="drawing-icon">ğŸŒ™</div>
                <div class="drawing-name">×™×¨×— ×•×›×•×›×‘×™×</div>
                <div class="difficulty-stars">â˜…â˜…â˜†â˜†â˜†</div>
            </div>
            <div class="drawing-option" onclick="selectDrawing('crab')">
                <div class="drawing-icon">ğŸ¦€</div>
                <div class="drawing-name">×¡×¨×˜×Ÿ ×™×</div>
                <div class="difficulty-stars">â˜…â˜…â˜…â˜†â˜†</div>
            </div>
        </div>
    </div>
    
    <div class="title">ğŸ¨ ×œ××“ ×œ×¦×™×™×¨ ×¦×•×¨×•×ª ×—××•×“×•×ª - ×©×œ×‘ ××—×¨ ×©×œ×‘! âœ¨</div>
    
    <div class="main-container">
        <div class="canvas-container">
            <div class="canvas-title">×”×“×•×’××” - ×¢×§×•×‘ ××—×¨×™ ×”×©×œ×‘×™× ğŸ‘€</div>
            <canvas id="exampleCanvas" width="400" height="400"></canvas>
        </div>
        
        <div class="controls">
            <div class="control-section">
                <div class="instruction-box" id="instruction">×‘×—×¨ ×¦×™×•×¨ ××”×ª×¤×¨×™×˜ ×›×“×™ ×œ×”×ª×—×™×œ!</div>
                <div class="step-counter" id="stepCounter"></div>
            </div>
            
            <div class="control-section">
                <div class="section-title">×›×œ×™× ğŸ› ï¸</div>
                <div class="tool-buttons">
                    <button class="tool-btn active" id="drawBtn" onclick="selectDrawTool()">âœï¸ ×¢×˜</button>
                    <button class="tool-btn" id="eraserBtn" onclick="selectEraser()">ğŸ§¹ ××—×§</button>
                </div>
            </div>
            
            <div class="control-section">
                <div class="section-title">×¦×‘×¢×™× ğŸ¨</div>
                <div class="color-palette" id="colorPalette"></div>
            </div>
            
            <div class="control-section">
                <div class="section-title">×¢×•×‘×™ ××›×—×•×œ</div>
                <input type="range" class="size-slider" id="brushSize" min="2" max="15" value="5">
            </div>
            
            <div class="control-section">
                <div class="nav-buttons">
                    <button class="button" id="prevBtn" onclick="prevStep()" disabled>â¬…ï¸ ×§×•×“×</button>
                    <button class="button" id="nextBtn" onclick="nextStep()" disabled>×”×‘× â¡ï¸</button>
                </div>
            </div>
            
            <button class="button" onclick="clearMyCanvas()">ğŸ—‘ï¸ × ×§×” ××ª ×”×¦×™×•×¨ ×©×œ×™</button>
            <button class="button" onclick="saveDrawing()">ğŸ’¾ ×©××•×¨ ××ª ×”×¦×™×•×¨ ×©×œ×™</button>
            <button class="button" onclick="showMenu()">ğŸ¨ ×‘×—×¨ ×¦×™×•×¨ ××—×¨</button>
        </div>
        
        <div class="canvas-container">
            <div class="canvas-title">×”×¦×™×•×¨ ×©×œ×š - ×¦×™×™×¨ ×›××Ÿ! âœï¸</div>
            <canvas id="myCanvas" width="400" height="400"></canvas>
        </div>
    </div>

    <script>
        var ex = document.getElementById('exampleCanvas');
        var my = document.getElementById('myCanvas');
        var exCtx = ex.getContext('2d');
        var myCtx = my.getContext('2d');
        var cursor = document.getElementById('cursor');
        
        var curr = null;
        var step = 0;
        var draw = false;
        var col = '#000000';
        var size = 5;
        var erase = false;
        
        function updCursor() {
            var s = erase ? size * 4 : size * 2;
            cursor.style.width = s + 'px';
            cursor.style.height = s + 'px';
            if (erase) {
                cursor.style.borderColor = '#fff';
                cursor.style.boxShadow = '0 0 0 2px #ff0000, inset 0 0 0 2px #ff0000';
            } else {
                cursor.style.borderColor = '#fff';
                cursor.style.boxShadow = '0 0 0 2px #000, inset 0 0 0 2px ' + col;
            }
        }
        
        my.addEventListener('mouseenter', function() {
            cursor.style.display = 'block';
            updCursor();
        });
        
        my.addEventListener('mouseleave', function() {
            cursor.style.display = 'none';
        });
        
        my.addEventListener('mousemove', function(e) {
            cursor.style.left = e.pageX + 'px';
            cursor.style.top = e.pageY + 'px';
        });
        
        var cols = [
            '#000000','#FFFFFF','#FF0000','#00FF00','#0000FF',
            '#FFFF00','#FFA500','#800080','#FF00FF','#00FFFF',
            '#FFC0CB','#00BFFF','#87CEEB','#FFD700','#FF69B4',
            '#FF1493','#8B4513','#FFE4B5','#FFDAB9','#8B0000',
            '#DC143C','#006400','#228B22','#90EE90','#FF6347'
        ];
        
        var data = {
            peacock: {
                name: '×˜×•×•×¡ ××¨×”×™×‘',
                steps: [
                    { instruction: '×©×œ×‘ 1: ×©××™×™× ×ª×›×œ×ª ×‘×¨×§×¢', draw: function(c){ 
                        var sky = c.createLinearGradient(0, 0, 0, 400);
                        sky.addColorStop(0, '#E0F6FF');
                        sky.addColorStop(1, '#B3E5FC');
                        c.fillStyle = sky;
                        c.fillRect(0, 0, 400, 400);
                    }},
                    { instruction: '×©×œ×‘ 2: × ×•×¦×ª ×–× ×‘ ×¨××©×•× ×” - ×©×××œ×™×ª', draw: function(c){ 
                        c.save();
                        c.translate(200, 266);
                        c.rotate(-0.6);
                        var grad = c.createRadialGradient(0, -106, 13, 0, -106, 53);
                        grad.addColorStop(0, '#00CED1');
                        grad.addColorStop(0.6, '#1E90FF');
                        grad.addColorStop(1, '#000080');
                        c.fillStyle = grad;
                        c.beginPath();
                        c.ellipse(0, -106, 33, 80, 0, 0, Math.PI * 2);
                        c.fill();
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 3: "×¢×™×Ÿ" ×‘× ×•×¦×” ×©×××œ×™×ª', draw: function(c){ 
                        c.save();
                        c.translate(200, 266);
                        c.rotate(-0.6);
                        c.fillStyle = '#4169E1';
                        c.beginPath();
                        c.arc(0, -106, 20, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#00FFFF';
                        c.beginPath();
                        c.arc(0, -106, 10, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#000080';
                        c.beginPath();
                        c.arc(0, -106, 5, 0, Math.PI * 2);
                        c.fill();
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 4: × ×•×¦×ª ×–× ×‘ ×©× ×™×™×”', draw: function(c){ 
                        c.save();
                        c.translate(200, 266);
                        c.rotate(-0.3);
                        var grad = c.createRadialGradient(0, -106, 13, 0, -106, 53);
                        grad.addColorStop(0, '#00CED1');
                        grad.addColorStop(0.6, '#1E90FF');
                        grad.addColorStop(1, '#000080');
                        c.fillStyle = grad;
                        c.beginPath();
                        c.ellipse(0, -106, 33, 80, 0, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#4169E1';
                        c.beginPath();
                        c.arc(0, -106, 20, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#00FFFF';
                        c.beginPath();
                        c.arc(0, -106, 10, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#000080';
                        c.beginPath();
                        c.arc(0, -106, 5, 0, Math.PI * 2);
                        c.fill();
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 5: × ×•×¦×ª ×–× ×‘ ××¨×›×–×™×ª', draw: function(c){ 
                        c.save();
                        c.translate(200, 266);
                        var grad = c.createRadialGradient(0, -106, 13, 0, -106, 53);
                        grad.addColorStop(0, '#00CED1');
                        grad.addColorStop(0.6, '#1E90FF');
                        grad.addColorStop(1, '#000080');
                        c.fillStyle = grad;
                        c.beginPath();
                        c.ellipse(0, -106, 33, 80, 0, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#4169E1';
                        c.beginPath();
                        c.arc(0, -106, 20, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#00FFFF';
                        c.beginPath();
                        c.arc(0, -106, 10, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#000080';
                        c.beginPath();
                        c.arc(0, -106, 5, 0, Math.PI * 2);
                        c.fill();
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 6: × ×•×¦×ª ×–× ×‘ ×¨×‘×™×¢×™×ª', draw: function(c){ 
                        c.save();
                        c.translate(200, 266);
                        c.rotate(0.3);
                        var grad = c.createRadialGradient(0, -106, 13, 0, -106, 53);
                        grad.addColorStop(0, '#00CED1');
                        grad.addColorStop(0.6, '#1E90FF');
                        grad.addColorStop(1, '#000080');
                        c.fillStyle = grad;
                        c.beginPath();
                        c.ellipse(0, -106, 33, 80, 0, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#4169E1';
                        c.beginPath();
                        c.arc(0, -106, 20, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#00FFFF';
                        c.beginPath();
                        c.arc(0, -106, 10, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#000080';
                        c.beginPath();
                        c.arc(0, -106, 5, 0, Math.PI * 2);
                        c.fill();
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 7: × ×•×¦×ª ×–× ×‘ ×™×× ×™×ª', draw: function(c){ 
                        c.save();
                        c.translate(200, 266);
                        c.rotate(0.6);
                        var grad = c.createRadialGradient(0, -106, 13, 0, -106, 53);
                        grad.addColorStop(0, '#00CED1');
                        grad.addColorStop(0.6, '#1E90FF');
                        grad.addColorStop(1, '#000080');
                        c.fillStyle = grad;
                        c.beginPath();
                        c.ellipse(0, -106, 33, 80, 0, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#4169E1';
                        c.beginPath();
                        c.arc(0, -106, 20, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#00FFFF';
                        c.beginPath();
                        c.arc(0, -106, 10, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#000080';
                        c.beginPath();
                        c.arc(0, -106, 5, 0, Math.PI * 2);
                        c.fill();
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 8: ×’×•×£ ×”×˜×•×•×¡ - ××œ×™×¤×¡×” ×›×—×•×œ×”', draw: function(c){ 
                        c.fillStyle = '#4169E1';
                        c.beginPath();
                        c.ellipse(200, 266, 40, 60, 0, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 9: ×¦×•×•××¨ ×”×˜×•×•×¡', draw: function(c){ 
                        c.fillStyle = '#1E90FF';
                        c.beginPath();
                        c.ellipse(200, 220, 16, 33, 0, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 10: ×¨××© ×”×˜×•×•×¡', draw: function(c){ 
                        c.fillStyle = '#4169E1';
                        c.beginPath();
                        c.arc(200, 193, 24, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 11: ×›×ª×¨ × ×•×¦×•×ª - 3 × ×•×¦×•×ª ×‘×¨××©', draw: function(c){ 
                        for(var i = 0; i < 3; i++) {
                            c.strokeStyle = '#00CED1';
                            c.lineWidth = 2;
                            c.beginPath();
                            c.moveTo(200 + (i-1)*8, 180);
                            c.lineTo(200 + (i-1)*10, 160);
                            c.stroke();
                            c.fillStyle = '#00FFFF';
                            c.beginPath();
                            c.arc(200 + (i-1)*10, 160, 4, 0, Math.PI * 2);
                            c.fill();
                        }
                    }},
                    { instruction: '×©×œ×‘ 12: ×¢×™×Ÿ ×•××§×•×¨', draw: function(c){ 
                        c.fillStyle = '#000000';
                        c.beginPath();
                        c.arc(209, 190, 4, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#FFFFFF';
                        c.beginPath();
                        c.arc(210, 189, 2, 0, Math.PI * 2);
                        c.fill();
                        c.fillStyle = '#FFA500';
                        c.beginPath();
                        c.moveTo(213, 193);
                        c.lineTo(224, 193);
                        c.lineTo(218, 197);
                        c.closePath();
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 13: ×¨×’×œ ×©×××œ×™×ª', draw: function(c){ 
                        c.strokeStyle = '#8B4513';
                        c.lineWidth = 4;
                        c.beginPath();
                        c.moveTo(193, 320);
                        c.lineTo(193, 346);
                        c.stroke();
                        c.beginPath();
                        c.moveTo(193, 346);
                        c.lineTo(186, 353);
                        c.stroke();
                        c.beginPath();
                        c.moveTo(193, 346);
                        c.lineTo(200, 353);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 14: ×¨×’×œ ×™×× ×™×ª', draw: function(c){ 
                        c.strokeStyle = '#8B4513';
                        c.lineWidth = 4;
                        c.beginPath();
                        c.moveTo(206, 320);
                        c.lineTo(206, 346);
                        c.stroke();
                        c.beginPath();
                        c.moveTo(206, 346);
                        c.lineTo(200, 353);
                        c.stroke();
                        c.beginPath();
                        c.moveTo(206, 346);
                        c.lineTo(213, 353);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 15: ×¦×œ×œ×™× ×•×¤×¨×˜×™× ×¢×œ ×”×’×•×£', draw: function(c){ 
                        c.strokeStyle = '#000080';
                        c.lineWidth = 2;
                        c.beginPath();
                        c.arc(200, 266, 40, 0.3, Math.PI - 0.3);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 16: × ×•×¦×•×ª ×“×§×•×¨×˜×™×‘×™×•×ª ×¢×œ ×”×’×•×£', draw: function(c){ 
                        c.fillStyle = '#1E90FF';
                        for(var i = 0; i < 3; i++) {
                            c.beginPath();
                            c.arc(190 + i*10, 280, 3, 0, Math.PI * 2);
                            c.fill();
                        }
                    }}
                ]
            },
            frog: {
                name: '×¦×¤×¨×“×¢ ×—××•×“×”',
                steps: [
                    { instruction: '×©×œ×‘ 1: ×©××™×™× ×›×—×•×œ×™×', draw: function(c){ 
                        c.fillStyle = '#87CEEB';
                        c.fillRect(0, 0, 400, 400);
                    }},
                    { instruction: '×©×œ×‘ 2: ×“×©× ×™×¨×•×§ ×œ××˜×”', draw: function(c){ 
                        c.fillStyle = '#228B22';
                        c.fillRect(0, 293, 400, 107);
                    }},
                    { instruction: '×©×œ×‘ 3: ×’×•×£ ×”×¦×¤×¨×“×¢ - ××œ×™×¤×¡×” ×™×¨×•×§×”', draw: function(c){ 
                        c.fillStyle = '#32CD32';
                        c.beginPath();
                        c.ellipse(200, 240, 66, 53, 0, 0, Math.PI * 2);
                        c.fill();
                        c.strokeStyle = '#228B22';
                        c.lineWidth = 3;
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 4: ×‘×˜×Ÿ ×‘×”×™×¨×”', draw: function(c){ 
                        c.fillStyle = '#90EE90';
                        c.beginPath();
                        c.ellipse(200, 253, 40, 33, 0, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 5: ×¨×’×œ ××—×•×¨×™×ª ×©×××œ×™×ª', draw: function(c){ 
                        c.fillStyle = '#32CD32';
                        c.beginPath();
                        c.ellipse(153, 266, 24, 40, -0.5, 0, Math.PI * 2);
                        c.fill();
                        c.strokeStyle = '#228B22';
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 6: ×›×£ ×¨×’×œ ×©×××œ×™×ª', draw: function(c){ 
                        c.fillStyle = '#32CD32';
                        c.beginPath();
                        c.ellipse(133, 300, 33, 16, 0, 0, Math.PI * 2);
                        c.fill();
                        c.strokeStyle = '#228B22';
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 7: ×¨×’×œ ××—×•×¨×™×ª ×™×× ×™×ª', draw: function(c){ 
                        c.fillStyle = '#32CD32';
                        c.beginPath();
                        c.ellipse(246, 266, 24, 40, 0.5, 0, Math.PI * 2);
                        c.fill();
                        c.strokeStyle = '#228B22';
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 8: ×›×£ ×¨×’×œ ×™×× ×™×ª', draw: function(c){ 
                        c.fillStyle = '#32CD32';
                        c.beginPath();
                        c.ellipse(266, 300, 33, 16, 0, 0, Math.PI * 2);
                        c.fill();
                        c.strokeStyle = '#228B22';
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 9: ×™×“ ×©×××œ×™×ª', draw: function(c){ 
                        c.strokeStyle = '#228B22';
                        c.lineWidth = 10;
                        c.lineCap = 'round';
                        c.beginPath();
                        c.moveTo(160, 240);
                        c.lineTo(126, 260);
                        c.stroke();
                        c.fillStyle = '#32CD32';
                        c.beginPath();
                        c.arc(126, 260, 10, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 10: ×™×“ ×™×× ×™×ª', draw: function(c){ 
                        c.strokeStyle = '#228B22';
                        c.lineWidth = 10;
                        c.lineCap = 'round';
                        c.beginPath();
                        c.moveTo(240, 240);
                        c.lineTo(273, 260);
                        c.stroke();
                        c.fillStyle = '#32CD32';
                        c.beginPath();
                        c.arc(273, 260, 10, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 11: ×¢×™× ×™×™× ×œ×‘× ×•×ª ×’×“×•×œ×•×ª', draw: function(c){ 
                        c.fillStyle = '#FFFFFF';
                        c.beginPath();
                        c.arc(180, 220, 24, 0, Math.PI * 2);
                        c.fill();
                        c.strokeStyle = '#228B22';
                        c.lineWidth = 3;
                        c.stroke();
                        c.fillStyle = '#FFFFFF';
                        c.beginPath();
                        c.arc(220, 220, 24, 0, Math.PI * 2);
                        c.fill();
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 12: ××™×©×•× ×™× ×©×—×•×¨×™×', draw: function(c){ 
                        c.fillStyle = '#000000';
                        c.beginPath();
                        c.arc(184, 220, 10, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(224, 220, 10, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 13: × ×™×¦×•×¦×•×ª ×‘×¢×™× ×™×™×', draw: function(c){ 
                        c.fillStyle = '#FFFFFF';
                        c.beginPath();
                        c.arc(187, 216, 4, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(227, 216, 4, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 14: ×¤×” ××—×™×™×š', draw: function(c){ 
                        c.strokeStyle = '#228B22';
                        c.lineWidth = 4;
                        c.beginPath();
                        c.arc(200, 246, 20, 0.2, Math.PI - 0.2);
                        c.stroke();
                    }}
                ]
            },
            palm: {
                name: '×“×§×œ ×˜×¨×•×¤×™',
                steps: [
                    { instruction: '×©×œ×‘ 1: ×©××™×™× ×›×—×•×œ×™× ×‘×”×™×¨×™×', draw: function(c){ 
                        var sky = c.createLinearGradient(0, 0, 0, 266);
                        sky.addColorStop(0, '#87CEEB');
                        sky.addColorStop(1, '#E0F6FF');
                        c.fillStyle = sky;
                        c.fillRect(0, 0, 400, 266);
                    }},
                    { instruction: '×©×œ×‘ 2: ×—×•×œ ×–×”×•×‘ ×œ××˜×”', draw: function(c){ 
                        c.fillStyle = '#F4A460';
                        c.fillRect(0, 266, 400, 134);
                    }},
                    { instruction: '×©×œ×‘ 3: ×’×–×¢ ×—×•× - ×—×œ×§ ×ª×—×ª×•×Ÿ', draw: function(c){ 
                        c.fillStyle = '#8B4513';
                        c.beginPath();
                        c.moveTo(184, 320);
                        c.quadraticCurveTo(193, 200, 197, 80);
                        c.lineTo(202, 80);
                        c.quadraticCurveTo(206, 200, 216, 320);
                        c.closePath();
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 4: ×¤×¡×™× ×‘×’×–×¢ - ×§×•×•×™ ××ª××¨', draw: function(c){ 
                        c.strokeStyle = '#654321';
                        c.lineWidth = 3;
                        for(var i = 0; i < 10; i++) {
                            var y = 306 - i * 29;
                            c.beginPath();
                            c.arc(200, y, 13, 0.2, Math.PI - 0.2);
                            c.stroke();
                        }
                    }},
                    { instruction: '×©×œ×‘ 5: ×¢×œ×” ×¨××©×•×Ÿ - ×©×××œ ×œ××¢×œ×”', draw: function(c){ 
                        c.save();
                        c.translate(200, 80);
                        c.rotate(-1.2);
                        c.fillStyle = '#228B22';
                        c.beginPath();
                        c.moveTo(0, 0);
                        c.quadraticCurveTo(6, -40, 10, -80);
                        c.quadraticCurveTo(13, -100, 16, -113);
                        c.lineTo(13, -113);
                        c.quadraticCurveTo(10, -100, 8, -80);
                        c.quadraticCurveTo(4, -40, 0, -6);
                        c.closePath();
                        c.fill();
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 6: ×¢×œ×•× ×™× ×œ×¢×œ×” ×”×©×××œ×™', draw: function(c){ 
                        c.save();
                        c.translate(200, 80);
                        c.rotate(-1.2);
                        c.fillStyle = '#228B22';
                        for(var i = 1; i <= 5; i++) {
                            var y = -i * 24;
                            var size = 20 - i * 2;
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(-size, y-13, -size-6, y-20);
                            c.lineTo(-size-4, y-18);
                            c.quadraticCurveTo(-size+2, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(size+8, y-13, size+14, y-20);
                            c.lineTo(size+12, y-18);
                            c.quadraticCurveTo(size+5, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                        }
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 7: ×¢×œ×” ×©× ×™ - ×©×××œ ××¨×›×–', draw: function(c){ 
                        c.save();
                        c.translate(200, 80);
                        c.rotate(-0.7);
                        c.fillStyle = '#2E8B57';
                        c.beginPath();
                        c.moveTo(0, 0);
                        c.quadraticCurveTo(6, -40, 10, -80);
                        c.quadraticCurveTo(13, -100, 16, -113);
                        c.lineTo(13, -113);
                        c.quadraticCurveTo(10, -100, 8, -80);
                        c.quadraticCurveTo(4, -40, 0, -6);
                        c.closePath();
                        c.fill();
                        for(var i = 1; i <= 5; i++) {
                            var y = -i * 24;
                            var size = 20 - i * 2;
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(-size, y-13, -size-6, y-20);
                            c.lineTo(-size-4, y-18);
                            c.quadraticCurveTo(-size+2, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(size+8, y-13, size+14, y-20);
                            c.lineTo(size+12, y-18);
                            c.quadraticCurveTo(size+5, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                        }
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 8: ×¢×œ×” ×©×œ×™×©×™ - ×©×××œ ×§×œ', draw: function(c){ 
                        c.save();
                        c.translate(200, 80);
                        c.rotate(-0.2);
                        c.fillStyle = '#228B22';
                        c.beginPath();
                        c.moveTo(0, 0);
                        c.quadraticCurveTo(6, -40, 10, -80);
                        c.quadraticCurveTo(13, -100, 16, -113);
                        c.lineTo(13, -113);
                        c.quadraticCurveTo(10, -100, 8, -80);
                        c.quadraticCurveTo(4, -40, 0, -6);
                        c.closePath();
                        c.fill();
                        for(var i = 1; i <= 5; i++) {
                            var y = -i * 24;
                            var size = 20 - i * 2;
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(-size, y-13, -size-6, y-20);
                            c.lineTo(-size-4, y-18);
                            c.quadraticCurveTo(-size+2, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(size+8, y-13, size+14, y-20);
                            c.lineTo(size+12, y-18);
                            c.quadraticCurveTo(size+5, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                        }
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 9: ×¢×œ×” ×¨×‘×™×¢×™ - ×™××™×Ÿ ×§×œ', draw: function(c){ 
                        c.save();
                        c.translate(200, 80);
                        c.rotate(0.2);
                        c.fillStyle = '#2E8B57';
                        c.beginPath();
                        c.moveTo(0, 0);
                        c.quadraticCurveTo(6, -40, 10, -80);
                        c.quadraticCurveTo(13, -100, 16, -113);
                        c.lineTo(13, -113);
                        c.quadraticCurveTo(10, -100, 8, -80);
                        c.quadraticCurveTo(4, -40, 0, -6);
                        c.closePath();
                        c.fill();
                        for(var i = 1; i <= 5; i++) {
                            var y = -i * 24;
                            var size = 20 - i * 2;
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(-size, y-13, -size-6, y-20);
                            c.lineTo(-size-4, y-18);
                            c.quadraticCurveTo(-size+2, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(size+8, y-13, size+14, y-20);
                            c.lineTo(size+12, y-18);
                            c.quadraticCurveTo(size+5, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                        }
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 10: ×¢×œ×” ×—××™×©×™ - ×™××™×Ÿ ××¨×›×–', draw: function(c){ 
                        c.save();
                        c.translate(200, 80);
                        c.rotate(0.7);
                        c.fillStyle = '#228B22';
                        c.beginPath();
                        c.moveTo(0, 0);
                        c.quadraticCurveTo(6, -40, 10, -80);
                        c.quadraticCurveTo(13, -100, 16, -113);
                        c.lineTo(13, -113);
                        c.quadraticCurveTo(10, -100, 8, -80);
                        c.quadraticCurveTo(4, -40, 0, -6);
                        c.closePath();
                        c.fill();
                        for(var i = 1; i <= 5; i++) {
                            var y = -i * 24;
                            var size = 20 - i * 2;
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(-size, y-13, -size-6, y-20);
                            c.lineTo(-size-4, y-18);
                            c.quadraticCurveTo(-size+2, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(size+8, y-13, size+14, y-20);
                            c.lineTo(size+12, y-18);
                            c.quadraticCurveTo(size+5, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                        }
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 11: ×¢×œ×” ×©×™×©×™ - ×™××™×Ÿ ×œ××¢×œ×”', draw: function(c){ 
                        c.save();
                        c.translate(200, 80);
                        c.rotate(1.2);
                        c.fillStyle = '#2E8B57';
                        c.beginPath();
                        c.moveTo(0, 0);
                        c.quadraticCurveTo(6, -40, 10, -80);
                        c.quadraticCurveTo(13, -100, 16, -113);
                        c.lineTo(13, -113);
                        c.quadraticCurveTo(10, -100, 8, -80);
                        c.quadraticCurveTo(4, -40, 0, -6);
                        c.closePath();
                        c.fill();
                        for(var i = 1; i <= 5; i++) {
                            var y = -i * 24;
                            var size = 20 - i * 2;
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(-size, y-13, -size-6, y-20);
                            c.lineTo(-size-4, y-18);
                            c.quadraticCurveTo(-size+2, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                            c.beginPath();
                            c.moveTo(8, y);
                            c.quadraticCurveTo(size+8, y-13, size+14, y-20);
                            c.lineTo(size+12, y-18);
                            c.quadraticCurveTo(size+5, y-10, 8, y+2);
                            c.closePath();
                            c.fill();
                        }
                        c.restore();
                    }},
                    { instruction: '×©×œ×‘ 12: ×§×•×§×•×¡×™× ×—×•××™×', draw: function(c){ 
                        c.fillStyle = '#8B4513';
                        c.beginPath();
                        c.arc(193, 86, 10, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(206, 90, 10, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(200, 100, 12, 0, Math.PI * 2);
                        c.fill();
                    }}
                ]
            },
            moon: {
                name: '×™×¨×— ×•×›×•×›×‘×™×',
                steps: [
                    { instruction: '×©×œ×‘ 1: ×©××™×™× ×œ×™×œ×” ×›×”×™×', draw: function(c){ 
                        var grad = c.createRadialGradient(200, 200, 66, 200, 200, 266);
                        grad.addColorStop(0, '#191970');
                        grad.addColorStop(1, '#000033');
                        c.fillStyle = grad;
                        c.fillRect(0, 0, 400, 400);
                    }},
                    { instruction: '×©×œ×‘ 2: ×›×•×›×‘×™× ×§×˜× ×™× ×‘×¨×§×¢', draw: function(c){ 
                        c.fillStyle = 'rgba(255, 255, 255, 0.6)';
                        var stars = [
                            [40, 53], [106, 40], [333, 66], [360, 133],
                            [53, 200], [346, 240], [66, 306], [373, 333],
                            [160, 360], [266, 373], [120, 133], [293, 146]
                        ];
                        stars.forEach(function(s) {
                            c.beginPath();
                            c.arc(s[0], s[1], 2, 0, Math.PI * 2);
                            c.fill();
                        });
                    }},
                    { instruction: '×©×œ×‘ 3: ×™×¨×— ××œ× - ×¢×™×’×•×œ ×–×”×•×‘', draw: function(c){ 
                        c.fillStyle = '#FFE5B4';
                        c.beginPath();
                        c.arc(200, 160, 80, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 4: ×¦×œ ×œ×™×¦×™×¨×ª ×¡×”×¨', draw: function(c){ 
                        c.fillStyle = '#000033';
                        c.beginPath();
                        c.arc(226, 153, 73, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 5: ××›×ª×©×™× ×¢×œ ×”×™×¨×—', draw: function(c){ 
                        c.fillStyle = 'rgba(139, 90, 43, 0.3)';
                        c.beginPath();
                        c.arc(180, 146, 10, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(193, 173, 8, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(170, 180, 6, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(186, 126, 5, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 6: ×–×•×”×¨ ×¡×‘×™×‘ ×”×™×¨×—', draw: function(c){ 
                        c.strokeStyle = 'rgba(255, 229, 180, 0.3)';
                        c.lineWidth = 10;
                        c.beginPath();
                        c.arc(200, 160, 90, 0, Math.PI * 2);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 7: ×›×•×›×‘ ×¨××©×•×Ÿ - ×©×××œ ×¢×œ×™×•×Ÿ', draw: function(c){ 
                        drawStar(c, 80, 106, 16);
                    }},
                    { instruction: '×©×œ×‘ 8: ×›×•×›×‘ ×©× ×™ - ×™××™×Ÿ ×¢×œ×™×•×Ÿ', draw: function(c){ 
                        drawStar(c, 320, 93, 13);
                    }},
                    { instruction: '×©×œ×‘ 9: ×›×•×›×‘ ×©×œ×™×©×™ - ×©×××œ ×ª×—×ª×•×Ÿ', draw: function(c){ 
                        drawStar(c, 93, 266, 14);
                    }},
                    { instruction: '×©×œ×‘ 10: ×›×•×›×‘ ×¨×‘×™×¢×™ ×•×—××™×©×™', draw: function(c){ 
                        drawStar(c, 306, 253, 17);
                        drawStar(c, 200, 320, 16);
                    }}
                ]
            },
            crab: {
                name: '×¡×¨×˜×Ÿ ×™×',
                steps: [
                    { instruction: '×©×œ×‘ 1: ××™× ×›×—×•×œ×™×', draw: function(c){ 
                        var water = c.createLinearGradient(0, 0, 0, 400);
                        water.addColorStop(0, '#4682B4');
                        water.addColorStop(1, '#1E90FF');
                        c.fillStyle = water;
                        c.fillRect(0, 0, 400, 400);
                    }},
                    { instruction: '×©×œ×‘ 2: ×—×•×œ ×‘×ª×—×ª×™×ª', draw: function(c){ 
                        c.fillStyle = '#F4A460';
                        c.fillRect(0, 333, 400, 66);
                    }},
                    { instruction: '×©×œ×‘ 3: ×‘×•×¢×•×ª ××™×', draw: function(c){ 
                        c.fillStyle = 'rgba(255, 255, 255, 0.4)';
                        var bubbles = [[66, 133, 8], [240, 106, 10], [306, 173, 6], [120, 240, 9], [346, 266, 8]];
                        bubbles.forEach(function(b) {
                            c.beginPath();
                            c.arc(b[0], b[1], b[2], 0, Math.PI * 2);
                            c.fill();
                        });
                    }},
                    { instruction: '×©×œ×‘ 4: ×’×•×£ ×”×¡×¨×˜×Ÿ - ××“×•×', draw: function(c){ 
                        c.fillStyle = '#FF6347';
                        c.beginPath();
                        c.ellipse(200, 200, 60, 46, 0, 0, Math.PI * 2);
                        c.fill();
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 3;
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 5: 4 ×¨×’×œ×™×™× ×‘×¦×“ ×©×××œ', draw: function(c){ 
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 5;
                        c.lineCap = 'round';
                        for(var i = 0; i < 4; i++) {
                            var y = 180 + i * 13;
                            c.beginPath();
                            c.moveTo(146, y);
                            c.lineTo(113, y + 10);
                            c.lineTo(100, y + 20);
                            c.stroke();
                        }
                    }},
                    { instruction: '×©×œ×‘ 6: 4 ×¨×’×œ×™×™× ×‘×¦×“ ×™××™×Ÿ', draw: function(c){ 
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 5;
                        c.lineCap = 'round';
                        for(var i = 0; i < 4; i++) {
                            var y = 180 + i * 13;
                            c.beginPath();
                            c.moveTo(253, y);
                            c.lineTo(286, y + 10);
                            c.lineTo(300, y + 20);
                            c.stroke();
                        }
                    }},
                    { instruction: '×©×œ×‘ 7: ×¦×‘×ª ×©×××œ×™×ª - ×–×¨×•×¢', draw: function(c){ 
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 10;
                        c.beginPath();
                        c.moveTo(160, 193);
                        c.lineTo(106, 173);
                        c.lineTo(80, 160);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 8: ×¦×‘×ª ×©×××œ×™×ª - ××œ×§×—×™×™×', draw: function(c){ 
                        c.fillStyle = '#FF6347';
                        c.beginPath();
                        c.moveTo(80, 160);
                        c.quadraticCurveTo(53, 153, 46, 140);
                        c.lineTo(50, 144);
                        c.quadraticCurveTo(57, 154, 80, 164);
                        c.closePath();
                        c.fill();
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 3;
                        c.stroke();
                        c.fillStyle = '#FF6347';
                        c.beginPath();
                        c.moveTo(80, 160);
                        c.quadraticCurveTo(60, 166, 53, 180);
                        c.lineTo(57, 176);
                        c.quadraticCurveTo(64, 165, 80, 164);
                        c.closePath();
                        c.fill();
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 9: ×¦×‘×ª ×™×× ×™×ª - ×–×¨×•×¢', draw: function(c){ 
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 10;
                        c.beginPath();
                        c.moveTo(240, 193);
                        c.lineTo(293, 173);
                        c.lineTo(320, 160);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 10: ×¦×‘×ª ×™×× ×™×ª - ××œ×§×—×™×™×', draw: function(c){ 
                        c.fillStyle = '#FF6347';
                        c.beginPath();
                        c.moveTo(320, 160);
                        c.quadraticCurveTo(346, 153, 353, 140);
                        c.lineTo(350, 144);
                        c.quadraticCurveTo(342, 154, 320, 164);
                        c.closePath();
                        c.fill();
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 3;
                        c.stroke();
                        c.fillStyle = '#FF6347';
                        c.beginPath();
                        c.moveTo(320, 160);
                        c.quadraticCurveTo(340, 166, 346, 180);
                        c.lineTo(342, 176);
                        c.quadraticCurveTo(336, 165, 320, 164);
                        c.closePath();
                        c.fill();
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 11: ×’×‘×©×•×©×™×•×ª ×œ×¢×™× ×™×™×', draw: function(c){ 
                        c.fillStyle = '#FF6347';
                        c.beginPath();
                        c.ellipse(180, 173, 8, 20, 0, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.ellipse(220, 173, 8, 20, 0, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 12: ×¢×™× ×™×™× ×œ×‘× ×•×ª', draw: function(c){ 
                        c.fillStyle = '#FFFFFF';
                        c.beginPath();
                        c.arc(180, 163, 8, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(220, 163, 8, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 13: ××™×©×•× ×™× ×©×—×•×¨×™×', draw: function(c){ 
                        c.fillStyle = '#000000';
                        c.beginPath();
                        c.arc(181, 162, 5, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(221, 162, 5, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 14: × ×™×¦×•×¦×•×ª ×‘×¢×™× ×™×™×', draw: function(c){ 
                        c.fillStyle = '#FFFFFF';
                        c.beginPath();
                        c.arc(183, 161, 2, 0, Math.PI * 2);
                        c.fill();
                        c.beginPath();
                        c.arc(223, 161, 2, 0, Math.PI * 2);
                        c.fill();
                    }},
                    { instruction: '×©×œ×‘ 15: ×¤×” ××—×™×™×š', draw: function(c){ 
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 3;
                        c.beginPath();
                        c.arc(200, 206, 16, 0.3, Math.PI - 0.3);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 16: × ×§×•×“×•×ª ×“×§×•×¨×˜×™×‘×™×•×ª ×¢×œ ×”×’×•×£', draw: function(c){ 
                        c.fillStyle = '#DC143C';
                        var dots = [[186, 193], [213, 196], [193, 210], [206, 206]];
                        dots.forEach(function(d) {
                            c.beginPath();
                            c.arc(d[0], d[1], 3, 0, Math.PI * 2);
                            c.fill();
                        });
                    }},
                    { instruction: '×©×œ×‘ 17: ×§×•×•×™ ××ª××¨ × ×•×¡×¤×™× ×¢×œ ×”×©×¨×™×•×Ÿ', draw: function(c){ 
                        c.strokeStyle = '#DC143C';
                        c.lineWidth = 2;
                        c.beginPath();
                        c.moveTo(160, 186);
                        c.lineTo(240, 186);
                        c.stroke();
                        c.beginPath();
                        c.moveTo(166, 213);
                        c.lineTo(233, 213);
                        c.stroke();
                    }},
                    { instruction: '×©×œ×‘ 18: ×¤×¨×˜×™× ××—×¨×•× ×™× - ×¦×œ×œ×™×', draw: function(c){ 
                        c.fillStyle = 'rgba(220, 20, 60, 0.3)';
                        c.beginPath();
                        c.ellipse(200, 220, 40, 20, 0, 0, Math.PI);
                        c.fill();
                    }}
                ]
            }
        };
        
        function drawStar(c, x, y, size) {
            c.save();
            c.translate(x, y);
            var grad = c.createRadialGradient(0, 0, 0, 0, 0, size*2);
            grad.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
            grad.addColorStop(0.5, 'rgba(255, 255, 255, 0.3)');
            grad.addColorStop(1, 'rgba(255, 255, 255, 0)');
            c.fillStyle = grad;
            c.beginPath();
            c.arc(0, 0, size*2, 0, Math.PI * 2);
            c.fill();
            c.fillStyle = '#FFFFFF';
            c.beginPath();
            for(var i = 0; i < 5; i++) {
                var angle = (i * 4 * Math.PI / 5) - Math.PI / 2;
                var r = (i % 2 === 0) ? size : size * 0.4;
                var px = Math.cos(angle) * r;
                var py = Math.sin(angle) * r;
                if(i === 0) c.moveTo(px, py);
                else c.lineTo(px, py);
            }
            c.closePath();
            c.fill();
            c.restore();
        }
        
        function init() {
            var p = document.getElementById('colorPalette');
            for (var i = 0; i < cols.length; i++) {
                var b = document.createElement('div');
                b.className = 'color-btn' + (cols[i] === col ? ' selected' : '');
                b.style.background = cols[i];
                b.setAttribute('data-color', cols[i]);
                b.onclick = function() {
                    col = this.getAttribute('data-color');
                    erase = false;
                    var all = document.querySelectorAll('.color-btn');
                    for (var j = 0; j < all.length; j++) all[j].classList.remove('selected');
                    this.classList.add('selected');
                    document.getElementById('drawBtn').classList.add('active');
                    document.getElementById('eraserBtn').classList.remove('active');
                    updCursor();
                };
                p.appendChild(b);
            }
        }
        
        function selectDrawTool() {
            erase = false;
            document.getElementById('drawBtn').classList.add('active');
            document.getElementById('eraserBtn').classList.remove('active');
            updCursor();
        }
        
        function selectEraser() {
            erase = true;
            document.getElementById('eraserBtn').classList.add('active');
            document.getElementById('drawBtn').classList.remove('active');
            var all = document.querySelectorAll('.color-btn');
            for (var i = 0; i < all.length; i++) all[i].classList.remove('selected');
            updCursor();
        }
        
        document.getElementById('brushSize').addEventListener('input', function(e) {
            size = parseInt(e.target.value);
            updCursor();
        });
        
        function showMenu() {
            document.getElementById('drawingMenu').classList.remove('hidden');
            document.getElementById('overlay').classList.remove('hidden');
        }
        
        function hideMenu() {
            document.getElementById('drawingMenu').classList.add('hidden');
            document.getElementById('overlay').classList.add('hidden');
        }
        
        function selectDrawing(n) {
            curr = data[n];
            step = 0;
            exCtx.clearRect(0, 0, 400, 400);
            myCtx.clearRect(0, 0, 400, 400);
            upd();
            hideMenu();
            document.getElementById('nextBtn').disabled = false;
        }
        
        function clearMyCanvas() {
            myCtx.clearRect(0, 0, 400, 400);
        }
        
        function saveDrawing() {
            if (!curr) { alert('×‘×—×¨ ×¦×™×•×¨ ×ª×—×™×œ×”!'); return; }
            var l = document.createElement('a');
            l.download = '×¦×™×•×¨_' + curr.name + '.png';
            l.href = my.toDataURL();
            l.click();
        }
        
        function upd() {
            if (!curr) return;
            exCtx.clearRect(0, 0, 400, 400);
            for (var i = 0; i <= step; i++) curr.steps[i].draw(exCtx);
            document.getElementById('instruction').textContent = curr.steps[step].instruction;
            document.getElementById('stepCounter').textContent = '×©×œ×‘ ' + (step + 1) + ' ××ª×•×š ' + curr.steps.length;
            document.getElementById('prevBtn').disabled = step === 0;
            document.getElementById('nextBtn').disabled = step === curr.steps.length - 1;
        }
        
        function nextStep() {
            if (curr && step < curr.steps.length - 1) { step++; upd(); }
        }
        
        function prevStep() {
            if (step > 0) { step--; upd(); }
        }
        
        my.addEventListener('mousedown', function(e) {
            draw = true;
            var r = my.getBoundingClientRect();
            myCtx.beginPath();
            myCtx.moveTo(e.clientX - r.left, e.clientY - r.top);
        });
        
        my.addEventListener('mousemove', function(e) {
            if (!draw) return;
            var r = my.getBoundingClientRect();
            myCtx.lineCap = 'round';
            myCtx.lineJoin = 'round';
            if (erase) {
                myCtx.globalCompositeOperation = 'destination-out';
                myCtx.lineWidth = size * 2;
            } else {
                myCtx.globalCompositeOperation = 'source-over';
                myCtx.strokeStyle = col;
                myCtx.lineWidth = size;
            }
            myCtx.lineTo(e.clientX - r.left, e.clientY - r.top);
            myCtx.stroke();
        });
        
        my.addEventListener('mouseup', function() { draw = false; });
        my.addEventListener('mouseout', function() { draw = false; });
        
        my.addEventListener('touchstart', function(e) {
            e.preventDefault();
            draw = true;
            var t = e.touches[0];
            var r = my.getBoundingClientRect();
            myCtx.beginPath();
            myCtx.moveTo(t.clientX - r.left, t.clientY - r.top);
        });
        
        my.addEventListener('touchmove', function(e) {
            e.preventDefault();
            if (!draw) return;
            var t = e.touches[0];
            var r = my.getBoundingClientRect();
            myCtx.lineCap = 'round';
            myCtx.lineJoin = 'round';
            if (erase) {
                myCtx.globalCompositeOperation = 'destination-out';
                myCtx.lineWidth = size * 2;
            } else {
                myCtx.globalCompositeOperation = 'source-over';
                myCtx.strokeStyle = col;
                myCtx.lineWidth = size;
            }
            myCtx.lineTo(t.clientX - r.left, t.clientY - r.top);
            myCtx.stroke();
        });
        
        my.addEventListener('touchend', function() { draw = false; });
        
        init();
    </script>
</body>
</html>