<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”×’×™×•×Ÿ ×•×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª - ×›×™×ª×” ×“'</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; background: white; border-radius: 25px; padding: 40px; box-shadow: 0 25px 70px rgba(0,0,0,0.4); }
        h1 { color: #667eea; text-align: center; margin-bottom: 15px; font-size: 3em; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        .subtitle { text-align: center; color: #666; margin-bottom: 35px; font-size: 1.3em; }
        .tabs { display: flex; gap: 12px; margin-bottom: 35px; flex-wrap: wrap; justify-content: center; }
        .tab { padding: 16px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 12px; cursor: pointer; font-size: 1.15em; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white; }
        .tab:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, #7c8ef5 0%, #8a5eb8 100%); }
        .tab.active { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); transform: scale(1.05); }
        .content { display: none; }
        .content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .lesson { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); }
        .lesson h2 { color: #ff6b6b; margin-bottom: 20px; font-size: 1.8em; }
        .lesson p { font-size: 1.2em; line-height: 1.8; margin-bottom: 15px; color: #333; }
        .example { background: white; padding: 20px; border-right: 5px solid #667eea; margin: 20px 0; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.08); }
        .example h3 { color: #f093fb; margin-bottom: 12px; font-size: 1.3em; }
        .game { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; color: white; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .game h2 { margin-bottom: 20px; font-size: 2em; }
        .question-counter { text-align: center; font-size: 1.3em; margin: 15px 0; color: #fff; background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px; }
        .score { text-align: center; font-size: 1.8em; margin: 25px 0; color: #fff; font-weight: bold; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 12px; }
        .problem-display { font-size: 1.3em; text-align: right; margin: 30px 0; padding: 25px; background: rgba(255,255,255,0.3); border-radius: 15px; line-height: 1.8; }
        .problem-display strong { font-size: 1.1em; color: #fff3cd; }
        input[type="number"], input[type="text"] { width: 250px; padding: 15px; font-size: 1.5em; border: 4px solid white; border-radius: 10px; text-align: center; margin: 10px; font-weight: bold; }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type="number"] { -moz-appearance: textfield; }
        button { background: white; color: #667eea; border: none; padding: 14px 35px; font-size: 1.2em; border-radius: 10px; cursor: pointer; transition: all 0.3s; font-weight: bold; box-shadow: 0 6px 12px rgba(0,0,0,0.2); margin: 5px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .feedback { padding: 20px; border-radius: 12px; margin-top: 20px; font-size: 1.3em; text-align: center; font-weight: bold; }
        .correct { background: #51cf66; color: white; }
        .incorrect { background: #ff6b6b; color: white; }
        .controls { text-align: center; margin: 25px 0; }
        .round-complete { background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%); padding: 40px; border-radius: 20px; text-align: center; color: white; margin: 20px 0; }
        .round-complete h3 { font-size: 2.5em; margin-bottom: 20px; }
        .round-complete p { font-size: 1.5em; margin: 15px 0; }
        .new-round-btn { background: white; color: #51cf66; font-size: 1.5em; padding: 20px 40px; margin-top: 20px; border: none; border-radius: 15px; cursor: pointer; font-weight: bold; box-shadow: 0 8px 16px rgba(0,0,0,0.2); transition: all 0.3s; }
        .new-round-btn:hover { transform: scale(1.05); box-shadow: 0 12px 24px rgba(0,0,0,0.3); }
        .steps { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: right; }
        .steps p { margin: 10px 0; font-size: 1.1em; }
        .formula-box { background: #fff3cd; border: 3px solid #ffc107; padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center; font-size: 1.3em; font-weight: bold; color: #856404; }
        .strategy-box { background: #e7f5ff; border: 3px solid #339af0; padding: 20px; border-radius: 10px; margin: 15px 0; text-align: right; }
        .strategy-box h4 { color: #1971c2; margin-bottom: 10px; font-size: 1.2em; }
        .strategy-box p { font-size: 1.1em; line-height: 1.6; margin: 8px 0; }
        .multiple-choice { text-align: right; margin: 20px 0; }
        .choice-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: white; color: #667eea; border: 3px solid white; border-radius: 10px; font-size: 1.2em; cursor: pointer; transition: all 0.3s; text-align: right; }
        .choice-btn:hover { background: #f0f0f0; transform: translateX(-5px); }
        .choice-btn.selected { background: #667eea; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>×”×’×™×•×Ÿ ×•×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª ğŸ§ </h1>
        <div class="subtitle">×›×™×ª×” ×“' - ×œ××“×• ×œ×—×©×•×‘ ×›××• ×—×•×§×¨×™×!</div>
        
        <div class="tabs">
            <button class="tab active" data-tab="lesson1">ğŸ“š ×©×™×¢×•×¨: ××¡×˜×¨×˜×’×™×•×ª ×¤×ª×¨×•×Ÿ</button>
            <button class="tab" data-tab="game1">ğŸ® ××©×—×§: ××¡×˜×¨×˜×’×™×•×ª</button>
            <button class="tab" data-tab="lesson2">ğŸ“š ×©×™×¢×•×¨: ×‘×¢×™×•×ª ×œ×•×’×™×•×ª</button>
            <button class="tab" data-tab="game2">ğŸ§© ××©×—×§: ×”×’×™×•×Ÿ</button>
            <button class="tab" data-tab="lesson3">ğŸ“š ×©×™×¢×•×¨: ××™×“×¢ ×—×¡×¨/××™×•×ª×¨</button>
            <button class="tab" data-tab="game3">ğŸ¯ ××©×—×§: ×–×™×”×•×™ ××™×“×¢</button>
        </div>
        
        <!-- ×©×™×¢×•×¨ 1: ××¡×˜×¨×˜×’×™×•×ª ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª -->
        <div id="lesson1" class="content active">
            <div class="lesson">
                <h2>××¡×˜×¨×˜×’×™×•×ª ×œ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª</h2>
                <p>×›×©×× ×—× ×• ×¤×•×˜×¨×™× ×‘×¢×™×”, ×™×© ×›×œ×™× ×©×¢×•×–×¨×™× ×œ× ×• ×œ×—×©×•×‘ × ×›×•×Ÿ ×•×œ×”×’×™×¢ ×œ×¤×ª×¨×•×Ÿ!</p>
                
                <div class="formula-box">
                    ×§×¨× â† ×”×‘×Ÿ â† ×ª×›× ×Ÿ â† ×¤×ª×•×¨ â† ×‘×“×•×§
                </div>
                
                <div class="example">
                    <h3>××¡×˜×¨×˜×’×™×” 1: ×¦×™×•×¨ ××• ×ª×¨×©×™×</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×œ×“× ×™ ×™×© 3 ×¢×¤×¨×•× ×•×ª. ×œ×¨×•× ×™×ª ×™×© ×¤×™ 2 ×™×•×ª×¨ ××“× ×™. ×›××” ×¢×¤×¨×•× ×•×ª ×™×© ×œ×©× ×™×”× ×‘×™×—×“?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ ×‘×¢×–×¨×ª ×¦×™×•×¨:</strong></p>
                        <p>×“× ×™: ğŸ–ï¸ğŸ–ï¸ğŸ–ï¸ (3 ×¢×¤×¨×•× ×•×ª)</p>
                        <p>×¨×•× ×™×ª: ğŸ–ï¸ğŸ–ï¸ğŸ–ï¸ğŸ–ï¸ğŸ–ï¸ğŸ–ï¸ (×¤×™ 2 - ×›×œ×•××¨ 2 Ã— 3 = 6 ×¢×¤×¨×•× ×•×ª)</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>3 + 6 = 9</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×™×© ×œ×”× 9 ×¢×¤×¨×•× ×•×ª ×‘×™×—×“</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>××¡×˜×¨×˜×’×™×” 2: ×¢×‘×•×“ ×œ××—×•×¨</h3>
                    <p><strong>×‘×¢×™×”:</strong> ××× ×§× ×ª×” ×¢×•×’×™×•×ª. ××—×¨×™ ×©× ×ª× ×” 5 ×¢×•×’×™×•×ª ×œ×›×œ ××—×“ ×-3 ×™×œ×“×™×, × ×©××¨×• ×œ×” 10 ×¢×•×’×™×•×ª. ×›××” ×¢×•×’×™×•×ª ×”×™×• ×œ×” ×‘×”×ª×—×œ×”?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ - ×¢×•×‘×“×™× ×œ××—×•×¨:</strong></p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">×©×œ×‘ 1: ×›××” × ×ª× ×”? 5 Ã— 3 = 15</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">×©×œ×‘ 2: ×›××” ×”×™×• ×‘×”×ª×—×œ×”? 15 + 10 = 25</p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×”×™×• ×œ×” 25 ×¢×•×’×™×•×ª ×‘×”×ª×—×œ×”</p>
                        <p style="color: #51cf66; direction: ltr; text-align: center; font-size: 1.2em;"><strong>âœ“ ×‘×“×™×§×”: 25 - 15 = 10 × ×›×•×Ÿ</strong></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>××¡×˜×¨×˜×’×™×” 3: × ×¡×” ×•×˜×¢×” (×‘××•×¤×Ÿ ×—×›×)</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×œ×©× ×™ ××¡×¤×¨×™× ×¡×›×•× ×©×œ 12 ×•×”×¤×¨×© ×©×œ 4. ××” ×”×?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ - × ×™×¡×™×•×Ÿ ×—×›×:</strong></p>
                        <p style="direction: ltr; text-align: center; font-size: 1.2em;">× ×™×¡×™×•×Ÿ 1: 7 + 5 = 12 âœ“ ××‘×œ 7 - 5 = 2 âœ—</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.2em;">× ×™×¡×™×•×Ÿ 2: 8 + 4 = 12 âœ“ ×•×’× 8 - 4 = 4 âœ“</p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×”××¡×¤×¨×™× ×”× 4 ×•-8</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>××¡×˜×¨×˜×’×™×” 4: ××¦× ×“×¤×•×¡</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×‘×›×™×ª×” ×™×•×©×‘×™× 20 ×™×œ×“×™×. ×”××•×¨×” ××•××¨×ª: "×›×œ ××™ ×©××¡×¤×¨ ×”××•×©×‘ ×©×œ×• ××ª×—×œ×§ ×‘-3 ×™×§×•×". ×›××” ×™×œ×“×™× ×™×§×•××•?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ - ×“×¤×•×¡:</strong></p>
                        <p style="direction: ltr; text-align: center; font-size: 1.2em;">××•×©×‘×™× ××ª×—×œ×§×™× ×‘-3: 3, 6, 9, 12, 15, 18</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 6 ×™×œ×“×™× ×™×§×•××•</p>
                    </div>
                </div>
                
                <div class="strategy-box">
                    <h4>ğŸ’¡ ×˜×™×¤×™× ×œ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª:</h4>
                    <p>âœ“ ×§×¨× ××ª ×”×‘×¢×™×” ×¤×¢××™×™×</p>
                    <p>âœ“ ×¡××Ÿ ××ª ×”××™×“×¢ ×”×—×©×•×‘</p>
                    <p>âœ“ ×©××œ ××ª ×¢×¦××š: "××” ×¦×¨×™×š ×œ××¦×•×?"</p>
                    <p>âœ“ ×‘×—×¨ ××¡×˜×¨×˜×’×™×” ××ª××™××”</p>
                    <p>âœ“ ×ª××™×“ ×‘×“×•×§ ××ª ×”×ª×©×•×‘×”!</p>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px;">
                    <h3 style="color: white; margin-bottom: 15px; font-size: 1.5em;">âœ¨ ××•×›× ×™× ×œ×ª×¨×’×œ?</h3>
                    <p style="color: white; font-size: 1.2em; margin-bottom: 20px;">×‘×•××• × ×¤×ª×•×¨ ×‘×¢×™×•×ª ×¢× ××¡×˜×¨×˜×’×™×•×ª!</p>
                    <button class="tab" data-tab="game1" style="font-size: 1.3em; padding: 18px 40px;">ğŸ® ×œ××©×—×§ ××¡×˜×¨×˜×’×™×•×ª</button>
                </div>
            </div>
        </div>
        
        <!-- ××©×—×§ 1 -->
        <div id="game1" class="content">
            <div class="game">
                <h2>××©×—×§ ××¡×˜×¨×˜×’×™×•×ª ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª</h2>
                <div class="question-counter">×©××œ×” <span id="q-count1">1</span> ××ª×•×š 10</div>
                <div class="score">× ×™×§×•×“: <span id="score1">0</span></div>
                <div class="problem-display" id="problem1">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer1" placeholder="×”×›× ×¡ ×ª×©×•×‘×”">
                    <br><br>
                    <button onclick="checkAns(1);">×‘×“×•×§</button>
                </div>
                <div id="feedback1"></div>
                <div id="round-end1" style="display: none;"></div>
            </div>
        </div>
        
        <!-- ×©×™×¢×•×¨ 2: ×‘×¢×™×•×ª ×œ×•×’×™×•×ª -->
        <div id="lesson2" class="content">
            <div class="lesson">
                <h2>×‘×¢×™×•×ª ×œ×•×’×™×•×ª ×•×—×©×™×‘×” ×™×¦×™×¨×ª×™×ª</h2>
                <p>×‘×¢×™×•×ª ×œ×•×’×™×•×ª ×“×•×¨×©×•×ª ×—×©×™×‘×” ××—×•×¥ ×œ×§×•×¤×¡×” ×•×”×¡×§×ª ××¡×§× ×•×ª!</p>
                
                <div class="formula-box">
                    ××™×“×¢ + ×”×’×™×•×Ÿ = ×¤×ª×¨×•×Ÿ
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 1: ×—×™×“×ª ×”×’×™×œ</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×™×•×¡×™ ××‘×•×’×¨ ××“× ×” ×‘-3 ×©× ×™×. ×œ×“× ×” ×™×© 8 ×©× ×™×. ×‘×¢×•×“ ×›××” ×©× ×™× ×™×”×™×” ×œ×™×•×¡×™ 15?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ ×”×’×™×•× ×™:</strong></p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">×’×™×œ ×™×•×¡×™ ×¢×›×©×™×•: 8 + 3 = 11</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">×›××” ×©× ×™× ×—×¡×¨×•×ª? 15 - 11 = 4</p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×‘×¢×•×“ 4 ×©× ×™×</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: ×—×™×“×ª ×”×¢×•×’×™×•×ª</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×‘×§×•×¤×¡×” ×”×™×• ×¢×•×’×™×•×ª. ××× ××›×œ×” 7 ×¢×•×’×™×•×ª ×•× ×©××¨×• 18 ×¢×•×’×™×•×ª. ×›××” ×¢×•×’×™×•×ª ×”×™×• ×‘×§×•×¤×¡×” ×‘×”×ª×—×œ×”?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ ×”×’×™×•× ×™:</strong></p>
                        <p>×¢×•×’×™×•×ª ×©×”×™×• = ×¢×•×’×™×•×ª ×©× ×©××¨×• + ×¢×•×’×™×•×ª ×©××›×œ×•</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">18 + 7 = 25</p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×”×™×• 25 ×¢×•×’×™×•×ª ×‘×”×ª×—×œ×”</p>
                        <p style="color: #51cf66; direction: ltr; text-align: center; font-size: 1.2em;"><strong>âœ“ ×‘×“×™×§×”: 25 - 7 = 18 × ×›×•×Ÿ</strong></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 3: ×—×œ×•×§×” ×©×•×•×”</h3>
                    <p><strong>×‘×¢×™×”:</strong> 4 ×™×œ×“×™× ×—×•×œ×§×™× ×‘×™× ×™×”× 32 ××“×‘×§×•×ª ×‘××•×¤×Ÿ ×©×•×•×”. ×›××” ××“×‘×§×•×ª ××§×‘×œ ×›×œ ×™×œ×“?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ ×”×’×™×•× ×™:</strong></p>
                        <p>×›×©××—×œ×§×™× ×©×•×•×” - ×¦×¨×™×š ×œ×—×œ×§</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">32 Ã· 4 = 8</p>
                        <p><strong>×ª×©×•×‘×”:</strong> ×›×œ ×™×œ×“ ××§×‘×œ 8 ××“×‘×§×•×ª</p>
                        <p style="color: #51cf66; direction: ltr; text-align: center; font-size: 1.2em;"><strong>âœ“ ×‘×“×™×§×”: 4 Ã— 8 = 32 × ×›×•×Ÿ</strong></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 4: ×¨×¦×£ ×”×’×™×•× ×™</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×× ×›×œ ×—×ª×•×œ ××•×›×œ 2 ×“×’×™× ×‘×™×•×, ×•×™×© 5 ×—×ª×•×œ×™×, ×›××” ×“×’×™× × ×¦×˜×¨×š ×œ-3 ×™××™×?</p>
                    <div class="steps">
                        <p><strong>×¤×ª×¨×•×Ÿ:</strong></p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">×“×’×™× ×œ×™×•× ××—×“: 5 Ã— 2 = 10 ×“×’×™×</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;">×“×’×™× ×œ-3 ×™××™×: 10 Ã— 3 = 30 ×“×’×™×</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 30 ×“×’×™×</p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px;">
                    <h3 style="color: white; margin-bottom: 15px; font-size: 1.5em;">âœ¨ ××•×›× ×™× ×œ××ª×’×¨?</h3>
                    <p style="color: white; font-size: 1.2em; margin-bottom: 20px;">×‘×•××• ×œ×¤×ª×•×¨ ×‘×¢×™×•×ª ×œ×•×’×™×•×ª!</p>
                    <button class="tab" data-tab="game2" style="font-size: 1.3em; padding: 18px 40px;">ğŸ§© ×œ××©×—×§ ×”×’×™×•×Ÿ</button>
                </div>
            </div>
        </div>
        
        <!-- ××©×—×§ 2 -->
        <div id="game2" class="content">
            <div class="game">
                <h2>××©×—×§ ×‘×¢×™×•×ª ×œ×•×’×™×•×ª</h2>
                <div class="question-counter">×©××œ×” <span id="q-count2">1</span> ××ª×•×š 10</div>
                <div class="score">× ×™×§×•×“: <span id="score2">0</span></div>
                <div class="problem-display" id="problem2">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer2" placeholder="×”×›× ×¡ ×ª×©×•×‘×”">
                    <br><br>
                    <button onclick="checkAns(2);">×‘×“×•×§</button>
                </div>
                <div id="feedback2"></div>
                <div id="round-end2" style="display: none;"></div>
            </div>
        </div>
        
        <!-- ×©×™×¢×•×¨ 3: ××™×“×¢ ×—×¡×¨ ××• ××™×•×ª×¨ -->
        <div id="lesson3" class="content">
            <div class="lesson">
                <h2>××™×“×¢ ×—×¡×¨ ××• ××™×•×ª×¨</h2>
                <p>×œ×¤×¢××™× ×‘×‘×¢×™×” ×™×© ×™×•×ª×¨ ××“×™ ××™×“×¢, ×•×œ×¤×¢××™× ×—×¡×¨ ××™×“×¢. ×¦×¨×™×š ×œ×“×¢×ª ×œ×–×”×•×ª!</p>
                
                <div class="formula-box">
                    ××” ×× ×™ ×¦×¨×™×š ×œ×“×¢×ª? ××” ×™×© ×œ×™? ××” ×—×¡×¨/××™×•×ª×¨?
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 1: ××™×“×¢ ××™×•×ª×¨</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×‘×—× ×•×ª ×™×© 20 ×›×“×•×¨×™× ××“×•××™×, 15 ×›×“×•×¨×™× ×›×—×•×œ×™× ×•-10 ×›×“×•×¨×™× ×™×¨×•×§×™×. ×”××—×™×¨ ×”×•× 5 ×©×§×œ ×œ×›×“×•×¨. ×›××” ×›×“×•×¨×™× ×™×© ×‘×—× ×•×ª?</p>
                    <div class="steps">
                        <p><strong>× ×™×ª×•×—:</strong></p>
                        <p>âœ“ ××™×“×¢ ×—×©×•×‘: 20 + 15 + 10 ×›×“×•×¨×™×</p>
                        <p>âœ— ××™×“×¢ ××™×•×ª×¨: ×”××—×™×¨ (5 ×©×§×œ) - ×œ× × ×©××œ× ×• ×¢×œ ××—×™×¨!</p>
                        <p style="direction: ltr; text-align: center; font-size: 1.3em;"><strong>×—×™×©×•×‘: 20 + 15 + 10 = 45</strong></p>
                        <p><strong>×ª×©×•×‘×”:</strong> 45 ×›×“×•×¨×™×</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: ××™×“×¢ ×—×¡×¨</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×“× ×™ ×¨×¥ ××”×¨ ×××•×“. ×”×•× ×¨×¥ 3 ×§×™×œ×•××˜×¨. ×›××” ×–××Ÿ ×œ×§×— ×œ×•?</p>
                    <div class="steps">
                        <p><strong>× ×™×ª×•×—:</strong></p>
                        <p>âœ“ ×™×© ×œ× ×•: ××¨×—×§ = 3 ×§"×</p>
                        <p>âœ— ×—×¡×¨ ×œ× ×•: ××”×™×¨×•×ª ××• ×–××Ÿ!</p>
                        <p><strong>××¡×§× ×”:</strong> ××™ ××¤×©×¨ ×œ×¤×ª×•×¨ - ×—×¡×¨ ××™×“×¢!</p>
                        <p>×¦×¨×™×š ×œ×“×¢×ª ×›××” ×–××Ÿ ×¨×™×¦×” ××• ××”×™×¨×•×ª ×¨×™×¦×”</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 3: ××™×“×¢ ××™×•×ª×¨ - ×–×™×”×•×™</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×‘×›×™×ª×” ×™×© 25 ×™×œ×“×™×. 12 ×‘× ×™× ×•-13 ×‘× ×•×ª. ×”×›×™×ª×” ×‘×§×•××” ×©× ×™×™×”. ×›××” ×‘× ×•×ª ×‘×›×™×ª×”?</p>
                    <div class="steps">
                        <p><strong>× ×™×ª×•×—:</strong></p>
                        <p>âœ“ ××™×“×¢ ×—×©×•×‘: 13 ×‘× ×•×ª</p>
                        <p>âœ— ××™×“×¢ ××™×•×ª×¨: ×¡×”"×› 25 ×™×œ×“×™×, 12 ×‘× ×™×, ×§×•××” ×©× ×™×™×”</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 13 ×‘× ×•×ª (×”×ª×©×•×‘×” ×›×‘×¨ ×‘×©××œ×”!)</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 4: ××™×“×¢ ×—×¡×¨ - ×–×™×”×•×™</h3>
                    <p><strong>×‘×¢×™×”:</strong> ×¨×—×œ ×§× ×ª×” 4 ××—×‘×¨×•×ª. ×›××” ×›×¡×£ ×”×™×” ×œ×” ×‘×”×ª×—×œ×”?</p>
                    <div class="steps">
                        <p><strong>× ×™×ª×•×—:</strong></p>
                        <p>âœ“ ×™×© ×œ× ×•: ×§× ×ª×” 4 ××—×‘×¨×•×ª</p>
                        <p>âœ— ×—×¡×¨: ××—×™×¨ ×”××—×‘×¨×ª ×•×›××” × ×©××¨ ×œ×”</p>
                        <p><strong>××¡×§× ×”:</strong> ××™ ××¤×©×¨ ×œ×¤×ª×•×¨ - ×—×¡×¨ ××™×“×¢!</p>
                    </div>
                </div>
                
                <div class="strategy-box">
                    <h4>ğŸ¯ ××™×š ×œ×–×”×•×ª ××™×“×¢ ×—×¡×¨ ××• ××™×•×ª×¨?</h4>
                    <p><strong>×©×œ×‘ 1:</strong> ××” ×”×©××œ×”? (××” ×¦×¨×™×š ×œ××¦×•×?)</p>
                    <p><strong>×©×œ×‘ 2:</strong> ××™×œ×• × ×ª×•× ×™× ×™×© ×œ×™?</p>
                    <p><strong>×©×œ×‘ 3:</strong> ××™×œ×• × ×ª×•× ×™× ×× ×™ ×¦×¨×™×š?</p>
                    <p><strong>×©×œ×‘ 4:</strong> ×”×× ×™×© ××™×“×¢ ×©×œ× ×¢×•×–×¨? = ××™×•×ª×¨</p>
                    <p><strong>×©×œ×‘ 5:</strong> ×”×× ×—×¡×¨ ××©×”×•? = ××™×“×¢ ×—×¡×¨</p>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px;">
                    <h3 style="color: white; margin-bottom: 15px; font-size: 1.5em;">âœ¨ ×‘×•××• × ×ª×¨×’×œ!</h3>
                    <p style="color: white; font-size: 1.2em; margin-bottom: 20px;">×–×”×• ××™×“×¢ ×—×¡×¨ ××• ××™×•×ª×¨</p>
                    <button class="tab" data-tab="game3" style="font-size: 1.3em; padding: 18px 40px;">ğŸ¯ ×œ××©×—×§ ×–×™×”×•×™ ××™×“×¢</button>
                </div>
            </div>
        </div>
        
        <!-- ××©×—×§ 3 -->
        <div id="game3" class="content">
            <div class="game">
                <h2>××©×—×§ ×–×™×”×•×™ ××™×“×¢ ×—×¡×¨/××™×•×ª×¨</h2>
                <div class="question-counter">×©××œ×” <span id="q-count3">1</span> ××ª×•×š 10</div>
                <div class="score">× ×™×§×•×“: <span id="score3">0</span></div>
                <div class="problem-display" id="problem3">×˜×•×¢×Ÿ...</div>
                <div id="choices3" class="multiple-choice"></div>
                <div id="feedback3"></div>
                <div id="round-end3" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
var scores = {1: 0, 2: 0, 3: 0};
var currentQuestion = {1: 0, 2: 0, 3: 0};
var questionBank = {1: [], 2: [], 3: []};
var gameData = {1: {}, 2: {}, 3: {}};
var answerLocked = {1: false, 2: false, 3: false};

function generateQ1TypeBased(typeNum) {
    var questions = [
        { text: '×œ×©×¨×” ×™×© 12 ××“×‘×§×•×ª. ×œ× ×•×¢×” ×™×© ×¤×™ 2 ×™×•×ª×¨. ×›××” ××“×‘×§×•×ª ×™×© ×œ×©×ª×™×”×Ÿ ×‘×™×—×“?', answer: 36 },
        { text: '××•×¨×” ×§× ×ª×” 40 ×¢×¤×¨×•× ×•×ª. ×—×™×œ×§×” 5 ×œ×›×œ ×ª×œ××™×“. × ×©××¨×• ×œ×” 10. ×›××” ×ª×œ××™×“×™× ×§×™×‘×œ×• ×¢×¤×¨×•× ×•×ª?', answer: 6 },
        { text: '×¨×›×‘×ª × ×•×¡×¢×ª 60 ×§×"×©. ×›××” ×§×™×œ×•××˜×¨×™× ×”×™× ×ª×¢×‘×•×¨ ×‘-3 ×©×¢×•×ª?', answer: 180 },
        { text: '×‘×¡×œ ×™×© 24 ×ª×¤×•×—×™×. ×›×œ ×™×œ×“ ××§×‘×œ 4 ×ª×¤×•×—×™×. ×›××” ×™×œ×“×™× ×™×§×‘×œ×• ×ª×¤×•×—×™×?', answer: 6 },
        { text: '×“× ×™ ×—×¡×š 8 ×©×§×œ ×‘×©×‘×•×¢. ×›××” ×™×—×¡×•×š ×‘-5 ×©×‘×•×¢×•×ª?', answer: 40 },
        { text: '×‘×—× ×•×ª ×”×™×• 50 ×‘×œ×•× ×™×. ××›×¨×• 23. ×›××” × ×©××¨×•?', answer: 27 },
        { text: '×™×© 18 ×¢×•×’×™×•×ª. ××—×œ×§×™× ×©×•×•×” ×œ-3 ×™×œ×“×™×. ×›××” ×™×§×‘×œ ×›×œ ××—×“?', answer: 6 },
        { text: '×¨×—×œ ×‘×ª 9. ××× ××‘×•×’×¨×ª ××× ×” ×¤×™ 4. ×‘×Ÿ ×›××” ×××?', answer: 36 },
        { text: '×‘×›×™×ª×” 28 ×ª×œ××™×“×™×. 15 ×‘× ×™×. ×›××” ×‘× ×•×ª?', answer: 13 },
        { text: '×‘×’×Ÿ ×—×™×•×ª: 12 ×§×•×¤×™×, 8 ××¨×™×•×ª, 15 ×¤×™×œ×™×. ×›××” ×—×™×•×ª ×‘×¡×š ×”×›×œ?', answer: 35 }
    ];
    return questions[typeNum % questions.length];
}

function generateQ2TypeBased(typeNum) {
    var questions = [
        { text: '×™×•×¡×™ ×’×“×•×œ ××¨×•× ×” ×‘-4 ×©× ×™×. ×œ×¨×•× ×” 7 ×©× ×™×. ×‘×¢×•×“ ×›××” ×©× ×™× ×™×”×™×” ×œ×™×•×¡×™ 15?', answer: 4 },
        { text: '×× ×›×œ ×›×œ×‘ ××•×›×œ 3 ×¢×¦××•×ª ×‘×™×•×, ×•×™×© 4 ×›×œ×‘×™×, ×›××” ×¢×¦××•×ª × ×¦×˜×¨×š ×œ-2 ×™××™×?', answer: 24 },
        { text: '××©×¤×—×”: ××‘×, ××× ×•-3 ×™×œ×“×™×. ×›××” ×¨×’×œ×™×™× ×™×© ×œ×›×•×œ× ×‘×™×—×“?', answer: 10 },
        { text: '×‘×›×œ ×§×•×¤×¡×” 6 ×‘×™×¦×™×. ×™×© 5 ×§×•×¤×¡××•×ª. ×›××” ×‘×™×¦×™× ×‘×¡×š ×”×›×œ?', answer: 30 },
        { text: '×“× ×™ ×”×ª×—×™×œ ×¢× 50 ×©×§×œ. ×”×•×¦×™× 15 ×©×§×œ ×¢×œ ×¡×¤×¨ ×•-12 ×©×§×œ ×¢×œ ××©×—×§. ×›××” × ×©××¨ ×œ×•?', answer: 23 },
        { text: '××•×˜×•×‘×•×¡ ×¢× 40 ××§×•××•×ª. ×¢×œ×• 28 ×× ×©×™×. ×›××” ××§×•××•×ª ×¤× ×•×™×™×?', answer: 12 },
        { text: '×œ×©×œ×•×©×” ××—×™× ×‘×™×—×“ 27 ×©× ×™×. ×›×œ ××—×“ ×‘×Ÿ ××•×ª×• ×’×™×œ. ×‘×Ÿ ×›××” ×›×œ ××—×“?', answer: 9 },
        { text: '×‘×—×¦×¨ 8 ×¢×•×¤×•×ª ×•-5 ×›×œ×‘×™×. ×›××” ×¨×’×œ×™×™× ×™×© ×œ×›×•×œ×? (×¢×•×£ = 2 ×¨×’×œ×™×™×, ×›×œ×‘ = 4)', answer: 36 },
        { text: '×ª××¨ ×§×¨××” 15 ×¢××•×“×™× ×‘×™×•× ×¨××©×•×Ÿ, 20 ×‘×™×•× ×©× ×™ ×•-18 ×‘×™×•× ×©×œ×™×©×™. ×›××” ×¢××•×“×™× ×‘×¡×š ×”×›×œ?', answer: 53 },
        { text: '××¡×¤×¨ ×©×× ×›×•×¤×œ×™× ××•×ª×• ×‘-5 ××§×‘×œ×™× 45. ××”×• ×”××¡×¤×¨?', answer: 9 }
    ];
    return questions[typeNum % questions.length];
}

function generateQ3TypeBased(typeNum) {
    var questions = [
        { text: '×‘×—× ×•×ª ×™×© 30 ×©×•×§×•×œ×“×™× ×‘××—×™×¨ 4 ×©×§×œ, 20 ×¡×•×›×¨×™×•×ª ×‘××—×™×¨ 2 ×©×§×œ. ×›××” ×××ª×§×™× ×‘×—× ×•×ª?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨ - 50 ×××ª×§×™×', '×™×© ××™×“×¢ ××™×•×ª×¨ - ×”××—×™×¨×™×', '×—×¡×¨ ××™×“×¢'], answer: 1 },
        { text: '×“× ×™ ×¨×¥ 5 ×§×™×œ×•××˜×¨. ×”×•× ×”×ª×—×™×œ ×‘×©×¢×” 8:00. ×›××” ×–××Ÿ ×œ×§×— ×œ×•?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨', '×™×© ××™×“×¢ ××™×•×ª×¨', '×—×¡×¨ ××™×“×¢ - ×”××”×™×¨×•×ª'], answer: 2 },
        { text: '×‘×›×™×ª×” 25 ×ª×œ××™×“×™×. ×™×© 12 ×‘× ×™×. ×”×›×™×ª×” ×‘×§×•××” ×©× ×™×™×”. ×›××” ×‘× ×•×ª?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨ - 13 ×‘× ×•×ª', '×™×© ××™×“×¢ ××™×•×ª×¨ - ×”×§×•××”', '×—×¡×¨ ××™×“×¢'], answer: 1 },
        { text: '×¨×—×œ ×§× ×ª×” 6 ××—×‘×¨×•×ª. ×›××” ×›×¡×£ ×”×™×” ×œ×” ×‘×”×ª×—×œ×”?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨', '×™×© ××™×“×¢ ××™×•×ª×¨', '×—×¡×¨ ××™×“×¢ - ××—×™×¨ ×•×›××” × ×©××¨'], answer: 2 },
        { text: '×‘×’×Ÿ 15 ×™×œ×“×™×. ×›×œ ×™×œ×“ ××•×›×œ 2 ×¢×•×’×™×•×ª. ×”××•×¨×” ×§× ×ª×” 40 ×¢×•×’×™×•×ª. ×›××” ×¢×•×’×™×•×ª × ×©××¨×•?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨ - 10 ×¢×•×’×™×•×ª', '×™×© ××™×“×¢ ××™×•×ª×¨', '×—×¡×¨ ××™×“×¢'], answer: 0 },
        { text: '××•×˜×•×‘×•×¡ × ×•×¡×¢ ××ª×œ ××‘×™×‘ ×œ×™×¨×•×©×œ×™×. ×™×© ×‘×• 35 ××•×©×‘×™×. ×›××” ×–××Ÿ ×”× ×¡×™×¢×”?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨', '×™×© ××™×“×¢ ××™×•×ª×¨ - ×”××•×©×‘×™×', '×—×¡×¨ ××™×“×¢ - ××”×™×¨×•×ª ××• ××¨×—×§'], answer: 2 },
        { text: '×—× ×•×ª ××›×¨×” 45 ×‘×œ×•× ×™× ××“×•××™×, 30 ×›×—×•×œ×™× ×•-25 ×™×¨×•×§×™×. ×”××—×™×¨ 3 ×©×§×œ. ×›××” ×‘×œ×•× ×™× × ××›×¨×•?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨ - 100 ×‘×œ×•× ×™×', '×™×© ××™×“×¢ ××™×•×ª×¨ - ×”××—×™×¨', '×—×¡×¨ ××™×“×¢'], answer: 1 },
        { text: '×™×•×¡×™ ×©×—×” ×‘×‘×¨×™×›×”. ×”×‘×¨×™×›×” ×¢××•×§×” 2 ××˜×¨. ×›××” ×”×§×¤×•×ª ×©×—×”?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨', '×™×© ××™×“×¢ ××™×•×ª×¨ - ×”×¢×•××§', '×—×¡×¨ ××™×“×¢ - ×›××” ×”×§×¤×•×ª'], answer: 2 },
        { text: '××©×¤×—×” ×˜×™×™×œ×” 120 ×§"×. ×”×¨×›×‘ ×©×œ×”× ××“×•×. ×”× ×”×ª×—×™×œ×• ×‘×©×¢×” 9:00 ×•×”×’×™×¢×• ×‘×©×¢×” 11:00. ×›××” ×–××Ÿ × ×¡×¢×•?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨ - ×©×¢×ª×™×™×', '×™×© ××™×“×¢ ××™×•×ª×¨ - ×¦×‘×¢ ×”×¨×›×‘ ×•××¨×—×§', '×—×¡×¨ ××™×“×¢'], answer: 1 },
        { text: '×‘×¡×¤×¨×™×™×” 350 ×¡×¤×¨×™×. ×›×œ ×™×•× ×œ×•×•×™× 15 ×¡×¤×¨×™×. ×›××” ×¡×¤×¨×™× × ×©××¨×•?', choices: ['××¤×©×¨ ×œ×¤×ª×•×¨', '×™×© ××™×“×¢ ××™×•×ª×¨', '×—×¡×¨ ××™×“×¢ - ×›××” ×™××™×'], answer: 2 }
    ];
    return questions[typeNum % questions.length];
}

function initGame(g) {
    questionBank[g] = [];
    var typeOrder = [];
    for (var i = 0; i < 10; i++) typeOrder.push(i);
    typeOrder.sort(function() { return Math.random() - 0.5; });
    for (var i = 0; i < 10; i++) {
        var newQ;
        if (g === 1) newQ = generateQ1TypeBased(typeOrder[i]);
        else if (g === 2) newQ = generateQ2TypeBased(typeOrder[i]);
        else newQ = generateQ3TypeBased(typeOrder[i]);
        questionBank[g].push(newQ);
    }
    nextQ(g);
}

function nextQ(g) {
    if (currentQuestion[g] >= 10) {
        var feedbackEl = document.getElementById('feedback' + g);
        if (feedbackEl) feedbackEl.innerHTML = '';
        showEnd(g);
        return;
    }
    answerLocked[g] = false;
    gameData[g] = questionBank[g][currentQuestion[g]];
    document.getElementById('q-count' + g).textContent = currentQuestion[g] + 1;
    document.getElementById('problem' + g).innerHTML = gameData[g].text;
    document.getElementById('feedback' + g).innerHTML = '';
    
    if (g === 3) {
        var choicesDiv = document.getElementById('choices' + g);
        choicesDiv.innerHTML = '';
        for (var i = 0; i < gameData[g].choices.length; i++) {
            var btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.textContent = gameData[g].choices[i];
            btn.setAttribute('data-index', i);
            btn.onclick = function() {
                if (answerLocked[3]) return;
                var allBtns = document.querySelectorAll('.choice-btn');
                for (var j = 0; j < allBtns.length; j++) allBtns[j].classList.remove('selected');
                this.classList.add('selected');
                checkAns(3, parseInt(this.getAttribute('data-index')));
            };
            choicesDiv.appendChild(btn);
        }
    } else {
        var answerEl = document.getElementById('answer' + g);
        if (answerEl) answerEl.value = '';
    }
}

function checkAns(g, choiceIndex) {
    if (answerLocked[g]) return;
    var isCorrect = false;
    if (g === 3) {
        isCorrect = (choiceIndex === gameData[g].answer);
    } else {
        var answerEl = document.getElementById('answer' + g);
        var ans = parseFloat(answerEl.value);
        if (isNaN(ans)) return;
        isCorrect = (ans === gameData[g].answer);
    }
    answerLocked[g] = true;
    currentQuestion[g]++;
    if (isCorrect) {
        scores[g]++;
        playSound('correct');
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback correct">× ×›×•×Ÿ ××¢×•×œ×”! âœ”</div>';
    } else {
        playSound('incorrect');
        var correctText = g === 3 ? gameData[g].choices[gameData[g].answer] : gameData[g].answer;
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback incorrect">×œ× × ×›×•×Ÿ. ×ª×©×•×‘×” × ×›×•× ×”: ' + correctText + '</div>';
    }
    document.getElementById('score' + g).textContent = scores[g];
    
    setTimeout(function() {
        var feedbackEl = document.getElementById('feedback' + g);
        if (feedbackEl) {
            feedbackEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }, 100);
    
    setTimeout(function() { nextQ(g); }, 3000);
}

function showEnd(g) {
    var roundEndEl = document.getElementById('round-end' + g);
    var problemEl = document.getElementById('problem' + g);
    var feedbackEl = document.getElementById('feedback' + g);
    if (g === 3) {
        var choicesEl = document.getElementById('choices' + g);
        if (choicesEl) choicesEl.style.display = 'none';
    } else {
        var controlsEl = document.querySelector('.controls');
        if (controlsEl) controlsEl.style.display = 'none';
    }
    if (!roundEndEl || !problemEl) return;
    if (feedbackEl) {
        feedbackEl.innerHTML = '';
        feedbackEl.style.display = 'none';
    }
    var pct = Math.round((scores[g] / 10) * 100);
    var msg = pct >= 80 ? '××¢×•×œ×”! ğŸŒŸ' : pct >= 60 ? '×™×¤×” ×××•×“! ğŸ‘' : '×›×œ ×”×›×‘×•×“! ×”××©×š ×œ×”×ª×××Ÿ! ğŸ’ª';
    roundEndEl.innerHTML = '<div class="round-complete"><h3>×¡×™×™××ª!</h3><p>' + msg + '</p><p>×¦×™×•×Ÿ: ' + scores[g] + '/10 (' + pct + '%)</p><button class="new-round-btn" onclick="resetGame(' + g + ')">×¡×™×‘×•×‘ × ×•×¡×£</button></div>';
    roundEndEl.style.display = 'block';
    problemEl.style.display = 'none';
}

function resetGame(g) {
    scores[g] = 0;
    currentQuestion[g] = 0;
    answerLocked[g] = false;
    questionBank[g] = [];
    var scoreEl = document.getElementById('score' + g);
    var roundEndEl = document.getElementById('round-end' + g);
    var feedbackEl = document.getElementById('feedback' + g);
    var problemEl = document.getElementById('problem' + g);
    if (scoreEl) scoreEl.textContent = '0';
    if (roundEndEl) roundEndEl.style.display = 'none';
    if (feedbackEl) {
        feedbackEl.innerHTML = '';
        feedbackEl.style.display = 'block';
    }
    if (problemEl) problemEl.style.display = 'block';
    if (g === 3) {
        var choicesEl = document.getElementById('choices' + g);
        if (choicesEl) choicesEl.style.display = 'block';
    } else {
        var controlsEl = document.querySelector('.controls');
        if (controlsEl) controlsEl.style.display = 'block';
        var answerEl = document.getElementById('answer' + g);
        if (answerEl) answerEl.value = '';
    }
    initGame(g);
}

window.onload = function() {
    var tabs = document.querySelectorAll('.tab');
    for (var i = 0; i < tabs.length; i++) {
        tabs[i].onclick = function() {
            playSound('click');
            var tabId = this.getAttribute('data-tab');
            var allContent = document.querySelectorAll('.content');
            var allTabs = document.querySelectorAll('.tab');
            for (var j = 0; j < allContent.length; j++) allContent[j].classList.remove('active');
            for (var k = 0; k < allTabs.length; k++) allTabs[k].classList.remove('active');
            document.getElementById(tabId).classList.add('active');
            this.classList.add('active');
            if (tabId === 'game1' || tabId === 'game2' || tabId === 'game3') {
                var gameNum = parseInt(tabId.replace('game', ''));
                scores[gameNum] = 0;
                currentQuestion[gameNum] = 0;
                answerLocked[gameNum] = false;
                questionBank[gameNum] = [];
                document.getElementById('score' + gameNum).textContent = '0';
                document.getElementById('round-end' + gameNum).style.display = 'none';
                document.getElementById('problem' + gameNum).style.display = 'block';
                document.getElementById('feedback' + gameNum).innerHTML = '';
                document.getElementById('feedback' + gameNum).style.display = 'block';
                if (gameNum === 3) {
                    document.getElementById('choices' + gameNum).style.display = 'block';
                } else {
                    var answerEl = document.getElementById('answer' + gameNum);
                    if (answerEl) answerEl.value = '';
                    var controlsEl = document.querySelector('#game' + gameNum + ' .controls');
                    if (controlsEl) controlsEl.style.display = 'block';
                }
                setTimeout(function() { initGame(gameNum); }, 50);
            }
        };
    }
    document.addEventListener('wheel', function(e) {
        if (document.activeElement.type === 'number') document.activeElement.blur();
    });
};

function playSound(type) {
    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    if (type === 'click') {
        var osc = audioContext.createOscillator();
        var gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.type = 'sine';
        osc.frequency.value = 600;
        gain.gain.setValueAtTime(0.15, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + 0.15);
    } else if (type === 'correct') {
        var notes = [523.25, 659.25, 783.99];
        for (var i = 0; i < notes.length; i++) {
            var osc = audioContext.createOscillator();
            var gain = audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);
            osc.type = 'sine';
            osc.frequency.value = notes[i];
            gain.gain.setValueAtTime(0.1, audioContext.currentTime + i * 0.1);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.1 + 0.3);
            osc.start(audioContext.currentTime + i * 0.1);
            osc.stop(audioContext.currentTime + i * 0.1 + 0.3);
        }
    } else if (type === 'incorrect') {
        var osc = audioContext.createOscillator();
        var gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.type = 'sine';
        osc.frequency.value = 200;
        gain.gain.setValueAtTime(0.15, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + 0.3);
    }
}
    </script>
</body>
</html>