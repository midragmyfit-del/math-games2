<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ›ï¸ ××©×—×§ ×”×œ×§×•×—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        /* ××¡×š ×”×ª×—×œ×” */
        .start-screen {
            text-align: center;
        }

        .difficulty-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .diff-btn {
            padding: 20px 40px;
            font-size: 1.3em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .diff-btn.easy {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: #2c5f2d;
        }

        .diff-btn.medium {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            color: #4a1942;
        }

        .diff-btn.hard {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #7c2d12;
        }

        .diff-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        /* ×œ×•×— × ×™×§×•×“ */
        .scoreboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .team {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 15px;
            color: white;
            text-align: center;
        }

        .team.blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .team.red {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .team.active {
            box-shadow: 0 0 30px rgba(255,255,255,0.6);
            transform: scale(1.05);
        }

        .team-name {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .team-score {
            font-size: 3em;
            font-weight: bold;
        }

        /* ××–×•×¨ ×”××©×—×§ */
        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        .round-info {
            text-align: center;
            font-size: 1.3em;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .turn-indicator {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            color: white;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: pulse 1.5s infinite;
        }

        .turn-indicator.blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .turn-indicator.red {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        /* ×“××•×ª ×”×œ×§×•×— */
        .customer {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .customer-icon {
            font-size: 4em;
            margin-bottom: 15px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .customer-speech {
            font-size: 1.4em;
            color: #333;
            font-weight: bold;
            line-height: 1.6;
        }

        /* ×ª×¤×¨×™×˜ ×”××—×™×¨×™× */
        .price-menu {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .menu-title {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .price-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .price-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .item-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .item-price {
            font-weight: bold;
            color: #667eea;
        }

        /* ×ª×©×•×‘×•×ª */
        .answers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .answer-btn {
            padding: 20px;
            font-size: 1.5em;
            border: 3px solid #667eea;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            color: #333;
        }

        .answer-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .answer-btn.correct {
            background: #4ade80;
            color: white;
            border-color: #4ade80;
            animation: pulse 0.5s;
        }

        .answer-btn.wrong {
            background: #f87171;
            color: white;
            border-color: #f87171;
            animation: shake 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* ×›×¤×ª×•×¨ ×”××©×š */
        .next-btn {
            display: none;
            margin: 20px auto;
            padding: 15px 40px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
        }

        .next-btn:hover {
            transform: scale(1.05);
        }

        /* ××¡×š × ×™×¦×—×•×Ÿ */
        .winner-screen {
            display: none;
            text-align: center;
        }

        .winner-screen.active {
            display: block;
        }

        .winner-icon {
            font-size: 6em;
            margin: 20px 0;
            animation: rotate 2s infinite linear;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .winner-text {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
        }

        .final-scores {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .restart-btn {
            padding: 20px 50px;
            font-size: 1.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
        }

        .restart-btn:hover {
            transform: scale(1.1);
        }

        .hidden {
            display: none;
        }

        /* ×œ×—×¦×Ÿ ×—×–×•×¨ ×œ×ª×¤×¨×™×˜ ×¨××©×™ */
        .back-to-menu-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .back-to-menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .back-to-menu-btn:active {
            transform: translateY(0);
        }

        .container {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›ï¸ ××©×—×§ ×”×œ×§×•×—</h1>
        <p class="subtitle">×§×‘×•×¦×” × ×’×“ ×§×‘×•×¦×” - ××™ ×™×¢×–×•×¨ ×œ×œ×§×•×— ×”×›×™ ××”×¨?</p>

        <!-- ××¡×š ×”×ª×—×œ×” -->
        <div class="start-screen" id="startScreen">
            <h2 style="margin: 30px 0;">×‘×—×¨×• ××¦×‘ ××©×—×§:</h2>
            
            <div style="display: flex; gap: 20px; justify-content: center; margin-bottom: 40px;">
                <button class="diff-btn medium" onclick="selectMode('teams')" style="font-size: 1.5em; padding: 25px 50px;">
                    ğŸ‘¥<br>×§×‘×•×¦×•×ª<br>(2 ×§×‘×•×¦×•×ª)
                </button>
                <button class="diff-btn easy" onclick="selectMode('single')" style="font-size: 1.5em; padding: 25px 50px;">
                    ğŸ¯<br>×©×—×§×Ÿ ×™×—×™×“<br>(×ª×¨×’×•×œ ××™×©×™)
                </button>
            </div>

            <div id="difficultySelection" style="display: none;">
                <h2 style="margin: 30px 0;">×‘×—×¨×• ×¨××ª ×§×•×©×™:</h2>
                <div class="difficulty-buttons">
                    <button class="diff-btn easy" onclick="startGame('easy')">
                        ğŸ˜Š<br>×§×œ<br>2 ×¤×¨×™×˜×™×
                    </button>
                    <button class="diff-btn medium" onclick="startGame('medium')">
                        ğŸ¤”<br>×‘×™× ×•× ×™<br>3 ×¤×¨×™×˜×™×
                    </button>
                    <button class="diff-btn hard" onclick="startGame('hard')">
                        ğŸ”¥<br>×§×©×”<br>4 ×¤×¨×™×˜×™×
                    </button>
                </div>
            </div>
        </div>

        <!-- ××–×•×¨ ×”××©×—×§ -->
        <div class="game-area" id="gameArea">
            <button class="back-to-menu-btn" onclick="backToMenu()">â† ×—×–×•×¨ ×œ×ª×¤×¨×™×˜</button>
            
            <!-- ×œ×•×— × ×™×§×•×“ -->
            <div class="scoreboard" id="scoreboard">
                <div class="team blue" id="team1">
                    <div class="team-name">ğŸ”µ ×§×‘×•×¦×” 1</div>
                    <div class="team-score" id="score1">0</div>
                </div>
                <div class="team red" id="team2">
                    <div class="team-name">ğŸ”´ ×§×‘×•×¦×” 2</div>
                    <div class="team-score" id="score2">0</div>
                </div>
            </div>

            <!-- × ×™×§×•×“ ×©×—×§×Ÿ ×™×—×™×“ -->
            <div class="scoreboard" id="singleScoreboard" style="display: none;">
                <div class="team blue" style="grid-column: 1 / -1;">
                    <div class="team-name">ğŸ¯ ×”× ×™×§×•×“ ×©×œ×š</div>
                    <div class="team-score" id="singleScore">0</div>
                </div>
            </div>

            <div class="round-info" id="roundInfo">×¡×™×‘×•×‘ 1 ××ª×•×š 10</div>

            <div class="turn-indicator blue" id="turnIndicator">
                ğŸ”µ ×ª×•×¨ ×§×‘×•×¦×” 1!
            </div>

            <!-- ×“××•×ª ×”×œ×§×•×— -->
            <div class="customer">
                <div class="customer-icon" id="customerIcon">ğŸ‘¨</div>
                <div class="customer-speech" id="customerSpeech">
                    ×©×œ×•×! ×× ×™ ××—×›×”...
                </div>
            </div>

            <!-- ×ª×¤×¨×™×˜ ××—×™×¨×™× -->
            <div class="price-menu">
                <div class="menu-title">ğŸ“‹ ×ª×¤×¨×™×˜ ××—×™×¨×™×</div>
                <div class="price-list" id="priceList"></div>
            </div>

            <!-- ×ª×©×•×‘×•×ª -->
            <div class="answers" id="answers"></div>

            <button class="next-btn" id="nextBtn" onclick="nextRound()">
                ×¡×™×‘×•×‘ ×”×‘× â¬…ï¸
            </button>
        </div>

        <!-- ××¡×š × ×™×¦×—×•×Ÿ -->
        <div class="winner-screen" id="winnerScreen">
            <div class="winner-icon">ğŸ†</div>
            <div class="winner-text" id="winnerText"></div>
            <div class="final-scores" id="finalScores">
                <div class="team blue">
                    <div class="team-name">ğŸ”µ ×§×‘×•×¦×” 1</div>
                    <div class="team-score" id="finalScore1">0</div>
                </div>
                <div class="team red">
                    <div class="team-name">ğŸ”´ ×§×‘×•×¦×” 2</div>
                    <div class="team-score" id="finalScore2">0</div>
                </div>
            </div>
            <button class="restart-btn" onclick="location.reload()">
                ğŸ”„ ××©×—×§ ×—×“×©
            </button>
        </div>
    </div>

    <script>
        // ×¦×œ×™×œ×™× ××©×•×¤×¨×™×
        const sounds = {
            correct: () => {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // ×¦×œ×™×œ × ×™×¦×—×•×Ÿ ×× ×’×™× ×ª×™ - 4 ×¦×œ×™×œ×™× ×¢×•×œ×™× ×¢× ×”×¨××•× ×™×”
                const melody = [
                    { freq: 523.25, time: 0 },      // C5
                    { freq: 659.25, time: 0.2 },    // E5
                    { freq: 783.99, time: 0.4 },    // G5
                    { freq: 1046.50, time: 0.6 }    // C6
                ];
                
                melody.forEach(note => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = note.freq;
                    oscillator.type = 'sine';
                    
                    const startTime = audioContext.currentTime + note.time;
                    gainNode.gain.setValueAtTime(0.25, startTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.5);
                    
                    oscillator.start(startTime);
                    oscillator.stop(startTime + 0.5);
                });
            },
            wrong: () => {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // ×¦×œ×™×œ ×˜×¢×•×ª ×¨×š ×•× ×¢×™× - ×©× ×™ ×¦×œ×™×œ×™× ×¢×“×™× ×™×
                [523.25, 493.88].forEach((freq, i) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = freq;
                    oscillator.type = 'sine';  // ×’×œ ×¡×™× ×•×¡ ×¨×š
                    
                    const startTime = audioContext.currentTime + (i * 0.2);
                    gainNode.gain.setValueAtTime(0.15, startTime);  // ×¢×•×¦××” × ××•×›×” ×™×•×ª×¨
                    gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.4);
                    
                    oscillator.start(startTime);
                    oscillator.stop(startTime + 0.4);
                });
            }
        };

        // ×¤×¨×™×˜×™ ×”×—× ×•×ª
        const allItems = [
            { name: '×“×•×‘×™', icon: 'ğŸ§¸', minPrice: 5, maxPrice: 15 },
            { name: '×¢×™×¤×¨×•×Ÿ', icon: 'âœï¸', minPrice: 2, maxPrice: 8 },
            { name: '××—×‘×¨×ª', icon: 'ğŸ“š', minPrice: 4, maxPrice: 12 },
            { name: '×¦×‘×¢×™×', icon: 'ğŸ¨', minPrice: 6, maxPrice: 15 },
            { name: '×›×“×•×¨', icon: 'âš½', minPrice: 8, maxPrice: 20 },
            { name: '×‘×•×‘×”', icon: 'ğŸ‘¸', minPrice: 10, maxPrice: 25 },
            { name: '××›×•× ×™×ª', icon: 'ğŸš—', minPrice: 12, maxPrice: 30 },
            { name: '×¡×¤×¨', icon: 'ğŸ“–', minPrice: 5, maxPrice: 15 },
            { name: '××©×—×§', icon: 'ğŸ®', minPrice: 15, maxPrice: 35 },
            { name: '×¤××–×œ', icon: 'ğŸ§©', minPrice: 7, maxPrice: 18 }
        ];

        const customers = ['ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¦', 'ğŸ‘§', 'ğŸ§‘', 'ğŸ‘´', 'ğŸ‘µ'];

        let gameState = {
            mode: '', // 'teams' or 'single'
            difficulty: '',
            itemsPerQuestion: 0,
            round: 1,
            maxRounds: 10,
            currentTeam: 1,
            scores: { team1: 0, team2: 0 },
            singlePlayerScore: 0,
            currentItems: [],
            currentPrices: {},
            correctAnswer: 0,
            answered: false
        };

        function backToMenu() {
            // ×”×¦×’×ª ××¡×š ×”×”×ª×—×œ×”
            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('gameArea').classList.remove('active');
            document.getElementById('winnerScreen').classList.remove('active');
            
            // ××™×¤×•×¡ ×”××©×—×§
            gameState = {
                mode: null,
                difficulty: null,
                round: 1,
                itemsPerQuestion: 2,
                maxRounds: 10,
                currentTeam: 1,
                scores: { team1: 0, team2: 0 },
                singlePlayerScore: 0,
                currentItems: [],
                currentPrices: {},
                correctAnswer: 0,
                answered: false
            };
            
            // ×’×œ×™×œ×” ×—×–×¨×” ×œ×¨××©
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function selectMode(mode) {
            gameState.mode = mode;
            document.getElementById('difficultySelection').style.display = 'block';
            window.scrollTo({ top: document.getElementById('difficultySelection').offsetTop - 100, behavior: 'smooth' });
        }

        function startGame(difficulty) {
            gameState.difficulty = difficulty;
            
            if (difficulty === 'easy') {
                gameState.itemsPerQuestion = 2;
            } else if (difficulty === 'medium') {
                gameState.itemsPerQuestion = 3;
            } else {
                gameState.itemsPerQuestion = 4;
            }

            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.add('active');
            
            // ×”×¦×’×”/×”×¡×ª×¨×” ×©×œ ××œ×× ×˜×™× ×œ×¤×™ ××¦×‘
            if (gameState.mode === 'single') {
                document.getElementById('scoreboard').style.display = 'none';
                document.getElementById('singleScoreboard').style.display = 'grid';
                document.getElementById('turnIndicator').style.display = 'none';
            } else {
                document.getElementById('scoreboard').style.display = 'grid';
                document.getElementById('singleScoreboard').style.display = 'none';
                document.getElementById('turnIndicator').style.display = 'block';
            }
            
            generateRound();
        }

        function generateRound() {
            gameState.answered = false;
            document.getElementById('nextBtn').style.display = 'none';
            
            // ×¢×“×›×•×Ÿ ×¡×™×‘×•×‘
            document.getElementById('roundInfo').textContent = 
                `×¡×™×‘×•×‘ ${gameState.round} ××ª×•×š ${gameState.maxRounds}`;
            
            // ×¢×“×›×•×Ÿ ××™× ×“×™×§×˜×•×¨ ×ª×•×¨ (×¨×§ ×‘××¦×‘ ×§×‘×•×¦×•×ª)
            if (gameState.mode === 'teams') {
                const turnIndicator = document.getElementById('turnIndicator');
                if (gameState.currentTeam === 1) {
                    turnIndicator.textContent = 'ğŸ”µ ×ª×•×¨ ×§×‘×•×¦×” 1!';
                    turnIndicator.className = 'turn-indicator blue';
                } else {
                    turnIndicator.textContent = 'ğŸ”´ ×ª×•×¨ ×§×‘×•×¦×” 2!';
                    turnIndicator.className = 'turn-indicator red';
                }
                
                // ×¢×“×›×•×Ÿ ×§×‘×•×¦×” ×¤×¢×™×œ×”
                document.getElementById('team1').classList.toggle('active', gameState.currentTeam === 1);
                document.getElementById('team2').classList.toggle('active', gameState.currentTeam === 2);
            }
            
            // ×‘×—×™×¨×ª ×¤×¨×™×˜×™× ××§×¨××™×™×
            const shuffled = [...allItems].sort(() => Math.random() - 0.5);
            gameState.currentItems = shuffled.slice(0, 6);
            
            // ×™×¦×™×¨×ª ××—×™×¨×™×
            gameState.currentPrices = {};
            gameState.currentItems.forEach(item => {
                const price = Math.floor(Math.random() * 
                    (item.maxPrice - item.minPrice + 1)) + item.minPrice;
                gameState.currentPrices[item.name] = price;
            });
            
            // ×”×¦×’×ª ×ª×¤×¨×™×˜ ××—×™×¨×™×
            const priceList = document.getElementById('priceList');
            priceList.innerHTML = '';
            gameState.currentItems.forEach(item => {
                priceList.innerHTML += `
                    <div class="price-item">
                        <div class="item-icon">${item.icon}</div>
                        <div>${item.name}</div>
                        <div class="item-price">${gameState.currentPrices[item.name]} â‚ª</div>
                    </div>
                `;
            });
            
            // ×‘×—×™×¨×ª ×¤×¨×™×˜×™× ×œ×©××œ×”
            const questionItems = [...gameState.currentItems]
                .sort(() => Math.random() - 0.5)
                .slice(0, gameState.itemsPerQuestion);
            
            // ×—×™×©×•×‘ ×ª×©×•×‘×” × ×›×•× ×”
            gameState.correctAnswer = questionItems.reduce((sum, item) => 
                sum + gameState.currentPrices[item.name], 0);
            
            // ×™×¦×™×¨×ª ××©×¤×˜ ×”×©××œ×”
            let itemsList = questionItems.map(item => item.name).join(' ×•');
            const customerSpeech = `×©×œ×•×! ×× ×™ ×¨×•×¦×” ×œ×§× ×•×ª ${itemsList}. ×›××” ×¢×œ×™×™ ×œ×©×œ×?`;
            
            // ×¢×“×›×•×Ÿ ×œ×§×•×—
            const customerIcon = customers[Math.floor(Math.random() * customers.length)];
            document.getElementById('customerIcon').textContent = customerIcon;
            document.getElementById('customerSpeech').textContent = customerSpeech;
            
            // ×™×¦×™×¨×ª ×ª×©×•×‘×•×ª
            generateAnswers();
        }

        function generateAnswers() {
            const correctAnswer = gameState.correctAnswer;
            const answers = [correctAnswer]; // ××ª×—×™×œ×™× ×¢× ×”×ª×©×•×‘×” ×”× ×›×•× ×”
            
            // ×™×¦×™×¨×ª ×ª×©×•×‘×•×ª ×©×’×•×™×•×ª - ×§×¨×•×‘×•×ª ×œ×ª×©×•×‘×” ×”× ×›×•× ×”
            const possibleOffsets = [-5, -4, -3, -2, -1, 1, 2, 3, 4, 5, -7, 7, -9, 9];
            const shuffledOffsets = possibleOffsets.sort(() => Math.random() - 0.5);
            
            for (let offset of shuffledOffsets) {
                if (answers.length >= 4) break;
                
                const wrongAnswer = correctAnswer + offset;
                // ×¨×§ ×ª×©×•×‘×•×ª ×—×™×•×‘×™×•×ª ×•×©××™× ×Ÿ ×–×”×•×ª ×œ×ª×©×•×‘×” ×”× ×›×•× ×”
                if (wrongAnswer > 0 && !answers.includes(wrongAnswer)) {
                    answers.push(wrongAnswer);
                }
            }
            
            // ×× ××™×Ÿ ××¡×¤×™×§ ×ª×©×•×‘×•×ª (××§×¨×” ×§×™×¦×•×Ÿ), × ×•×¡×™×£ ×ª×©×•×‘×•×ª ××§×¨××™×•×ª
            while (answers.length < 4) {
                const randomAnswer = Math.floor(Math.random() * (correctAnswer * 2)) + 1;
                if (!answers.includes(randomAnswer)) {
                    answers.push(randomAnswer);
                }
            }
            
            // ×¢×¨×‘×•×‘ ×”×ª×©×•×‘×•×ª
            const answersArray = answers.sort(() => Math.random() - 0.5);
            
            // ×”×¦×’×ª ×ª×©×•×‘×•×ª
            const answersDiv = document.getElementById('answers');
            answersDiv.innerHTML = '';
            answersArray.forEach(answer => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = `${answer} â‚ª`;
                btn.onclick = () => checkAnswer(answer, btn);
                answersDiv.appendChild(btn);
            });
        }

        function checkAnswer(answer, btn) {
            if (gameState.answered) return;
            
            gameState.answered = true;
            
            // ×”×©×‘×ª×ª ×›×œ ×”×›×¤×ª×•×¨×™×
            document.querySelectorAll('.answer-btn').forEach(b => {
                b.disabled = true;
                if (parseInt(b.textContent) === gameState.correctAnswer) {
                    b.classList.add('correct');
                }
            });
            
            if (answer === gameState.correctAnswer) {
                btn.classList.add('correct');
                sounds.correct();
                
                // ×”×•×¡×¤×ª × ×§×•×“×•×ª
                if (gameState.mode === 'teams') {
                    const teamKey = `team${gameState.currentTeam}`;
                    gameState.scores[teamKey] += 10;
                    document.getElementById(`score${gameState.currentTeam}`).textContent = 
                        gameState.scores[teamKey];
                } else {
                    gameState.singlePlayerScore += 10;
                    document.getElementById('singleScore').textContent = gameState.singlePlayerScore;
                }
            } else {
                btn.classList.add('wrong');
                sounds.wrong();
            }
            
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextRound() {
            if (gameState.round >= gameState.maxRounds) {
                showWinner();
                return;
            }
            
            // ×’×œ×™×œ×” ×—×œ×§×” ×œ××¢×œ×”
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            
            gameState.round++;
            
            // ×¨×§ ×‘××¦×‘ ×§×‘×•×¦×•×ª - ×”×—×œ×¤×ª ×ª×•×¨
            if (gameState.mode === 'teams') {
                gameState.currentTeam = gameState.currentTeam === 1 ? 2 : 1;
            }
            
            // ×”××ª× ×” ×§×¦×¨×” ×œ×’×œ×™×œ×” ×•××– ×™×¦×™×¨×ª ×”×¡×™×‘×•×‘ ×”×—×“×©
            setTimeout(() => {
                generateRound();
            }, 300);
        }

        function showWinner() {
            document.getElementById('gameArea').classList.remove('active');
            document.getElementById('winnerScreen').classList.add('active');
            
            if (gameState.mode === 'teams') {
                // ××¦×‘ ×§×‘×•×¦×•×ª
                document.getElementById('finalScore1').textContent = gameState.scores.team1;
                document.getElementById('finalScore2').textContent = gameState.scores.team2;
                document.getElementById('finalScores').style.display = 'grid';
                
                let winnerText = '';
                if (gameState.scores.team1 > gameState.scores.team2) {
                    winnerText = 'ğŸ”µ ×§×‘×•×¦×” 1 × ×™×¦×—×”! ğŸ‰';
                } else if (gameState.scores.team2 > gameState.scores.team1) {
                    winnerText = 'ğŸ”´ ×§×‘×•×¦×” 2 × ×™×¦×—×”! ğŸ‰';
                } else {
                    winnerText = 'ğŸ¤ ×ª×™×§×•! ×©×ª×™ ×”×§×‘×•×¦×•×ª ××¢×•×œ×•×ª! ğŸ‰';
                }
                
                document.getElementById('winnerText').textContent = winnerText;
            } else {
                // ××¦×‘ ×©×—×§×Ÿ ×™×—×™×“
                document.getElementById('finalScores').style.display = 'none';
                
                const correctAnswers = gameState.singlePlayerScore / 10;
                const percentage = (correctAnswers / gameState.maxRounds) * 100;
                
                let emoji = '';
                let message = '';
                
                if (percentage === 100) {
                    emoji = 'ğŸ†ğŸŒŸ';
                    message = '××•×©×œ×! 10 ××ª×•×š 10!';
                } else if (percentage >= 80) {
                    emoji = 'ğŸ‰';
                    message = `××¦×•×™×Ÿ! ${correctAnswers} ××ª×•×š ${gameState.maxRounds} × ×›×•× ×•×ª!`;
                } else if (percentage >= 60) {
                    emoji = 'ğŸ‘';
                    message = `×™×¤×”! ${correctAnswers} ××ª×•×š ${gameState.maxRounds} × ×›×•× ×•×ª!`;
                } else if (percentage >= 40) {
                    emoji = 'ğŸ’ª';
                    message = `×œ× ×¨×¢! ${correctAnswers} ××ª×•×š ${gameState.maxRounds} × ×›×•× ×•×ª! ×ª×ª×××Ÿ ×¢×•×“ ×§×¦×ª!`;
                } else {
                    emoji = 'ğŸ“š';
                    message = `${correctAnswers} ××ª×•×š ${gameState.maxRounds} × ×›×•× ×•×ª. ×”××©×š ×œ×”×ª×××Ÿ!`;
                }
                
                document.getElementById('winnerText').innerHTML = `
                    <div style="font-size: 3em; margin: 20px 0;">${emoji}</div>
                    <div style="font-size: 1.8em; margin-bottom: 20px;">${message}</div>
                    <div style="font-size: 1.5em; color: #667eea;">×”× ×™×§×•×“ ×©×œ×š: ${gameState.singlePlayerScore}</div>
                `;
            }
        }
    </script>
</body>
</html>