<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×œ××“ ×œ×¦×™×™×¨ ×¢×•× ×•×ª ×•×—×’×™×</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .title {
            text-align: center;
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .main-container {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            flex-wrap: wrap;
            justify-content: center;
        }
        .canvas-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            flex: 1;
            min-width: 300px;
        }
        .canvas-title {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
        }
        canvas {
            border: 3px solid #667eea;
            border-radius: 15px;
            cursor: none;
            display: block;
            margin: 0 auto;
            background: white;
        }
        #cursor {
            position: fixed;
            border: 3px solid #fff;
            box-shadow: 0 0 0 2px #000, inset 0 0 0 2px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            display: none;
            transform: translate(-50%, -50%);
        }
        #cursor::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 1px;
            height: 10px;
            background: #000;
            box-shadow: 1px 0 0 #fff, -1px 0 0 #fff;
        }
        #cursor::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 1px;
            background: #000;
            box-shadow: 0 1px 0 #fff, 0 -1px 0 #fff;
        }
        .controls {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 300px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .control-section { text-align: center; }
        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        .instruction-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .step-counter {
            font-size: 1.1em;
            color: #666;
            margin-top: 10px;
        }
        .button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.5);
        }
        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }
        .nav-buttons { display: flex; gap: 10px; }
        .color-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            justify-items: center;
        }
        .color-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 3px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }
        .color-btn:hover { transform: scale(1.2); }
        .color-btn.selected {
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
            transform: scale(1.2);
        }
        .tool-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 10px;
        }
        .tool-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-size: 1.5em;
            transition: all 0.3s;
        }
        .tool-btn:hover { transform: scale(1.1); }
        .tool-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }
        .drawing-menu {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            max-width: 600px;
            width: 90%;
        }
        .drawing-menu.hidden { display: none; }
        .menu-title {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
        }
        .drawing-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .drawing-option {
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        .drawing-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: #667eea;
        }
        .drawing-icon { font-size: 3em; margin-bottom: 10px; }
        .drawing-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }
        .difficulty-stars {
            color: #FFD700;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .overlay.hidden { display: none; }
        .size-slider { width: 100%; margin: 10px 0; }
    </style>
</head>
<body>
    <div id="cursor"></div>
    <div class="overlay hidden" id="overlay"></div>
    
    <div class="drawing-menu" id="drawingMenu">
        <div class="menu-title">â„ï¸ ×‘×—×¨ ×¦×™×•×¨ ×—×’×™×’×™</div>
        <div class="drawing-options">
            <div class="drawing-option" onclick="selectDrawing('snowman')">
                <div class="drawing-icon">â›„</div>
                <div class="drawing-name">××™×© ×©×œ×’</div>
                <div class="difficulty-stars">â­â­â˜†â˜†â˜†</div>
            </div>
            <div class="drawing-option" onclick="selectDrawing('pumpkin')">
                <div class="drawing-icon">ğŸƒ</div>
                <div class="drawing-name">×“×œ×¢×ª ×”×œ×•×•×™×Ÿ</div>
                <div class="difficulty-stars">â­â­â­â˜†â˜†</div>
            </div>
            <div class="drawing-option" onclick="selectDrawing('hearts')">
                <div class="drawing-icon">ğŸ’•</div>
                <div class="drawing-name">×œ×‘×‘×•×ª ××”×‘×”</div>
                <div class="difficulty-stars">â­â­â˜†â˜†â˜†</div>
            </div>
            <div class="drawing-option" onclick="selectDrawing('sun')">
                <div class="drawing-icon">â˜€ï¸</div>
                <div class="drawing-name">×©××© ××—×™×™×›×ª</div>
                <div class="difficulty-stars">â­â˜†â˜†â˜†â˜†</div>
            </div>
        </div>
    </div>
    
    <div class="title">â„ï¸ ×œ××“ ×œ×¦×™×™×¨ ×¢×•× ×•×ª ×•×—×’×™× - ×©×œ×‘ ××—×¨ ×©×œ×‘! ğŸƒ</div>
    
    <div class="main-container">
        <div class="canvas-container">
            <div class="canvas-title">×”×“×•×’××” - ×¢×§×•×‘ ××—×¨×™ ×”×©×œ×‘×™× ğŸ‘€</div>
            <canvas id="exampleCanvas" width="400" height="400"></canvas>
        </div>
        
        <div class="controls">
            <div class="control-section">
                <div class="instruction-box" id="instruction">×‘×—×¨ ×¦×™×•×¨ ×—×’×™×’×™ ××”×ª×¤×¨×™×˜ ×›×“×™ ×œ×”×ª×—×™×œ!</div>
                <div class="step-counter" id="stepCounter"></div>
            </div>
            
            <div class="control-section">
                <div class="section-title">×›×œ×™× ğŸ› ï¸</div>
                <div class="tool-buttons">
                    <button class="tool-btn active" id="drawBtn" onclick="selectDrawTool()">âœï¸ ×¢×˜</button>
                    <button class="tool-btn" id="eraserBtn" onclick="selectEraser()">ğŸ§¹ ××—×§</button>
                </div>
            </div>
            
            <div class="control-section">
                <div class="section-title">×¦×‘×¢×™× ğŸ¨</div>
                <div class="color-palette" id="colorPalette"></div>
            </div>
            
            <div class="control-section">
                <div class="section-title">×¢×•×‘×™ ××›×—×•×œ</div>
                <input type="range" class="size-slider" id="brushSize" min="2" max="15" value="5">
            </div>
            
            <div class="control-section">
                <div class="nav-buttons">
                    <button class="button" id="prevBtn" onclick="prevStep()" disabled>â¬…ï¸ ×§×•×“×</button>
                    <button class="button" id="nextBtn" onclick="nextStep()" disabled>×”×‘× â¡ï¸</button>
                </div>
            </div>
            
            <button class="button" onclick="clearMyCanvas()">ğŸ—‘ï¸ × ×§×” ××ª ×”×¦×™×•×¨ ×©×œ×™</button>
            <button class="button" onclick="saveDrawing()">ğŸ’¾ ×©××•×¨ ××ª ×”×¦×™×•×¨ ×©×œ×™</button>
            <button class="button" onclick="showMenu()">ğŸ¨ ×‘×—×¨ ×¦×™×•×¨ ××—×¨</button>
        </div>
        
        <div class="canvas-container">
            <div class="canvas-title">×”×¦×™×•×¨ ×©×œ×š - ×¦×™×™×¨ ×›××Ÿ! âœï¸</div>
            <canvas id="myCanvas" width="400" height="400"></canvas>
        </div>
    </div>

    <script>
        const ex = document.getElementById('exampleCanvas');
        const my = document.getElementById('myCanvas');
        const exCtx = ex.getContext('2d');
        const myCtx = my.getContext('2d');
        const cursor = document.getElementById('cursor');
        
        let curr = null;
        let step = 0;
        let draw = false;
        let col = '#000000';
        let size = 5;
        let erase = false;
        
        function updCursor() {
            const s = erase ? size * 4 : size * 2;
            cursor.style.width = s + 'px';
            cursor.style.height = s + 'px';
            if (erase) {
                cursor.style.borderColor = '#fff';
                cursor.style.boxShadow = '0 0 0 2px #ff0000, inset 0 0 0 2px #ff0000';
            } else {
                cursor.style.borderColor = '#fff';
                cursor.style.boxShadow = '0 0 0 2px #000, inset 0 0 0 2px ' + col;
            }
        }
        
        my.addEventListener('mouseenter', () => {
            cursor.style.display = 'block';
            updCursor();
        });
        
        my.addEventListener('mouseleave', () => {
            cursor.style.display = 'none';
        });
        
        my.addEventListener('mousemove', (e) => {
            cursor.style.left = e.pageX + 'px';
            cursor.style.top = e.pageY + 'px';
        });
        
        const cols = [
            '#000000','#FFFFFF','#FF0000','#00FF00','#0000FF',
            '#FFFF00','#FFA500','#800080','#FF00FF','#00FFFF',
            '#FFC0CB','#00BFFF','#87CEEB','#FFD700','#FF69B4',
            '#FF1493','#8B4513','#FFE4B5','#FFDAB9','#8B0000',
            '#DC143C','#006400','#000080','#90EE90','#FF6347'
        ];

        const data = {
            snowman: {
                name: '××™×© ×©×œ×’',
                steps: [
                    {instruction:'×©×œ×‘ 1: ×¨×§×¢ ×©××™×™×',draw:c=>{const g=c.createLinearGradient(0,0,0,400);g.addColorStop(0,'#87CEEB');g.addColorStop(1,'#E0F6FF');c.fillStyle=g;c.fillRect(0,0,400,400)}},
                    {instruction:'×©×œ×‘ 2: ×©×œ×’ ×¢×œ ×”×§×¨×§×¢',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.moveTo(0,307);c.quadraticCurveTo(100,293,200,307);c.quadraticCurveTo(300,320,400,307);c.lineTo(400,400);c.lineTo(0,400);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 3: ×¤×ª×™×ª ×©×œ×’ 1',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(40,40,4,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 4: ×¤×ª×™×ª ×©×œ×’ 2',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(107,67,4,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 5: ×¤×ª×™×ª ×©×œ×’ 3',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(267,53,4,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 6: ×¤×ª×™×ª ×©×œ×’ 4',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(333,80,4,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 7: ×¤×ª×™×ª ×©×œ×’ 5',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(160,93,4,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 8: ×›×“×•×¨ ×ª×—×ª×•×Ÿ',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(200,280,60,0,Math.PI*2);c.fill();c.strokeStyle='#E0E0E0';c.lineWidth=3;c.stroke()}},
                    {instruction:'×©×œ×‘ 9: ×›×“×•×¨ ×××¦×¢×™',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(200,200,47,0,Math.PI*2);c.fill();c.strokeStyle='#E0E0E0';c.lineWidth=3;c.stroke()}},
                    {instruction:'×©×œ×‘ 10: ×›×“×•×¨ ×¨××©',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(200,133,33,0,Math.PI*2);c.fill();c.strokeStyle='#E0E0E0';c.lineWidth=3;c.stroke()}},
                    {instruction:'×©×œ×‘ 11: ×›×•×‘×¢ ×ª×—×ª×™×ª',draw:c=>{c.fillStyle='#000';c.fillRect(173,93,54,11)}},
                    {instruction:'×©×œ×‘ 12: ×›×•×‘×¢ ×¢×œ×™×•×Ÿ',draw:c=>{c.fillStyle='#000';c.fillRect(184,67,32,27)}},
                    {instruction:'×©×œ×‘ 13: ×¦×¢×™×£',draw:c=>{c.fillStyle='#F00';c.fillRect(173,167,54,13)}},
                    {instruction:'×©×œ×‘ 14: ×¤×¡×™× ×‘×¦×¢×™×£',draw:c=>{c.fillStyle='#FFF';for(let i=0;i<3;i++)c.fillRect(180+i*13,169,7,8)}},
                    {instruction:'×©×œ×‘ 15: ×§×¦×” ×¦×¢×™×£',draw:c=>{c.fillStyle='#F00';c.beginPath();c.moveTo(227,180);c.lineTo(247,193);c.lineTo(240,193);c.lineTo(233,180);c.lineTo(227,193);c.lineTo(220,193);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 16: ×¢×™×Ÿ ×©×××œ',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(187,127,5,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 17: ×¢×™×Ÿ ×™××™×Ÿ',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(213,127,5,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 18: ××£ ×’×–×¨',draw:c=>{c.fillStyle='#FFA500';c.beginPath();c.moveTo(200,137);c.lineTo(233,133);c.lineTo(200,143);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 19: ×¤×” × ×§×•×“×” 1',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(184,149,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 20: ×¤×” × ×§×•×“×” 2',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(193,149,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 21: ×¤×” × ×§×•×“×” 3',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(200,149,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 22: ×¤×” × ×§×•×“×” 4',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(207,149,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 23: ×¤×” × ×§×•×“×” 5',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(216,149,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 24: ×›×¤×ª×•×¨ 1',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(200,187,5,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 25: ×›×¤×ª×•×¨ 2',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(200,207,5,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 26: ×›×¤×ª×•×¨ 3',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(200,227,5,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 27: ×–×¨×•×¢ ×©×××œ',draw:c=>{c.strokeStyle='#8B4513';c.lineWidth=5;c.beginPath();c.moveTo(153,193);c.lineTo(107,173);c.lineTo(93,180);c.stroke()}},
                    {instruction:'×©×œ×‘ 28: ×–×¨×•×¢ ×™××™×Ÿ',draw:c=>{c.strokeStyle='#8B4513';c.lineWidth=5;c.beginPath();c.moveTo(247,193);c.lineTo(293,173);c.lineTo(307,180);c.stroke()}}
                ]
            },
            pumpkin: {
                name: '×“×œ×¢×ª ×”×œ×•×•×™×Ÿ',
                steps: [
                    {instruction:'×©×œ×‘ 1: ×¨×§×¢ ×œ×™×œ×”',draw:c=>{const g=c.createLinearGradient(0,0,0,400);g.addColorStop(0,'#191970');g.addColorStop(1,'#4B0082');c.fillStyle=g;c.fillRect(0,0,400,400)}},
                    {instruction:'×©×œ×‘ 2: ×™×¨×—',draw:c=>{c.fillStyle='#FFFACD';c.beginPath();c.arc(333,67,33,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 3: ×›×•×›×‘ 1',draw:c=>{c.fillStyle='#FF0';c.beginPath();c.arc(53,53,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 4: ×›×•×›×‘ 2',draw:c=>{c.fillStyle='#FF0';c.beginPath();c.arc(107,40,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 5: ×›×•×›×‘ 3',draw:c=>{c.fillStyle='#FF0';c.beginPath();c.arc(160,67,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 6: ×›×•×›×‘ 4',draw:c=>{c.fillStyle='#FF0';c.beginPath();c.arc(267,47,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 7: ×›×•×›×‘ 5',draw:c=>{c.fillStyle='#FF0';c.beginPath();c.arc(373,93,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 8: ××“××”',draw:c=>{c.fillStyle='#2F4F2F';c.fillRect(0,333,400,67)}},
                    {instruction:'×©×œ×‘ 9: ×’×•×£ ×”×“×œ×¢×ª ××¨×›×–',draw:c=>{c.fillStyle='#FF8C00';c.beginPath();c.ellipse(200,240,73,80,0,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 10: ×—×œ×§ ×©×××œ',draw:c=>{c.fillStyle='#FF8C00';c.beginPath();c.ellipse(147,240,33,73,-0.2,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 11: ×—×œ×§ ×™××™×Ÿ',draw:c=>{c.fillStyle='#FF8C00';c.beginPath();c.ellipse(253,240,33,73,0.2,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 12: ×§×• ×©×××œ',draw:c=>{c.strokeStyle='#D2691E';c.lineWidth=4;c.beginPath();c.moveTo(167,167);c.quadraticCurveTo(173,240,173,313);c.stroke()}},
                    {instruction:'×©×œ×‘ 13: ×§×• ×™××™×Ÿ',draw:c=>{c.strokeStyle='#D2691E';c.lineWidth=4;c.beginPath();c.moveTo(227,167);c.quadraticCurveTo(227,240,227,313);c.stroke()}},
                    {instruction:'×©×œ×‘ 14: ×¢×•×§×¥',draw:c=>{c.fillStyle='#228B22';c.fillRect(193,147,13,20);c.beginPath();c.ellipse(200,144,11,7,0,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 15: ×¢×™×Ÿ ×©×××œ ××©×•×œ×©',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(167,213);c.lineTo(153,240);c.lineTo(180,240);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 16: ×¢×™×Ÿ ×™××™×Ÿ ××©×•×œ×©',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(233,213);c.lineTo(220,240);c.lineTo(247,240);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 17: ××£ ××©×•×œ×©',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(200,247);c.lineTo(193,260);c.lineTo(207,260);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 18: ×¤×” ××¤×—×™×“',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(153,273);c.lineTo(167,287);c.lineTo(180,273);c.lineTo(193,287);c.lineTo(207,273);c.lineTo(220,287);c.lineTo(233,273);c.lineTo(247,287);c.lineTo(247,293);c.lineTo(153,293);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 19: ×©×Ÿ 1',draw:c=>{c.fillStyle='#000';c.fillRect(160,287,7,7)}},
                    {instruction:'×©×œ×‘ 20: ×©×Ÿ 2',draw:c=>{c.fillStyle='#000';c.fillRect(173,287,7,7)}},
                    {instruction:'×©×œ×‘ 21: ×©×Ÿ 3',draw:c=>{c.fillStyle='#000';c.fillRect(187,287,7,7)}},
                    {instruction:'×©×œ×‘ 22: ×©×Ÿ 4',draw:c=>{c.fillStyle='#000';c.fillRect(200,287,7,7)}},
                    {instruction:'×©×œ×‘ 23: ×©×Ÿ 5',draw:c=>{c.fillStyle='#000';c.fillRect(213,287,7,7)}},
                    {instruction:'×©×œ×‘ 24: ×©×Ÿ 6',draw:c=>{c.fillStyle='#000';c.fillRect(227,287,7,7)}},
                    {instruction:'×©×œ×‘ 25: ×©×Ÿ 7',draw:c=>{c.fillStyle='#000';c.fillRect(240,287,7,7)}},
                    {instruction:'×©×œ×‘ 26: ×¢×˜×œ×£ 1',draw:c=>{c.fillStyle='#000';c.beginPath();c.moveTo(67,107);c.lineTo(53,113);c.lineTo(60,120);c.lineTo(67,117);c.lineTo(73,120);c.lineTo(80,113);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 27: ×¢×˜×œ×£ 2',draw:c=>{c.fillStyle='#000';c.beginPath();c.moveTo(307,133);c.lineTo(293,140);c.lineTo(300,147);c.lineTo(307,143);c.lineTo(313,147);c.lineTo(320,140);c.closePath();c.fill()}}
                ]
            },
            hearts: {
                name: '×œ×‘×‘×•×ª ××”×‘×”',
                steps: [
                    {instruction:'×©×œ×‘ 1: ×¨×§×¢ ×•×¨×•×“',draw:c=>{const g=c.createLinearGradient(0,0,0,400);g.addColorStop(0,'#FFB6C1');g.addColorStop(1,'#FFC0CB');c.fillStyle=g;c.fillRect(0,0,400,400)}},
                    {instruction:'×©×œ×‘ 2: ×œ×‘ ×’×“×•×œ ××¨×›×–×™ 1',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(200,172);c.bezierCurveTo(200,160,180,140,160,140);c.bezierCurveTo(140,140,120,160,120,180);c.bezierCurveTo(120,200,140,220,160,240);c.bezierCurveTo(180,260,200,280,200,300);c.fill()}},
                    {instruction:'×©×œ×‘ 3: ×œ×‘ ×’×“×•×œ ××¨×›×–×™ 2',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(200,172);c.bezierCurveTo(200,160,220,140,240,140);c.bezierCurveTo(260,140,280,160,280,180);c.bezierCurveTo(280,200,260,220,240,240);c.bezierCurveTo(220,260,200,280,200,300);c.fill()}},
                    {instruction:'×©×œ×‘ 4: ×§×• ×œ×‘×Ÿ ×‘×œ×‘ ×’×“×•×œ',draw:c=>{c.strokeStyle='rgba(255,255,255,0.5)';c.lineWidth=3;c.beginPath();c.moveTo(173,200);c.quadraticCurveTo(180,173,167,160);c.stroke()}},
                    {instruction:'×©×œ×‘ 5: ×œ×‘ ×‘×™× ×•× ×™ ×©×××œ 1',draw:c=>{c.fillStyle='#FF69B4';c.beginPath();c.moveTo(107,120);c.bezierCurveTo(107,113,100,100,87,100);c.bezierCurveTo(73,100,67,113,67,127);c.bezierCurveTo(67,140,80,153,93,167);c.bezierCurveTo(100,173,107,180,107,193);c.fill()}},
                    {instruction:'×©×œ×‘ 6: ×œ×‘ ×‘×™× ×•× ×™ ×©×××œ 2',draw:c=>{c.fillStyle='#FF69B4';c.beginPath();c.moveTo(107,120);c.bezierCurveTo(107,113,113,100,127,100);c.bezierCurveTo(140,100,147,113,147,127);c.bezierCurveTo(147,140,133,153,120,167);c.bezierCurveTo(113,173,107,180,107,193);c.fill()}},
                    {instruction:'×©×œ×‘ 7: ×œ×‘ ×‘×™× ×•× ×™ ×™××™×Ÿ 1',draw:c=>{c.fillStyle='#FF00FF';c.beginPath();c.moveTo(293,107);c.bezierCurveTo(293,100,287,87,273,87);c.bezierCurveTo(260,87,253,100,253,113);c.bezierCurveTo(253,127,267,140,280,153);c.bezierCurveTo(287,160,293,167,293,180);c.fill()}},
                    {instruction:'×©×œ×‘ 8: ×œ×‘ ×‘×™× ×•× ×™ ×™××™×Ÿ 2',draw:c=>{c.fillStyle='#FF00FF';c.beginPath();c.moveTo(293,107);c.bezierCurveTo(293,100,300,87,313,87);c.bezierCurveTo(327,87,333,100,333,113);c.bezierCurveTo(333,127,320,140,307,153);c.bezierCurveTo(300,160,293,167,293,180);c.fill()}},
                    {instruction:'×©×œ×‘ 9: ×œ×‘ ×§×˜×Ÿ ×©×××œ 1',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(93,280);c.bezierCurveTo(93,273,87,267,80,267);c.bezierCurveTo(73,267,67,273,67,280);c.bezierCurveTo(67,287,73,293,80,300);c.bezierCurveTo(87,307,93,313,93,320);c.fill()}},
                    {instruction:'×©×œ×‘ 10: ×œ×‘ ×§×˜×Ÿ ×©×××œ 2',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(93,280);c.bezierCurveTo(93,273,100,267,107,267);c.bezierCurveTo(113,267,120,273,120,280);c.bezierCurveTo(120,287,113,293,107,300);c.bezierCurveTo(100,307,93,313,93,320);c.fill()}},
                    {instruction:'×©×œ×‘ 11: ×œ×‘ ×§×˜×Ÿ ×™××™×Ÿ 1',draw:c=>{c.fillStyle='#FF69B4';c.beginPath();c.moveTo(307,293);c.bezierCurveTo(307,287,300,280,293,280);c.bezierCurveTo(287,280,280,287,280,293);c.bezierCurveTo(280,300,287,307,293,313);c.bezierCurveTo(300,320,307,327,307,333);c.fill()}},
                    {instruction:'×©×œ×‘ 12: ×œ×‘ ×§×˜×Ÿ ×™××™×Ÿ 2',draw:c=>{c.fillStyle='#FF69B4';c.beginPath();c.moveTo(307,293);c.bezierCurveTo(307,287,313,280,320,280);c.bezierCurveTo(327,280,333,287,333,293);c.bezierCurveTo(333,300,327,307,320,313);c.bezierCurveTo(313,320,307,327,307,333);c.fill()}},
                    {instruction:'×©×œ×‘ 13: ×œ×‘ ×–×¢×™×¨ 1 ×—×œ×§ 1',draw:c=>{c.fillStyle='#FF00FF';c.beginPath();c.moveTo(160,73);c.bezierCurveTo(160,67,153,60,147,60);c.bezierCurveTo(140,60,133,67,133,73);c.bezierCurveTo(133,80,140,87,147,93);c.bezierCurveTo(153,100,160,107,160,113);c.fill()}},
                    {instruction:'×©×œ×‘ 14: ×œ×‘ ×–×¢×™×¨ 1 ×—×œ×§ 2',draw:c=>{c.fillStyle='#FF00FF';c.beginPath();c.moveTo(160,73);c.bezierCurveTo(160,67,167,60,173,60);c.bezierCurveTo(180,60,187,67,187,73);c.bezierCurveTo(187,80,180,87,173,93);c.bezierCurveTo(167,100,160,107,160,113);c.fill()}},
                    {instruction:'×©×œ×‘ 15: ×œ×‘ ×–×¢×™×¨ 2 ×—×œ×§ 1',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(240,60);c.bezierCurveTo(240,53,233,47,227,47);c.bezierCurveTo(220,47,213,53,213,60);c.bezierCurveTo(213,67,220,73,227,80);c.bezierCurveTo(233,87,240,93,240,100);c.fill()}},
                    {instruction:'×©×œ×‘ 16: ×œ×‘ ×–×¢×™×¨ 2 ×—×œ×§ 2',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(240,60);c.bezierCurveTo(240,53,247,47,253,47);c.bezierCurveTo(260,47,267,53,267,60);c.bezierCurveTo(267,67,260,73,253,80);c.bezierCurveTo(247,87,240,93,240,100);c.fill()}},
                    {instruction:'×©×œ×‘ 17: ×œ×‘ ×–×¢×™×¨ 3 ×—×œ×§ 1',draw:c=>{c.fillStyle='#FF00FF';c.beginPath();c.moveTo(67,200);c.bezierCurveTo(67,193,60,187,53,187);c.bezierCurveTo(47,187,40,193,40,200);c.bezierCurveTo(40,207,47,213,53,220);c.bezierCurveTo(60,227,67,233,67,240);c.fill()}},
                    {instruction:'×©×œ×‘ 18: ×œ×‘ ×–×¢×™×¨ 3 ×—×œ×§ 2',draw:c=>{c.fillStyle='#FF00FF';c.beginPath();c.moveTo(67,200);c.bezierCurveTo(67,193,73,187,80,187);c.bezierCurveTo(87,187,93,193,93,200);c.bezierCurveTo(93,207,87,213,80,220);c.bezierCurveTo(73,227,67,233,67,240);c.fill()}},
                    {instruction:'×©×œ×‘ 19: ×œ×‘ ×–×¢×™×¨ 4 ×—×œ×§ 1',draw:c=>{c.fillStyle='#FF69B4';c.beginPath();c.moveTo(333,200);c.bezierCurveTo(333,193,327,187,320,187);c.bezierCurveTo(313,187,307,193,307,200);c.bezierCurveTo(307,207,313,213,320,220);c.bezierCurveTo(327,227,333,233,333,240);c.fill()}},
                    {instruction:'×©×œ×‘ 20: ×œ×‘ ×–×¢×™×¨ 4 ×—×œ×§ 2',draw:c=>{c.fillStyle='#FF69B4';c.beginPath();c.moveTo(333,200);c.bezierCurveTo(333,193,340,187,347,187);c.bezierCurveTo(353,187,360,193,360,200);c.bezierCurveTo(360,207,353,213,347,220);c.bezierCurveTo(340,227,333,233,333,240);c.fill()}},
                    {instruction:'×©×œ×‘ 21: ×œ×‘ ×–×¢×™×¨ 5 ×—×œ×§ 1',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(200,340);c.bezierCurveTo(200,333,193,327,187,327);c.bezierCurveTo(180,327,173,333,173,340);c.bezierCurveTo(173,347,180,353,187,360);c.bezierCurveTo(193,367,200,373,200,380);c.fill()}},
                    {instruction:'×©×œ×‘ 22: ×œ×‘ ×–×¢×™×¨ 5 ×—×œ×§ 2',draw:c=>{c.fillStyle='#FF1493';c.beginPath();c.moveTo(200,340);c.bezierCurveTo(200,333,207,327,213,327);c.bezierCurveTo(220,327,227,333,227,340);c.bezierCurveTo(227,347,220,353,213,360);c.bezierCurveTo(207,367,200,373,200,380);c.fill()}},
                    {instruction:'×©×œ×‘ 23: ×›×•×›×‘ × ×¦× ×¥ 1',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(80,160);c.lineTo(87,167);c.lineTo(80,173);c.lineTo(73,167);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 24: ×›×•×›×‘ × ×¦× ×¥ 2',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(320,160);c.lineTo(327,167);c.lineTo(320,173);c.lineTo(313,167);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 25: ×›×•×›×‘ × ×¦× ×¥ 3',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(200,80);c.lineTo(207,87);c.lineTo(200,93);c.lineTo(193,87);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 26: ×›×•×›×‘ × ×¦× ×¥ 4',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(133,240);c.lineTo(140,247);c.lineTo(133,253);c.lineTo(127,247);c.closePath();c.fill()}},
                    {instruction:'×©×œ×‘ 27: ×›×•×›×‘ × ×¦× ×¥ 5',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.moveTo(267,253);c.lineTo(273,260);c.lineTo(267,267);c.lineTo(260,260);c.closePath();c.fill()}}
                ]
            },
            sun: {
                name: '×©××© ××—×™×™×›×ª',
                steps: [
                    {instruction:'×©×œ×‘ 1: ×¨×§×¢ ×©××™×™×',draw:c=>{const g=c.createLinearGradient(0,0,0,400);g.addColorStop(0,'#87CEEB');g.addColorStop(1,'#B0E0E6');c.fillStyle=g;c.fillRect(0,0,400,400)}},
                    {instruction:'×©×œ×‘ 2: ×¢× ×Ÿ 1 ×¢×™×’×•×œ 1',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(80,293,27,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 3: ×¢× ×Ÿ 1 ×¢×™×’×•×œ 2',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(107,293,33,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 4: ×¢× ×Ÿ 1 ×¢×™×’×•×œ 3',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(133,293,27,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 5: ×¢× ×Ÿ 2 ×¢×™×’×•×œ 1',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(293,320,24,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 6: ×¢× ×Ÿ 2 ×¢×™×’×•×œ 2',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(317,320,29,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 7: ×¢× ×Ÿ 2 ×¢×™×’×•×œ 3',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(341,320,24,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 8: ×§×¨×Ÿ 1',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(200,80);c.lineTo(200,47);c.stroke()}},
                    {instruction:'×©×œ×‘ 9: ×§×¨×Ÿ 2',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(229,87);c.lineTo(254,63);c.stroke()}},
                    {instruction:'×©×œ×‘ 10: ×§×¨×Ÿ 3',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(253,107);c.lineTo(280,93);c.stroke()}},
                    {instruction:'×©×œ×‘ 11: ×§×¨×Ÿ 4',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(267,133);c.lineTo(293,133);c.stroke()}},
                    {instruction:'×©×œ×‘ 12: ×§×¨×Ÿ 5',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(253,160);c.lineTo(280,173);c.stroke()}},
                    {instruction:'×©×œ×‘ 13: ×§×¨×Ÿ 6',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(229,180);c.lineTo(254,203);c.stroke()}},
                    {instruction:'×©×œ×‘ 14: ×§×¨×Ÿ 7',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(200,187);c.lineTo(200,220);c.stroke()}},
                    {instruction:'×©×œ×‘ 15: ×§×¨×Ÿ 8',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(171,180);c.lineTo(147,203);c.stroke()}},
                    {instruction:'×©×œ×‘ 16: ×§×¨×Ÿ 9',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(147,160);c.lineTo(120,173);c.stroke()}},
                    {instruction:'×©×œ×‘ 17: ×§×¨×Ÿ 10',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(133,133);c.lineTo(107,133);c.stroke()}},
                    {instruction:'×©×œ×‘ 18: ×§×¨×Ÿ 11',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(147,107);c.lineTo(120,93);c.stroke()}},
                    {instruction:'×©×œ×‘ 19: ×§×¨×Ÿ 12',draw:c=>{c.strokeStyle='#FFD700';c.lineWidth=8;c.lineCap='round';c.beginPath();c.moveTo(171,87);c.lineTo(147,63);c.stroke()}},
                    {instruction:'×©×œ×‘ 20: ×’×•×£ ×”×©××© ×—×™×¦×•× ×™',draw:c=>{c.fillStyle='#FFD700';c.beginPath();c.arc(200,133,67,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 21: ×’×•×£ ×”×©××© ×¤× ×™××™',draw:c=>{c.fillStyle='#FF0';c.beginPath();c.arc(200,133,53,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 22: ×’×¨×“×™×× ×˜ ×¤× ×™××™',draw:c=>{const g=c.createRadialGradient(200,133,0,200,133,67);g.addColorStop(0,'#FFFF99');g.addColorStop(1,'#FFD700');c.fillStyle=g;c.beginPath();c.arc(200,133,67,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 23: ×¢×™×Ÿ ×©×××œ',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(180,120,7,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 24: ×¢×™×Ÿ ×™××™×Ÿ',draw:c=>{c.fillStyle='#000';c.beginPath();c.arc(220,120,7,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 25: × ×™×¦×•×¥ ×¢×™×Ÿ ×©×××œ',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(183,117,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 26: × ×™×¦×•×¥ ×¢×™×Ÿ ×™××™×Ÿ',draw:c=>{c.fillStyle='#FFF';c.beginPath();c.arc(223,117,3,0,Math.PI*2);c.fill()}},
                    {instruction:'×©×œ×‘ 27: ×œ×—×™ ×©×××œ',draw:c=>{c.fillStyle='#FFA07A';c.globalAlpha=0.5;c.beginPath();c.arc(160,167,11,0,Math.PI*2);c.fill();c.globalAlpha=1}},
                    {instruction:'×©×œ×‘ 28: ×œ×—×™ ×™××™×Ÿ',draw:c=>{c.fillStyle='#FFA07A';c.globalAlpha=0.5;c.beginPath();c.arc(240,167,11,0,Math.PI*2);c.fill();c.globalAlpha=1}},
                    {instruction:'×©×œ×‘ 29: ×—×™×•×š',draw:c=>{c.strokeStyle='#000';c.lineWidth=4;c.beginPath();c.arc(200,140,27,0.2,Math.PI-0.2);c.stroke()}},
                    {instruction:'×©×œ×‘ 30: ××©×§×¤×™ ×©××© ×©×××œ',draw:c=>{c.strokeStyle='#000';c.lineWidth=3;c.strokeRect(167,113,20,16)}},
                    {instruction:'×©×œ×‘ 31: ××©×§×¤×™ ×©××© ×™××™×Ÿ',draw:c=>{c.strokeStyle='#000';c.lineWidth=3;c.strokeRect(213,113,20,16)}},
                    {instruction:'×©×œ×‘ 32: ×’×©×¨ ××©×§×¤×™×™×',draw:c=>{c.strokeStyle='#000';c.lineWidth=3;c.beginPath();c.moveTo(187,121);c.lineTo(213,121);c.stroke()}}
                ]
            }
        };
        
        function init() {
            const p = document.getElementById('colorPalette');
            cols.forEach(color => {
                const b = document.createElement('div');
                b.className = 'color-btn' + (color === col ? ' selected' : '');
                b.style.background = color;
                b.setAttribute('data-color', color);
                b.onclick = function() {
                    col = this.getAttribute('data-color');
                    erase = false;
                    document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    document.getElementById('drawBtn').classList.add('active');
                    document.getElementById('eraserBtn').classList.remove('active');
                    updCursor();
                };
                p.appendChild(b);
            });
        }
        
        function selectDrawTool() {
            erase = false;
            document.getElementById('drawBtn').classList.add('active');
            document.getElementById('eraserBtn').classList.remove('active');
            updCursor();
        }
        
        function selectEraser() {
            erase = true;
            document.getElementById('eraserBtn').classList.add('active');
            document.getElementById('drawBtn').classList.remove('active');
            document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('selected'));
            updCursor();
        }
        
        document.getElementById('brushSize').addEventListener('input', (e) => {
            size = parseInt(e.target.value);
            updCursor();
        });
        
        function showMenu() {
            document.getElementById('drawingMenu').classList.remove('hidden');
            document.getElementById('overlay').classList.remove('hidden');
        }
        
        function hideMenu() {
            document.getElementById('drawingMenu').classList.add('hidden');
            document.getElementById('overlay').classList.add('hidden');
        }
        
        function selectDrawing(n) {
            curr = data[n];
            step = 0;
            exCtx.clearRect(0, 0, 400, 400);
            myCtx.clearRect(0, 0, 400, 400);
            upd();
            hideMenu();
            document.getElementById('nextBtn').disabled = false;
        }
        
        function clearMyCanvas() {
            myCtx.clearRect(0, 0, 400, 400);
        }
        
        function saveDrawing() {
            if (!curr) { 
                alert('×‘×—×¨ ×¦×™×•×¨ ×ª×—×™×œ×”!'); 
                return; 
            }
            const l = document.createElement('a');
            l.download = '×¦×™×•×¨_' + curr.name + '.png';
            l.href = my.toDataURL();
            l.click();
        }
        
        function upd() {
            if (!curr) return;
            exCtx.clearRect(0, 0, 400, 400);
            for (let i = 0; i <= step; i++) curr.steps[i].draw(exCtx);
            document.getElementById('instruction').textContent = curr.steps[step].instruction;
            document.getElementById('stepCounter').textContent = '×©×œ×‘ ' + (step + 1) + ' ××ª×•×š ' + curr.steps.length;
            document.getElementById('prevBtn').disabled = step === 0;
            document.getElementById('nextBtn').disabled = step === curr.steps.length - 1;
        }
        
        function nextStep() {
            if (curr && step < curr.steps.length - 1) { step++; upd(); }
        }
        
        function prevStep() {
            if (step > 0) { step--; upd(); }
        }
        
        my.addEventListener('mousedown', (e) => {
            draw = true;
            const r = my.getBoundingClientRect();
            myCtx.beginPath();
            myCtx.moveTo(e.clientX - r.left, e.clientY - r.top);
        });
        
        my.addEventListener('mousemove', (e) => {
            if (!draw) return;
            const r = my.getBoundingClientRect();
            myCtx.lineCap = 'round';
            myCtx.lineJoin = 'round';
            if (erase) {
                myCtx.globalCompositeOperation = 'destination-out';
                myCtx.lineWidth = size * 2;
            } else {
                myCtx.globalCompositeOperation = 'source-over';
                myCtx.strokeStyle = col;
                myCtx.lineWidth = size;
            }
            myCtx.lineTo(e.clientX - r.left, e.clientY - r.top);
            myCtx.stroke();
        });
        
        my.addEventListener('mouseup', () => { draw = false; });
        my.addEventListener('mouseout', () => { draw = false; });
        
        my.addEventListener('touchstart', (e) => {
            e.preventDefault();
            draw = true;
            const t = e.touches[0];
            const r = my.getBoundingClientRect();
            myCtx.beginPath();
            myCtx.moveTo(t.clientX - r.left, t.clientY - r.top);
        });
        
        my.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!draw) return;
            const t = e.touches[0];
            const r = my.getBoundingClientRect();
            myCtx.lineCap = 'round';
            myCtx.lineJoin = 'round';
            if (erase) {
                myCtx.globalCompositeOperation = 'destination-out';
                myCtx.lineWidth = size * 2;
            } else {
                myCtx.globalCompositeOperation = 'source-over';
                myCtx.strokeStyle = col;
                myCtx.lineWidth = size;
            }
            myCtx.lineTo(t.clientX - r.left, t.clientY - r.top);
            myCtx.stroke();
        });
        
        my.addEventListener('touchend', () => { draw = false; });
        
        init();
    </script>
</body>
</html>