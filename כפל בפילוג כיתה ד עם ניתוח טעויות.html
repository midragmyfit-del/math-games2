<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×›×¤×œ ×‘×¤×™×œ×•×’ - ×›×™×ª×” ×“'</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; background: white; border-radius: 25px; padding: 40px; box-shadow: 0 25px 70px rgba(0,0,0,0.4); }
        h1 { color: #667eea; text-align: center; margin-bottom: 15px; font-size: 3em; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        .subtitle { text-align: center; color: #666; margin-bottom: 35px; font-size: 1.3em; }
        .tabs { display: flex; gap: 12px; margin-bottom: 35px; flex-wrap: wrap; justify-content: center; }
        .tab { padding: 16px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 12px; cursor: pointer; font-size: 1.15em; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white; }
        .tab:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, #7c8ef5 0%, #8a5eb8 100%); }
        .tab.active { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); transform: scale(1.05); }
        .content { display: none; }
        .content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        .shake { animation: shake 0.3s; }
        .lesson { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); }
        .lesson h2 { color: #ff6b6b; margin-bottom: 20px; font-size: 1.8em; }
        .lesson p { font-size: 1.2em; line-height: 1.8; margin-bottom: 15px; color: #333; }
        .example { background: white; padding: 20px; border-right: 5px solid #667eea; margin: 20px 0; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.08); }
        .example h3 { color: #f093fb; margin-bottom: 12px; font-size: 1.3em; }
        .calculation { font-family: 'Courier New', monospace; background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0; text-align: center; font-size: 1.5em; }
        .calc-content { direction: ltr; display: inline-block; white-space: pre; }
        .game { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; color: white; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .game h2 { margin-bottom: 20px; font-size: 2em; }
        .question-counter { text-align: center; font-size: 1.3em; margin: 15px 0; color: #fff; background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px; }
        .score { text-align: center; font-size: 1.8em; margin: 25px 0; color: #fff; font-weight: bold; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 12px; }
        .problem-display { font-size: 3em; text-align: center; margin: 30px 0; padding: 25px; background: rgba(255,255,255,0.3); border-radius: 15px; font-weight: bold; font-family: 'Courier New', monospace; }
        .problem-content { direction: ltr; display: inline-block; }
        .word-problem { font-size: 1.4em; text-align: center; margin: 30px 0; padding: 30px; background: rgba(255,255,255,0.3); border-radius: 15px; line-height: 1.8; direction: rtl; }
        input[type="number"] { width: 200px; padding: 15px; font-size: 1.8em; border: 4px solid white; border-radius: 10px; text-align: center; margin: 10px; font-weight: bold; transition: border-color 0.3s; }
        input[type="number"]:focus { outline: none; border-color: #f093fb; }
        input[type="number"]::placeholder { text-align: center; font-size: 0.7em; color: #999; }
        input[type="number"].error { border-color: #ff6b6b; }
        button { background: white; color: #667eea; border: none; padding: 14px 35px; font-size: 1.2em; border-radius: 10px; cursor: pointer; transition: all 0.3s; font-weight: bold; box-shadow: 0 6px 12px rgba(0,0,0,0.2); margin: 5px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .feedback { padding: 20px; border-radius: 12px; margin-top: 20px; font-size: 1.3em; text-align: center; font-weight: bold; }
        .correct { background: #51cf66; color: white; }
        .incorrect { background: #ff6b6b; color: white; }
        .controls { text-align: center; margin: 25px 0; }
        .round-complete { background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%); padding: 40px; border-radius: 20px; text-align: center; color: white; margin: 20px 0; box-shadow: 0 15px 35px rgba(0,0,0,0.3); }
        .round-complete h3 { font-size: 2.5em; margin-bottom: 20px; }
        .round-complete p { font-size: 1.5em; margin: 15px 0; }
        .trophy { font-size: 5em; margin: 20px 0; animation: bounce 0.6s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .new-round-btn { background: white; color: #51cf66; font-size: 1.5em; padding: 20px 40px; margin-top: 20px; border: none; border-radius: 15px; cursor: pointer; font-weight: bold; box-shadow: 0 8px 16px rgba(0,0,0,0.2); transition: all 0.3s; }
        .new-round-btn:hover { transform: scale(1.05); box-shadow: 0 12px 24px rgba(0,0,0,0.3); }
        .steps { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: right; }
        .steps p { margin: 10px 0; font-size: 1.1em; }
        .visual-box { background: rgba(255,255,255,0.3); padding: 15px; border-radius: 10px; margin: 10px 0; display: inline-block; }
        .detailed-feedback { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px; margin: 20px 0; font-size: 1.1em; line-height: 1.8; }
        .analysis-box { background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px; margin: 15px 0; border-right: 5px solid #f093fb; }
        .analysis-title { font-weight: bold; margin-bottom: 10px; font-size: 1.1em; }
    </style>
</head>
<body>
    <div class="container">
        <h1>×›×¤×œ ×‘×¤×™×œ×•×’</h1>
        <div class="subtitle">×›×™×ª×” ×“' - × ×—×œ×§ ××ª ×”××¡×¤×¨ ×•×›×•×¤×œ×™× ×‘× ×¤×¨×“!</div>
        
        <div class="tabs">
            <button class="tab active" data-tab="lesson1">ğŸ“š ××”×• ×¤×™×œ×•×’?</button>
            <button class="tab" data-tab="game1">ğŸ® ××©×—×§ ×¤×™×œ×•×’ ×‘×¡×™×¡×™</button>
            <button class="tab" data-tab="lesson2">ğŸ“š ×“×•×’××•×ª ××ª×§×“××•×ª</button>
            <button class="tab" data-tab="game2">ğŸ¯ ××©×—×§ ×‘×¢×™×•×ª</button>
            <button class="tab" data-tab="lesson3">ğŸ“š ×××™×¨×™× ×•×¤×•×ª×¨×™×</button>
            <button class="tab" data-tab="game3">ğŸ† ××©×—×§ ××ª×§×“×</button>
        </div>
        
        <div id="lesson1" class="content active">
            <div class="lesson">
                <h2>××”×• ×›×¤×œ ×‘×¤×™×œ×•×’?</h2>
                <p>×›×¤×œ ×‘×¤×™×œ×•×’ ×¤×™×¨×•×©×• ×©×× ×—× ×• ×—×•×§×™× ××¡×¤×¨ ××—×“ ×œ×©× ×™ ×—×œ×§×™×, ×•××– ×›×•×¤×œ×™× ×›×œ ×—×œ×§ ×‘× ×¤×¨×“!</p>
                
                <div class="example">
                    <h3>×“×•×’××” 1: <span dir="ltr">6 Ã— 23 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×”-23 ×œ-20 ×•-3:</p>
                    <div class="visual-box">
                        <span dir="ltr">6 Ã— 23 = 6 Ã— (20 + 3)</span>
                    </div>
                    <p>×¢×›×©×™×• ×›×•×¤×œ×™× ×›×œ ×—×œ×§:</p>
                    <div class="calculation">
                      <div class="calc-content">6 Ã— 20 = 120
6 Ã— 3 = 18
120 + 18 = 138</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 23 ×œ-20 ×•-3</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× <span dir="ltr">6 Ã— 20 = 120</span></p>
                        <p>×©×œ×‘ 3: ×›×•×¤×œ×™× <span dir="ltr">6 Ã— 3 = 18</span></p>
                        <p>×©×œ×‘ 4: ××—×‘×¨×™× <span dir="ltr">120 + 18 = 138</span></p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">138</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: <span dir="ltr">7 Ã— 15 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×”-15 ×œ-10 ×•-5:</p>
                    <div class="visual-box">
                        <span dir="ltr">7 Ã— 15 = 7 Ã— (10 + 5)</span>
                    </div>
                    <div class="calculation">
                      <div class="calc-content">7 Ã— 10 = 70
7 Ã— 5 = 35
70 + 35 = 105</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 15 ×œ-10 ×•-5</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× <span dir="ltr">7 Ã— 10 = 70</span></p>
                        <p>×©×œ×‘ 3: ×›×•×¤×œ×™× <span dir="ltr">7 Ã— 5 = 35</span></p>
                        <p>×©×œ×‘ 4: ××—×‘×¨×™× <span dir="ltr">70 + 35 = 105</span></p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">105</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 3: <span dir="ltr">5 Ã— 24 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×”-24 ×œ-20 ×•-4:</p>
                    <div class="visual-box">
                        <span dir="ltr">5 Ã— 24 = 5 Ã— (20 + 4)</span>
                    </div>
                    <div class="calculation">
                      <div class="calc-content">5 Ã— 20 = 100
5 Ã— 4 = 20
100 + 20 = 120</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 24 ×œ-20 ×•-4</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× <span dir="ltr">5 Ã— 20 = 100</span></p>
                        <p>×©×œ×‘ 3: ×›×•×¤×œ×™× <span dir="ltr">5 Ã— 4 = 20</span></p>
                        <p>×©×œ×‘ 4: ××—×‘×¨×™× <span dir="ltr">100 + 20 = 120</span></p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">120</span></p>
                    </div>
                </div>
                
                <div class="example" style="border-right: 5px solid #ff6b6b;">
                    <h3>âš ï¸ ×˜×¢×•×ª × ×¤×•×¦×”: <span dir="ltr">4 Ã— 13 = ?</span></h3>
                    <p><strong>âŒ ×˜×¢×•×ª:</strong> ×©×•×›×—×™× ×œ×”×›×¤×™×œ ××ª ×”×—×œ×§ ×”×©× ×™!</p>
                    <div class="calculation" style="background: #ffe6e6;">
                      <div class="calc-content">4 Ã— 10 = 40
... ×•×©×•×›×—×™× ××ª ×”-3!
×ª×©×•×‘×” ×©×’×•×™×”: 40</div>
                    </div>
                    <p><strong>âœ“ ×”×“×¨×š ×”× ×›×•× ×”:</strong></p>
                    <div class="calculation">
                      <div class="calc-content">4 Ã— 10 = 40
4 Ã— 3 = 12
40 + 12 = 52</div>
                    </div>
                    <div class="steps">
                        <p><strong>×ª×–×›×•×¨×ª ×—×©×•×‘×”:</strong> ××œ ×ª×©×›×—×• ×œ×”×›×¤×™×œ ×’× ××ª ×”×™×—×™×“×•×ª!</p>
                        <p>×× ×—× ×• ×›×•×¤×œ×™× ×‘×©× ×™ ×”×—×œ×§×™× ×•××—×¨×™ ×›×š ××—×‘×¨×™×.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game1" class="content">
            <div class="game">
                <h2>××©×—×§ ×¤×™×œ×•×’ ×‘×¡×™×¡×™</h2>
                <div class="question-counter">×©××œ×” <span id="q-count1">1</span> ××ª×•×š 12</div>
                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 1.1em; text-align: right;">
                    ğŸ’¡ <strong>×˜×™×¤:</strong> ×–×›×•×¨ ×œ×—×œ×§ ××ª ×”××¡×¤×¨ ×œ×¢×©×¨×•×ª ×•×™×—×™×“×•×ª, ×•××—×¨ ×›×š ×›×¤×•×œ ×›×œ ×—×œ×§ ×‘× ×¤×¨×“!
                </div>
                <div class="score">× ×™×§×•×“: <span id="score1">0</span></div>
                <div class="problem-display" id="problem1">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer1" placeholder="×”×›× ×¡ ×ª×©×•×‘×”" min="0">
                    <br><br>
                    <button id="check1">×‘×“×•×§</button>
                </div>
                <div id="feedback1"></div>
                <div id="round-end1" style="display: none;"></div>
            </div>
        </div>
        
        <div id="lesson2" class="content">
            <div class="lesson">
                <h2>×“×•×’××•×ª ××ª×§×“××•×ª - ×—×œ×•×§×” ×œ×¢×©×¨×•×ª ×•×™×—×™×“×•×ª</h2>
                <p>×›×©×™×© ××¡×¤×¨ ×’×“×•×œ ×™×•×ª×¨, ×× ×—× ×• ×ª××™×“ ××—×œ×§×™× ×œ×¢×©×¨×•×ª ×•×™×—×™×“×•×ª!</p>
                
                <div class="example">
                    <h3>×“×•×’××” 1: <span dir="ltr">8 Ã— 34 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×”-34 ×œ-30 ×•-4:</p>
                    <div class="visual-box">
                        <span dir="ltr">8 Ã— 34 = 8 Ã— (30 + 4)</span>
                    </div>
                    <div class="calculation">
                      <div class="calc-content">8 Ã— 30 = 240
8 Ã— 4 = 32
240 + 32 = 272</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 34 ×œ-30 ×•-4</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× <span dir="ltr">8 Ã— 30 = 240</span></p>
                        <p>×©×œ×‘ 3: ×›×•×¤×œ×™× <span dir="ltr">8 Ã— 4 = 32</span></p>
                        <p>×©×œ×‘ 4: ××—×‘×¨×™× <span dir="ltr">240 + 32 = 272</span></p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">272</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: <span dir="ltr">9 Ã— 27 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×”-27 ×œ-20 ×•-7:</p>
                    <div class="visual-box">
                        <span dir="ltr">9 Ã— 27 = 9 Ã— (20 + 7)</span>
                    </div>
                    <div class="calculation">
                      <div class="calc-content">9 Ã— 20 = 180
9 Ã— 7 = 63
180 + 63 = 243</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 27 ×œ-20 ×•-7</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× <span dir="ltr">9 Ã— 20 = 180</span></p>
                        <p>×©×œ×‘ 3: ×›×•×¤×œ×™× <span dir="ltr">9 Ã— 7 = 63</span></p>
                        <p>×©×œ×‘ 4: ××—×‘×¨×™× <span dir="ltr">180 + 63 = 243</span></p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">243</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 3: <span dir="ltr">6 Ã— 32 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×”-32 ×œ-30 ×•-2:</p>
                    <div class="visual-box">
                        <span dir="ltr">6 Ã— 32 = 6 Ã— (30 + 2)</span>
                    </div>
                    <div class="calculation">
                      <div class="calc-content">6 Ã— 30 = 180
6 Ã— 2 = 12
180 + 12 = 192</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 32 ×œ-30 ×•-2</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× <span dir="ltr">6 Ã— 30 = 180</span></p>
                        <p>×©×œ×‘ 3: ×›×•×¤×œ×™× <span dir="ltr">6 Ã— 2 = 12</span></p>
                        <p>×©×œ×‘ 4: ××—×‘×¨×™× <span dir="ltr">180 + 12 = 192</span></p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">192</span></p>
                    </div>
                </div>
                
                <div class="example" style="border-right: 5px solid #ff6b6b;">
                    <h3>âš ï¸ ×˜×¢×•×ª × ×¤×•×¦×”: <span dir="ltr">7 Ã— 45 = ?</span></h3>
                    <p><strong>âŒ ×˜×¢×•×ª:</strong> ×©×•×›×—×™× ×œ×›×¤×•×œ ××ª ×”×¢×©×¨×•×ª!</p>
                    <div class="calculation" style="background: #ffe6e6;">
                      <div class="calc-content">7 Ã— 5 = 35
... ×•×©×•×›×—×™× ××ª ×”-40!
×ª×©×•×‘×” ×©×’×•×™×”: 35</div>
                    </div>
                    <p><strong>âœ“ ×”×“×¨×š ×”× ×›×•× ×”:</strong></p>
                    <div class="calculation">
                      <div class="calc-content">7 Ã— 40 = 280
7 Ã— 5 = 35
280 + 35 = 315</div>
                    </div>
                    <div class="steps">
                        <p><strong>×ª×–×›×•×¨×ª ×—×©×•×‘×”:</strong> ×—×©×•×‘ ×œ×”×—×œ ××ª ×”×¤×™×œ×•×’ ×¢×œ ×›×œ ×”×—×œ×§×™×!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game2" class="content">
            <div class="game">
                <h2>××©×—×§ ×‘×¢×™×•×ª ××™×œ×•×œ×™×•×ª</h2>
                <div class="question-counter">×©××œ×” <span id="q-count2">1</span> ××ª×•×š 12</div>
                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 1.1em; text-align: right;">
                    ğŸ’¡ <strong>×˜×™×¤:</strong> ×§×¨××• ××ª ×”×‘×¢×™×” ×‘×¢×™×•×Ÿ, ×—×œ×§×• ××ª ×”××¡×¤×¨, ×•×›×¤×œ×• ×›×œ ×—×œ×§!
                </div>
                <div class="score">× ×™×§×•×“: <span id="score2">0</span></div>
                <div class="word-problem" id="problem2">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer2" placeholder="×”×›× ×¡ ×ª×©×•×‘×”" min="0">
                    <br><br>
                    <button id="check2">×‘×“×•×§</button>
                </div>
                <div id="feedback2"></div>
                <div id="round-end2" style="display: none;"></div>
            </div>
        </div>
        
        <div id="lesson3" class="content">
            <div class="lesson">
                <h2>×××™×¨×™× ×•×¤×•×ª×¨×™× - ×“×•-×¡×¤×¨×ª×™ Ã— ×“×•-×¡×¤×¨×ª×™</h2>
                <p>×’× ×›×©×™×© ×©× ×™ ××¡×¤×¨×™× ×“×•-×¡×¤×¨×ª×™×™×, ×× ×—× ×• ×™×›×•×œ×™× ×œ×”×©×ª××© ×‘×¤×™×œ×•×’!</p>
                
                <div class="example">
                    <h3>×“×•×’××” 1: <span dir="ltr">12 Ã— 15 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×©× ×™ ×”××¡×¤×¨×™×:</p>
                    <div class="visual-box">
                        <span dir="ltr">12 Ã— 15 = (10 + 2) Ã— (10 + 5)</span>
                    </div>
                    <p>××– ×›×•×¤×œ×™× ×›×œ ×—×œ×§:</p>
                    <div class="calculation">
                      <div class="calc-content">10 Ã— 10 = 100
10 Ã— 5 = 50
2 Ã— 10 = 20
2 Ã— 5 = 10
100 + 50 + 20 + 10 = 180</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 12 ×œ-10 ×•-2, ××ª 15 ×œ-10 ×•-5</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× ×›×œ ×—×œ×§ ×‘×›×œ ×—×œ×§ (4 ×›×¤×œ×™× ×‘×¡×š ×”×›×œ)</p>
                        <p>×©×œ×‘ 3: ××—×‘×¨×™× ×”×›×œ</p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">180</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: <span dir="ltr">13 Ã— 24 = ?</span></h3>
                    <p>×× ×—× ×• ××—×œ×§×™× ××ª ×©× ×™ ×”××¡×¤×¨×™×:</p>
                    <div class="visual-box">
                        <span dir="ltr">13 Ã— 24 = (10 + 3) Ã— (20 + 4)</span>
                    </div>
                    <div class="calculation">
                      <div class="calc-content">10 Ã— 20 = 200
10 Ã— 4 = 40
3 Ã— 20 = 60
3 Ã— 4 = 12
200 + 40 + 60 + 12 = 312</div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ:</strong></p>
                        <p>×©×œ×‘ 1: × ×—×œ×§ ××ª 13 ×œ-10 ×•-3, ××ª 24 ×œ-20 ×•-4</p>
                        <p>×©×œ×‘ 2: ×›×•×¤×œ×™× ×›×œ ×—×œ×§ ×‘×›×œ ×—×œ×§</p>
                        <p>×©×œ×‘ 3: ××—×‘×¨×™× ×”×›×œ</p>
                        <p><strong>×ª×©×•×‘×”:</strong> <span dir="ltr">312</span></p>
                    </div>
                </div>
                
                <div class="example" style="border-right: 5px solid #ff6b6b;">
                    <h3>âš ï¸ ×˜×¢×•×ª × ×¤×•×¦×”: <span dir="ltr">14 Ã— 21 = ?</span></h3>
                    <p><strong>âŒ ×˜×¢×•×ª:</strong> ×©×•×›×—×™× ×œ×¢×©×•×ª ××ª ×›×œ ××¨×‘×¢×ª ×”×›×¤×œ×™×!</p>
                    <div class="calculation" style="background: #ffe6e6;">
                      <div class="calc-content">10 Ã— 20 = 200
4 Ã— 1 = 4
×ª×©×•×‘×” ×©×’×•×™×”: 204</div>
                    </div>
                    <p><strong>âœ“ ×”×“×¨×š ×”× ×›×•× ×”:</strong></p>
                    <div class="calculation">
                      <div class="calc-content">10 Ã— 20 = 200
10 Ã— 1 = 10
4 Ã— 20 = 80
4 Ã— 1 = 4
200 + 10 + 80 + 4 = 294</div>
                    </div>
                    <div class="steps">
                        <p><strong>×ª×–×›×•×¨×ª ×—×©×•×‘×”:</strong> ×›×©×™×© ×©× ×™ ××¡×¤×¨×™× ×“×•-×¡×¤×¨×ª×™×™×, ×¦×¨×™×š ×œ×¢×©×•×ª 4 ×›×¤×œ×™× ×‘×“×™×•×§!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game3" class="content">
            <div class="game">
                <h2>××©×—×§ ××ª×§×“×</h2>
                <div class="question-counter">×©××œ×” <span id="q-count3">1</span> ××ª×•×š 12</div>
                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 1.1em; text-align: right;">
                    ğŸ’¡ <strong>×˜×™×¤:</strong> ×—×œ×§×• ××ª ×©× ×™ ×”××¡×¤×¨×™× ×œ×¢×©×¨×•×ª ×•×™×—×™×“×•×ª, ×•××—×¨ ×›×š ×›×¤×œ×• ×›×œ ×—×œ×§ ×‘×›×œ ×—×œ×§!
                </div>
                <div class="score">× ×™×§×•×“: <span id="score3">0</span></div>
                <div class="problem-display" id="problem3">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer3" placeholder="×”×›× ×¡ ×ª×©×•×‘×”" min="0">
                    <br><br>
                    <button id="check3">×‘×“×•×§</button>
                </div>
                <div id="feedback3"></div>
                <div id="round-end3" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        var scores = { 1: 0, 2: 0, 3: 0 };
        var currentQuestion = { 1: 0, 2: 0, 3: 0 };
        var questionBank = { 1: [], 2: [], 3: [] };
        var answers = { 1: 0, 2: 0, 3: 0 };
        
        // ××©×—×§ 1: ×›×¤×œ ×¤×™×œ×•×’ ×‘×¡×™×¡×™ (××¡×¤×¨ Ã—×“-×¡×¤×¨×ª×™)
        function generateQ1() {
            var a = Math.floor(Math.random() * 8) + 3; // 3-10
            var b = Math.floor(Math.random() * 8) + 12; // 12-20
            var answer = a * b;
            return { a: a, b: b, answer: answer };
        }
        
        // ××©×—×§ 2: ×‘×¢×™×•×ª ××™×œ×•×œ×™×•×ª
        function generateQ2() {
            var scenarios = [
                { text: '×œ×“× ×™ ×™×© {a} ×§×•×¤×¡××•×ª, ×‘×›×œ ×§×•×¤×¡×” {b} ×¡×•×›×¨×™×•×ª. ×›××” ×¡×•×›×¨×™×•×ª ×‘×¡×š ×”×›×œ?', op: '*' },
                { text: '×‘×›×œ ×©×§×™×ª {a} ×ª×¤×•×—×™×. ×œ×¨×•×Ÿ {b} ×©×§×™×•×ª. ×›××” ×ª×¤×•×—×™× ×™×© ×œ×¨×•×Ÿ?', op: '*' },
                { text: '×”××•×¨×” ×—×™×œ×§×” {b} ×“×§×œ×™× ×œ-{a} ×›×™×ª×•×ª ×‘×©×•×•×”. ×›××” ×“×§×œ×™× ×‘×›×œ ×›×™×ª×”?', op: '/' },
                { text: '×‘×›×œ ×©×•×¨×” ×‘×’×Ÿ ×™×© {a} ×¤×¨×—×™×. ×™×© {b} ×©×•×¨×•×ª. ×›××” ×¤×¨×—×™× ×‘×¡×š ×”×›×œ?', op: '*' },
                { text: '× ×•×¢×” ×§× ×ª×” {a} ×¢×˜×™× ×‘××—×™×¨ ×©×œ {b} ×©×§×œ ×›×œ ××—×“. ×›××” ×©×§×œ×™× ×”×™× ×”×•×¦×™××”?', op: '*' },
                { text: '{b} ×™×œ×“×™× ×”×ª×—×œ×§×• ×œ-{a} ×§×‘×•×¦×•×ª ×©×•×•×ª. ×›××” ×™×œ×“×™× ×‘×›×œ ×§×‘×•×¦×”?', op: '/' },
                { text: '×‘×¡×¤×¨×™×™×” ×™×© {a} ××“×¤×™×, ×‘×›×œ ××“×£ {b} ×¡×¤×¨×™×. ×›××” ×¡×¤×¨×™× ×™×© ×‘×¡×š ×”×›×œ?', op: '*' },
                { text: '×‘××¨×’×– ×™×© {b} ×ª×¤×•×–×™×. ×¨×•×¦×™× ×œ×”×›× ×™×¡ ××•×ª× ×œ-{a} ×¡×œ×™× ×©×•×•×ª. ×›××” ×ª×¤×•×–×™× ×‘×›×œ ×¡×œ?', op: '/' }
            ];
            var scenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            var a = Math.floor(Math.random() * 6) + 3; // 3-8
            var b = Math.floor(Math.random() * 8) + 15; // 15-23
            var answer = scenario.op === '*' ? a * b : Math.floor(b / a);
            return { a: a, b: b, text: scenario.text.replace('{a}', a).replace('{b}', b), answer: answer };
        }
        
        // ××©×—×§ 3: ×›×¤×œ ××ª×§×“× (×“×•-×¡×¤×¨×ª×™ Ã— ×“×•-×¡×¤×¨×ª×™ ×¢× ×¤×™×œ×•×’)
        function generateQ3() {
            var a = Math.floor(Math.random() * 8) + 11; // 11-18
            var b = Math.floor(Math.random() * 8) + 11; // 11-18
            var answer = a * b;
            return { a: a, b: b, answer: answer };
        }
        
        function initGame(g) {
            for (var i = 0; i < 50; i++) {
                if (g === 1) questionBank[g].push(generateQ1());
                else if (g === 2) questionBank[g].push(generateQ2());
                else questionBank[g].push(generateQ3());
            }
            currentQuestion[g] = 0;
            nextQ(g);
        }
        
        function nextQ(g) {
            if (currentQuestion[g] < 12) {
                var q = questionBank[g][currentQuestion[g]];
                answers[g] = q.answer;
                
                if (g === 2) {
                    document.getElementById('problem2').innerHTML = q.text;
                } else {
                    var problemText = '<span class="problem-content">' + q.a + ' Ã— ' + q.b + '</span>';
                    var probId = (g === 3) ? 'problem3' : 'problem1';
                    document.getElementById(probId).innerHTML = problemText;
                }
                
                var answerId = (g === 2) ? 'answer2' : (g === 3) ? 'answer3' : 'answer1';
                document.getElementById(answerId).value = '';
                document.getElementById(answerId).focus();
                document.getElementById('feedback' + g).innerHTML = '';
                document.getElementById('q-count' + g).textContent = currentQuestion[g] + 1;
            }
        }
        
        function checkAns(g) {
            var answerId = (g === 2) ? 'answer2' : (g === 3) ? 'answer3' : 'answer1';
            var ans = parseInt(document.getElementById(answerId).value);
            var q = questionBank[g][currentQuestion[g]];
            
            if (isNaN(ans)) {
                document.getElementById(answerId).classList.add('shake');
                setTimeout(function() { document.getElementById(answerId).classList.remove('shake'); }, 300);
                return;
            }
            
            var correct = ans === answers[g];
            
            if (correct) {
                playSound('correct');
                scores[g]++;
                document.getElementById('score' + g).textContent = scores[g];
                document.getElementById('feedback' + g).innerHTML = '<div class="feedback correct">âœ“ × ×›×•×Ÿ! ×›×œ ×”×›×‘×•×“!</div>';
                
                currentQuestion[g]++;
                
                setTimeout(function() {
                    document.getElementById('feedback' + g).scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
                
                if (currentQuestion[g] >= 12) {
                    setTimeout(function() { showEnd(g); }, 2000);
                } else {
                    setTimeout(function() { nextQ(g); }, 2000);
                }
            } else {
                playSound('incorrect');
                document.getElementById(answerId).classList.add('shake');
                setTimeout(function() { document.getElementById(answerId).classList.remove('shake'); }, 300);
                
                var analysis = analyzeError(q, ans, answers[g]);
                var feedbackHTML = '<div class="feedback incorrect">âœ— ×˜×¢×•×ª ×§×˜× ×”! ×‘×•××• × ×‘×“×•×§:</div>';
                
                feedbackHTML += '<div class="detailed-feedback">';
                
                if (g === 2) {
                    // ××©×—×§ 2: ×”×¨××” ××ª ×”×ª×¨×’×™×œ ×”××ª××˜×™
                    feedbackHTML += '<strong>×”×ª×¨×’×™×œ:</strong> <span dir="ltr">' + q.a + ' Ã— ' + q.b + '</span><br><br>';
                } else {
                    feedbackHTML += '<strong>×”×©××œ×”:</strong> <span dir="ltr">' + q.a + ' Ã— ' + q.b + '</span><br><br>';
                }
                
                feedbackHTML += '<strong>×”×ª×©×•×‘×” ×©×œ×š:</strong> ' + ans + '<br>';
                feedbackHTML += '<strong>×”×ª×©×•×‘×” ×”× ×›×•× ×”:</strong> ' + answers[g] + '<br><br>';
                feedbackHTML += '<div class="analysis-box">' + analysis + '</div>';
                feedbackHTML += '</div>';
                
                // ×”×•×¡×£ ×›×¤×ª×•×¨ ×”××©×š
                feedbackHTML += '<div style="text-align: center; margin-top: 20px;">' +
                    '<button style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 40px; font-size: 1.1em; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;" onclick="proceedToNext(' + g + ')">ğŸ‘‰ ×œ×ª×¨×’×™×œ ×”×‘×</button>' +
                    '</div>';
                
                document.getElementById('feedback' + g).innerHTML = feedbackHTML;
                
                setTimeout(function() {
                    document.getElementById('feedback' + g).scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            }
        }
        
        function proceedToNext(g) {
            currentQuestion[g]++;
            if (currentQuestion[g] >= 12) {
                showEnd(g);
            } else {
                nextQ(g);
            }
        }
        
        function analyzeError(q, userAnswer, correctAnswer) {
            var a = q.a;
            var b = q.b;
            var tens = Math.floor(b / 10) * 10;
            var ones = b % 10;
            var part1 = a * tens;
            var part2 = a * ones;
            
            var analysis = '<span class="analysis-title">ğŸ“Š × ×™×ª×•×— ×”×˜×¢×•×ª:</span><br>';
            
            if (userAnswer === part1) {
                analysis += '× ×¨××” ×©×›×¤×œ×ª ×¨×§ ××ª ×”×—×œ×§ ×”×¨××©×•×Ÿ (×¢×©×¨×•×ª) ×•×©×›×—×ª ×œ×”×•×¡×™×£ ××ª ×”×—×œ×§ ×”×©× ×™! ';
                analysis += '<span dir="ltr">' + a + ' Ã— ' + tens + ' = ' + part1 + '</span> ××‘×œ ×¦×¨×™×š ×’× ';
                analysis += '<span dir="ltr">' + a + ' Ã— ' + ones + ' = ' + part2 + '</span><br>';
                analysis += '×”×¡×›×•× ×”×•×: <span dir="ltr">' + part1 + ' + ' + part2 + ' = ' + correctAnswer + '</span>';
            } else if (userAnswer === part2) {
                analysis += '× ×¨××” ×©×›×¤×œ×ª ×¨×§ ××ª ×”×—×œ×§ ×”×©× ×™ (×™×—×™×“×•×ª) ×•×©×›×—×ª ××ª ×”×—×œ×§ ×”×¨××©×•×Ÿ! ';
                analysis += '<span dir="ltr">' + a + ' Ã— ' + ones + ' = ' + part2 + '</span> ××‘×œ ×¦×¨×™×š ×’× ';
                analysis += '<span dir="ltr">' + a + ' Ã— ' + tens + ' = ' + part1 + '</span><br>';
                analysis += '×”×¡×›×•× ×”×•×: <span dir="ltr">' + part1 + ' + ' + part2 + ' = ' + correctAnswer + '</span>';
            } else {
                analysis += '<strong>×©×œ×‘×™ ×”×¤×ª×¨×•×Ÿ ×”× ×›×•×Ÿ:</strong><br>';
                analysis += '1ï¸âƒ£ ×—×œ×§ ××ª <span dir="ltr">' + b + '</span> ×œ-<span dir="ltr">' + tens + ' + ' + ones + '</span><br>';
                analysis += '2ï¸âƒ£ ×›×¤×•×œ ×—×œ×§ ×: <span dir="ltr">' + a + ' Ã— ' + tens + ' = ' + part1 + '</span><br>';
                analysis += '3ï¸âƒ£ ×›×¤×•×œ ×—×œ×§ ×‘: <span dir="ltr">' + a + ' Ã— ' + ones + ' = ' + part2 + '</span><br>';
                analysis += '4ï¸âƒ£ ×—×‘×¨ ××ª ×©× ×™×”×: <span dir="ltr">' + part1 + ' + ' + part2 + ' = ' + correctAnswer + '</span>';
            }
            
            return analysis;
        }
        
        function showEnd(g) {
            var pct = Math.round((scores[g] / 12) * 100);
            var trophy = pct >= 80 ? 'ğŸ†' : pct >= 60 ? 'ğŸ¥ˆ' : 'ğŸ¥‰';
            var message = '';
            if (pct >= 90) {
                message = '××ª×” ×¡×•×¤×¨ ×›×•×›×‘! ğŸŒŸ';
            } else if (pct >= 80) {
                message = '×™×¦× ×œ×š ××¢×•×œ×”! ğŸ‘';
            } else if (pct >= 70) {
                message = '×˜×•×‘ ×××“! ×”××©×š ×›×›×”! ğŸ’ª';
            } else if (pct >= 60) {
                message = '×—×œ×§ ×˜×•×‘! × ×¡×” ×©×•×‘! ğŸ¯';
            } else {
                message = '××œ ×ª×•×•×ª×¨! ×ª×¡×™×™× ×¢×•×“ ×¡×™×‘×•×‘! ğŸ’¯';
            }
            var html = '<div class="round-complete"><div class="trophy">' + trophy + '</div><h3>×¡×™×™××ª!</h3><p>×¦×™×•×Ÿ: ' + scores[g] + '/12</p><p>(' + pct + '%)</p><p style="font-size: 1.3em; margin-top: 20px;">' + message + '</p><button class="new-round-btn" onclick="resetGame(' + g + ')">×¡×™×‘×•×‘ × ×•×¡×£</button></div>';
            document.getElementById('round-end' + g).innerHTML = html;
            document.getElementById('round-end' + g).style.display = 'block';
            var probId = (g === 2) ? 'problem2' : (g === 3) ? 'problem3' : 'problem1';
            document.getElementById(probId).style.display = 'none';
            
            // ×’×œ×™×œ×” ××•×˜×•××˜×™×ª ×œ××¡×š ×”×¡×™×•×
            setTimeout(function() {
                document.getElementById('round-end' + g).scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }
        
        function resetGame(g) {
            scores[g] = 0;
            currentQuestion[g] = 0;
            document.getElementById('score' + g).textContent = '0';
            document.getElementById('round-end' + g).style.display = 'none';
            document.getElementById('feedback' + g).innerHTML = '';
            var probId = (g === 2) ? 'problem2' : (g === 3) ? 'problem3' : 'problem1';
            document.getElementById(probId).style.display = 'block';
            
            questionBank[g] = [];
            for (var i = 0; i < 50; i++) {
                if (g === 1) questionBank[g].push(generateQ1());
                else if (g === 2) questionBank[g].push(generateQ2());
                else questionBank[g].push(generateQ3());
            }
            
            var controlsSelector = (g === 1) ? '#game1 .controls' : (g === 2) ? '#game2 .controls' : '#game3 .controls';
            var controls = document.querySelector(controlsSelector);
            if (controls) controls.style.display = 'block';
            
            initGame(g);
        }
        
        window.onload = function() {
            var tabs = document.querySelectorAll('.tab');
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].onclick = function() {
                    playSound('click');
                    var tabId = this.getAttribute('data-tab');
                    var allContent = document.querySelectorAll('.content');
                    var allTabs = document.querySelectorAll('.tab');
                    
                    for (var j = 0; j < allContent.length; j++) {
                        allContent[j].classList.remove('active');
                    }
                    for (var k = 0; k < allTabs.length; k++) {
                        allTabs[k].classList.remove('active');
                    }
                    
                    document.getElementById(tabId).classList.add('active');
                    this.classList.add('active');
                    
                    if (tabId === 'game1' && currentQuestion[1] > 0) {
                        resetGame(1);
                    } else if (tabId === 'game2' && currentQuestion[2] > 0) {
                        resetGame(2);
                    } else if (tabId === 'game3' && currentQuestion[3] > 0) {
                        resetGame(3);
                    }
                };
            }
            
            var allInputs = document.querySelectorAll('input[type="number"]');
            for (var i = 0; i < allInputs.length; i++) {
                allInputs[i].addEventListener('wheel', function(e) {
                    e.preventDefault();
                });
                allInputs[i].addEventListener('focus', function() {
                    this.addEventListener('wheel', function(e) {
                        e.preventDefault();
                    });
                });
            }
            
            document.getElementById('answer1').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkAns(1);
            });
            document.getElementById('answer2').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkAns(2);
            });
            document.getElementById('answer3').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkAns(3);
            });
            
            document.getElementById('check1').onclick = function() { playSound('click'); checkAns(1); };
            document.getElementById('check2').onclick = function() { playSound('click'); checkAns(2); };
            document.getElementById('check3').onclick = function() { playSound('click'); checkAns(3); };
            
            initGame(1);
            initGame(2);
            initGame(3);
        };
        
        function playSound(type) {
            var audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            if (type === 'click') {
                var osc = audioContext.createOscillator();
                var gain = audioContext.createGain();
                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.type = 'sine';
                osc.frequency.value = 600;
                gain.gain.setValueAtTime(0.15, audioContext.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                osc.start(audioContext.currentTime);
                osc.stop(audioContext.currentTime + 0.15);
            } else if (type === 'correct') {
                var notes = [659.25, 783.99, 987.77]; // higher and more pleasant notes
                for (var i = 0; i < notes.length; i++) {
                    var osc = audioContext.createOscillator();
                    var gain = audioContext.createGain();
                    osc.connect(gain);
                    gain.connect(audioContext.destination);
                    osc.type = 'sine';
                    osc.frequency.value = notes[i];
                    gain.gain.setValueAtTime(0.15, audioContext.currentTime + i * 0.12);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.12 + 0.4);
                    osc.start(audioContext.currentTime + i * 0.12);
                    osc.stop(audioContext.currentTime + i * 0.12 + 0.4);
                }
            } else if (type === 'incorrect') {
                var osc = audioContext.createOscillator();
                var gain = audioContext.createGain();
                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.type = 'sine';
                osc.frequency.value = 200;
                gain.gain.setValueAtTime(0.15, audioContext.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                osc.start(audioContext.currentTime);
                osc.stop(audioContext.currentTime + 0.3);
            }
        }
    </script>
</body>
</html>
