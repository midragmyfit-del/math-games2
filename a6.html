<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×—×™×‘×•×¨ ×•×—×™×¡×•×¨ ×¢×“ 20 - ×›×™×ª×” ×'</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #764ba2;
            font-size: 1.3em;
            margin-bottom: 30px;
            font-weight: 500;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab-button {
            flex: 1;
            padding: 15px 20px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            min-width: 150px;
        }
        
        .tab-button:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .lesson-section {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #667eea;
        }
        
        .lesson-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .example-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border: 2px solid #667eea;
            font-size: 1.4em;
            text-align: center;
            direction: ltr;
        }
        
        .math-equation {
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .visual-dots {
            display: flex;
            gap: 6px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 15px 0;
            align-items: center;
        }
        
        .dot {
            width: 25px;
            height: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .dot.crossed {
            position: relative;
            opacity: 0.3;
        }
        
        .dot.crossed::after {
            content: 'âœ—';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: red;
            font-size: 18px;
            font-weight: bold;
        }
        
        .tens-ones {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .tens-group, .ones-group {
            text-align: center;
        }
        
        .tens-group h3, .ones-group h3 {
            font-size: 1.2em;
            color: #667eea;
            margin-bottom: 10px;
            direction: rtl;
        }
        
        .ten-block {
            display: inline-grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 5px;
            border: 4px solid #667eea;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }
        
        .ten-block .dot {
            width: 30px;
            height: 30px;
        }
        
        .game-container {
            background: #f8f9ff;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 3px solid #667eea;
        }
        
        .game-question {
            font-size: 2.5em;
            margin-bottom: 30px;
            color: #667eea;
            font-weight: bold;
            direction: ltr;
        }
        
        .game-options {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .option-button {
            padding: 20px 40px;
            font-size: 1.8em;
            background: white;
            border: 3px solid #667eea;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            min-width: 100px;
        }
        
        .option-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.05);
        }
        
        .option-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .feedback {
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
            min-height: 40px;
        }
        
        .correct {
            color: #4caf50;
        }
        
        .incorrect {
            color: #f5576c;
        }
        
        .score {
            font-size: 1.5em;
            margin-top: 20px;
            color: #667eea;
            font-weight: bold;
        }
        
        .round-counter {
            font-size: 1.3em;
            margin-top: 10px;
            color: #764ba2;
            font-weight: bold;
        }
        
        .next-button {
            padding: 15px 40px;
            font-size: 1.2em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .next-button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .next-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .game-complete {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.8em;
            font-weight: bold;
        }
        
        .restart-button {
            padding: 15px 40px;
            font-size: 1.2em;
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .restart-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .family-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .family-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #667eea;
        }
        
        .family-card .equation {
            font-size: 1.3em;
            color: #667eea;
            font-weight: bold;
            margin: 5px 0;
            direction: ltr;
        }
        
        .tip-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            direction: rtl;
        }
        
        .tip-box strong {
            color: #ff6f00;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>â•â– ×—×™×‘×•×¨ ×•×—×™×¡×•×¨ ×¢×“ 20 â•â–</h1>
        <div class="subtitle">ğŸ“– ×œ×ª×œ××™×“×™ ×›×™×ª×” ×' - ×¨××” ××ª×§×“××ª ğŸ“–</div>
        
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('lesson1')">ğŸ“š ×—×™×‘×•×¨ ×¢×“ 20</button>
            <button class="tab-button" onclick="showTab('lesson2')">ğŸ“˜ ×—×™×¡×•×¨ ×¢×“ 20</button>
            <button class="tab-button" onclick="showTab('lesson3')">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ××©×¤×—×•×ª ×¢×•×‘×“×•×ª</button>
            <button class="tab-button" onclick="showTab('game1')">ğŸ® ××©×—×§ ×—×™×‘×•×¨</button>
            <button class="tab-button" onclick="showTab('game2')">ğŸ¯ ××©×—×§ ×—×™×¡×•×¨</button>
            <button class="tab-button" onclick="showTab('game3')">âœ¨ ××©×—×§ ××©×¤×—×•×ª</button>
        </div>
        
        <div id="lesson1" class="tab-content active">
            <div class="lesson-section">
                <h2>â• ×—×™×‘×•×¨ ×¢×“ 20</h2>
                <p style="font-size: 1.3em; margin-bottom: 20px;">
                    ×›×©×× ×—× ×• ××—×‘×¨×™× ××¡×¤×¨×™× ×’×“×•×œ×™×, ××¤×©×¨ ×œ×¢×‘×•×¨ ×“×¨×š 10! ğŸ¯
                </p>
                
                <div class="example-box">
                    <div style="font-size: 1.2em; margin-bottom: 10px;">×“×•×’××” 1: ×¢×•×‘×¨ ×“×¨×š 10</div>
                    <div class="math-equation">8 + 5 = 13</div>
                    <div class="tip-box" style="direction: rtl; text-align: center;">
                        <strong style="display: block; margin-bottom: 10px;">××™×š ×¤×•×ª×¨×™×?</strong>
                        <div style="font-size: 1.1em; line-height: 1.8;">
                            ×œ-8 ×—×¡×¨×™× 2 ×›×“×™ ×œ×”×’×™×¢ ×œ-10<br>
                            ××– × ×¤×¨×§ ××ª 5 ×œ: 2 + 3<br>
                        </div>
                        <div style="direction: ltr; font-size: 1.2em; margin-top: 10px; font-weight: bold;">
                            8 + (2 + 3) = 10 + 3 = 13
                        </div>
                    </div>
                    <div class="tens-ones">
                        <div class="tens-group">
                            <h3>×¢×©×™×¨×™×™×” (10)</h3>
                            <div class="ten-block">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                        </div>
                        <div class="ones-group">
                            <h3>×™×—×™×“×•×ª (3)</h3>
                            <div class="visual-dots">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="example-box">
                    <div style="font-size: 1.2em; margin-bottom: 10px;">×“×•×’××” 2</div>
                    <div class="math-equation">9 + 7 = 16</div>
                    <div class="tip-box" style="direction: rtl; text-align: center;">
                        <strong style="display: block; margin-bottom: 10px;">××™×š ×¤×•×ª×¨×™×?</strong>
                        <div style="font-size: 1.1em; line-height: 1.8;">
                            ×œ-9 ×—×¡×¨ 1 ×›×“×™ ×œ×”×’×™×¢ ×œ-10<br>
                            ××– × ×¤×¨×§ ××ª 7 ×œ: 1 + 6<br>
                        </div>
                        <div style="direction: ltr; font-size: 1.2em; margin-top: 10px; font-weight: bold;">
                            9 + (1 + 6) = 10 + 6 = 16
                        </div>
                    </div>
                </div>
                
                <div class="example-box">
                    <div style="font-size: 1.2em; margin-bottom: 10px;">×“×•×’××” 3</div>
                    <div class="math-equation">12 + 6 = 18</div>
                    <p style="direction: rtl;">×©×ª×™× ×¢×©×¨×” ×•×¢×•×“ ×©×© ×©×•×•×” ×©××•× ×” ×¢×©×¨×”! ğŸ‰</p>
                </div>
            </div>
        </div>
        
        <div id="lesson2" class="tab-content">
            <div class="lesson-section">
                <h2>â– ×—×™×¡×•×¨ ×¢×“ 20</h2>
                <p style="font-size: 1.3em; margin-bottom: 20px;">
                    ×›×©××•×¨×™×“×™× ××¡×¤×¨×™× ×’×“×•×œ×™×, ×’× ×›××Ÿ ××¤×©×¨ ×œ×¢×‘×•×¨ ×“×¨×š 10! ğŸ¯
                </p>
                
                <div class="example-box">
                    <div style="font-size: 1.2em; margin-bottom: 10px;">×“×•×’××” 1: ×¢×•×‘×¨ ×“×¨×š 10</div>
                    <div class="math-equation">13 - 5 = 8</div>
                    <div class="tip-box" style="direction: rtl; text-align: center;">
                        <strong style="display: block; margin-bottom: 10px;">××™×š ×¤×•×ª×¨×™×?</strong>
                        <div style="font-size: 1.1em; line-height: 1.8;">
                            × ×¤×¨×§ ××ª 5 ×œ: 3 + 2<br>
                            ×§×•×“× ××•×¨×™×“×™× 3 (××’×™×¢×™× ×œ-10)<br>
                            ×•××– ××•×¨×™×“×™× ×¢×•×“ 2
                        </div>
                        <div style="direction: ltr; font-size: 1.2em; margin-top: 10px; font-weight: bold;">
                            13 - 3 = 10<br>
                            10 - 2 = 8
                        </div>
                    </div>
                    <div class="tens-ones">
                        <div class="tens-group">
                            <h3>×¢×©×™×¨×™×™×”</h3>
                            <div class="ten-block">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot crossed"></div>
                                <div class="dot crossed"></div>
                            </div>
                        </div>
                        <div class="ones-group">
                            <h3>×™×—×™×“×•×ª</h3>
                            <div class="visual-dots">
                                <div class="dot crossed"></div>
                                <div class="dot crossed"></div>
                                <div class="dot crossed"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="example-box">
                    <div style="font-size: 1.2em; margin-bottom: 10px;">×“×•×’××” 2</div>
                    <div class="math-equation">16 - 8 = 8</div>
                    <div class="tip-box" style="direction: rtl; text-align: center;">
                        <strong style="display: block; margin-bottom: 10px;">××™×š ×¤×•×ª×¨×™×?</strong>
                        <div style="font-size: 1.1em; line-height: 1.8;">
                            × ×¤×¨×§ ××ª 8 ×œ: 6 + 2<br>
                            ×§×•×“× ××•×¨×™×“×™× 6 (××’×™×¢×™× ×œ-10)<br>
                            ×•××– ××•×¨×™×“×™× ×¢×•×“ 2
                        </div>
                        <div style="direction: ltr; font-size: 1.2em; margin-top: 10px; font-weight: bold;">
                            16 - 6 = 10<br>
                            10 - 2 = 8
                        </div>
                    </div>
                </div>
                
                <div class="example-box">
                    <div style="font-size: 1.2em; margin-bottom: 10px;">×“×•×’××” 3</div>
                    <div class="math-equation">20 - 7 = 13</div>
                    <p style="direction: rtl;">×¢×©×¨×™× ×¤×—×•×ª ×©×‘×¢ ×©×•×•×” ×©×œ×•×© ×¢×©×¨×”! ğŸ‰</p>
                </div>
            </div>
        </div>
        
        <div id="lesson3" class="tab-content">
            <div class="lesson-section">
                <h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ××©×¤×—×•×ª ×¢×•×‘×“×•×ª ×¢×“ 20</h2>
                <p style="font-size: 1.3em; margin-bottom: 20px;">
                    ××©×¤×—×•×ª ×¢×•×‘×“×•×ª ×¢×•×‘×“×•×ª ×’× ×¢× ××¡×¤×¨×™× ×’×“×•×œ×™×! ğŸ 
                </p>
                
                <div class="example-box">
                    <div style="font-size: 1.3em; margin-bottom: 15px; direction: rtl;">
                        <strong>××©×¤×—×” 1:</strong> ×”××¡×¤×¨×™× 7, 8, 15
                    </div>
                    <div class="family-grid">
                        <div class="family-card">
                            <div class="equation">7 + 8 = 15</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">8 + 7 = 15</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">15 - 7 = 8</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">15 - 8 = 7</div>
                        </div>
                    </div>
                </div>
                
                <div class="example-box">
                    <div style="font-size: 1.3em; margin-bottom: 15px; direction: rtl;">
                        <strong>××©×¤×—×” 2:</strong> ×”××¡×¤×¨×™× 9, 6, 15
                    </div>
                    <div class="family-grid">
                        <div class="family-card">
                            <div class="equation">9 + 6 = 15</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">6 + 9 = 15</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">15 - 9 = 6</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">15 - 6 = 9</div>
                        </div>
                    </div>
                </div>
                
                <div class="example-box">
                    <div style="font-size: 1.3em; margin-bottom: 15px; direction: rtl;">
                        <strong>××©×¤×—×” 3:</strong> ×”××¡×¤×¨×™× 8, 12, 20
                    </div>
                    <div class="family-grid">
                        <div class="family-card">
                            <div class="equation">8 + 12 = 20</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">12 + 8 = 20</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">20 - 8 = 12</div>
                        </div>
                        <div class="family-card">
                            <div class="equation">20 - 12 = 8</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game1" class="tab-content">
            <div class="game-container">
                <h2>ğŸ® ××©×—×§ ×—×™×‘×•×¨ ×¢×“ 20</h2>
                <div class="round-counter" id="round1">×¡×™×‘×•×‘: 1/12</div>
                <div class="game-question" id="question1"></div>
                <div class="game-options" id="options1"></div>
                <div class="feedback" id="feedback1"></div>
                <div class="score" id="score1">× ×™×§×•×“: 0</div>
                <button class="next-button" id="nextBtn1" onclick="nextQuestion1()" disabled>×©××œ×” ×”×‘××”</button>
                <div id="complete1" style="display: none;">
                    <div class="game-complete">ğŸ‰ ×›×œ ×”×›×‘×•×“! ×¡×™×™××ª ××ª ×›×œ 12 ×”×©××œ×•×ª! ğŸ‰</div>
                    <button class="restart-button" onclick="restartGame1()">×¡×™×‘×•×‘ × ×•×¡×£</button>
                </div>
            </div>
        </div>
        
        <div id="game2" class="tab-content">
            <div class="game-container">
                <h2>ğŸ¯ ××©×—×§ ×—×™×¡×•×¨ ×¢×“ 20</h2>
                <div class="round-counter" id="round2">×¡×™×‘×•×‘: 1/12</div>
                <div class="game-question" id="question2"></div>
                <div class="game-options" id="options2"></div>
                <div class="feedback" id="feedback2"></div>
                <div class="score" id="score2">× ×™×§×•×“: 0</div>
                <button class="next-button" id="nextBtn2" onclick="nextQuestion2()" disabled>×©××œ×” ×”×‘××”</button>
                <div id="complete2" style="display: none;">
                    <div class="game-complete">ğŸ‰ ×›×œ ×”×›×‘×•×“! ×¡×™×™××ª ××ª ×›×œ 12 ×”×©××œ×•×ª! ğŸ‰</div>
                    <button class="restart-button" onclick="restartGame2()">×¡×™×‘×•×‘ × ×•×¡×£</button>
                </div>
            </div>
        </div>
        
        <div id="game3" class="tab-content">
            <div class="game-container">
                <h2>âœ¨ ××©×—×§ ××©×¤×—×•×ª ×¢×•×‘×“×•×ª</h2>
                <div style="font-size: 1.2em; margin-bottom: 20px; direction: rtl;">××¦× ××ª ×”×ª×¨×’×™×œ ×©××©×ª××© ×‘××•×ª× ××¡×¤×¨×™×!</div>
                <div class="round-counter" id="round3">×¡×™×‘×•×‘: 1/12</div>
                <div class="game-question" id="question3"></div>
                <div class="game-options" id="options3"></div>
                <div class="feedback" id="feedback3"></div>
                <div class="score" id="score3">× ×™×§×•×“: 0</div>
                <button class="next-button" id="nextBtn3" onclick="nextQuestion3()" disabled>×©××œ×” ×”×‘××”</button>
                <div id="complete3" style="display: none;">
                    <div class="game-complete">ğŸ‰ ×›×œ ×”×›×‘×•×“! ×¡×™×™××ª ××ª ×›×œ 12 ×”×©××œ×•×ª! ğŸ‰</div>
                    <button class="restart-button" onclick="restartGame3()">×¡×™×‘×•×‘ × ×•×¡×£</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let score1 = 0, score2 = 0, score3 = 0;
        let currentAnswer1, currentAnswer2, currentAnswer3;
        let round1 = 1, round2 = 1, round3 = 1;
        let answered1 = false, answered2 = false, answered3 = false;
        const maxRounds = 12;
        
        let audioContext;
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        } catch (e) {
            console.log('Audio not supported');
        }

        function playSound(freq, duration) {
            if (!audioContext) return;
            try {
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.frequency.value = freq;
                osc.type = 'sine';
                gain.gain.setValueAtTime(0.15, audioContext.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                osc.start();
                osc.stop(audioContext.currentTime + duration);
            } catch (e) {}
        }

        function playCorrectSound() {
            if (!audioContext) return;
            try {
                // ×× ×’×™× ×” ×©××—×”: ×“×•-××™-×¡×•×œ-×“×• ×’×‘×•×”
                const melody = [523.25, 659.25, 783.99, 1046.50];
                melody.forEach((freq, i) => {
                    setTimeout(() => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.value = freq;
                        osc.type = 'sine';
                        gain.gain.setValueAtTime(0.25, audioContext.currentTime);
                        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                        osc.start();
                        osc.stop(audioContext.currentTime + 0.3);
                    }, i * 120);
                });
            } catch (e) {}
        }

        function showTab(tabName) {
            try {
                playSound(600, 0.1);
                document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                document.getElementById(tabName).classList.add('active');
                event.target.classList.add('active');
            } catch (e) {}
        }

        function createOptions(correctAnswer, min, max) {
            const options = [correctAnswer];
            let attempts = 0;
            
            while (options.length < 4 && attempts < 50) {
                attempts++;
                const offset = Math.floor(Math.random() * 9) - 4;
                const wrong = correctAnswer + offset;
                
                if (wrong >= min && wrong <= max && !options.includes(wrong)) {
                    options.push(wrong);
                }
            }
            
            while (options.length < 4) {
                const random = Math.floor(Math.random() * (max - min + 1)) + min;
                if (!options.includes(random)) {
                    options.push(random);
                }
            }
            
            return options.sort(() => Math.random() - 0.5);
        }

        // ××©×—×§ 1: ×—×™×‘×•×¨
        function generateQuestion1() {
            try {
                answered1 = false;
                document.getElementById('nextBtn1').disabled = true;
                
                const num1 = Math.floor(Math.random() * 10) + 6;
                const num2 = Math.floor(Math.random() * (21 - num1));
                currentAnswer1 = num1 + num2;
                document.getElementById('question1').textContent = `${num1} + ${num2} = ?`;
                
                const options = createOptions(currentAnswer1, 0, 20);
                document.getElementById('options1').innerHTML = options
                    .map(n => `<button class="option-button" onclick="checkAnswer1(${n})">${n}</button>`).join('');
            } catch (e) {}
        }

        function checkAnswer1(answer) {
            if (answered1) return;
            try {
                answered1 = true;
                document.querySelectorAll('#options1 button').forEach(btn => btn.disabled = true);
                document.getElementById('nextBtn1').disabled = false;
                
                const feedback = document.getElementById('feedback1');
                if (answer === currentAnswer1) {
                    playCorrectSound();
                    feedback.textContent = 'ğŸ‰ ×›×œ ×”×›×‘×•×“! ×ª×©×•×‘×” × ×›×•× ×”!';
                    feedback.className = 'feedback correct';
                    score1 += 10;
                } else {
                    playSound(300, 0.2);
                    feedback.textContent = 'âŒ ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™× ' + currentAnswer1;
                    feedback.className = 'feedback incorrect';
                }
                document.getElementById('score1').textContent = '× ×™×§×•×“: ' + score1;
            } catch (e) {}
        }

        function nextQuestion1() {
            if (!answered1) return;
            try {
                playSound(600, 0.1);
                document.getElementById('feedback1').textContent = '';
                round1++;
                
                if (round1 > maxRounds) {
                    document.getElementById('question1').style.display = 'none';
                    document.getElementById('options1').style.display = 'none';
                    document.getElementById('nextBtn1').style.display = 'none';
                    document.getElementById('round1').style.display = 'none';
                    document.getElementById('complete1').style.display = 'block';
                } else {
                    document.getElementById('round1').textContent = `×¡×™×‘×•×‘: ${round1}/${maxRounds}`;
                    generateQuestion1();
                }
            } catch (e) {}
        }
        
        function restartGame1() {
            try {
                playSound(600, 0.1);
                round1 = 1;
                score1 = 0;
                answered1 = false;
                document.getElementById('score1').textContent = '× ×™×§×•×“: 0';
                document.getElementById('round1').textContent = `×¡×™×‘×•×‘: 1/${maxRounds}`;
                document.getElementById('question1').style.display = 'block';
                document.getElementById('options1').style.display = 'flex';
                document.getElementById('nextBtn1').style.display = 'inline-block';
                document.getElementById('round1').style.display = 'block';
                document.getElementById('complete1').style.display = 'none';
                document.getElementById('feedback1').textContent = '';
                generateQuestion1();
            } catch (e) {}
        }

        // ××©×—×§ 2: ×—×™×¡×•×¨
        function generateQuestion2() {
            try {
                answered2 = false;
                document.getElementById('nextBtn2').disabled = true;
                
                const num1 = Math.floor(Math.random() * 10) + 11;
                const num2 = Math.floor(Math.random() * (num1 - 5)) + 1;
                currentAnswer2 = num1 - num2;
                document.getElementById('question2').textContent = `${num1} - ${num2} = ?`;
                
                const options = createOptions(currentAnswer2, 0, 20);
                document.getElementById('options2').innerHTML = options
                    .map(n => `<button class="option-button" onclick="checkAnswer2(${n})">${n}</button>`).join('');
            } catch (e) {}
        }

        function checkAnswer2(answer) {
            if (answered2) return;
            try {
                answered2 = true;
                document.querySelectorAll('#options2 button').forEach(btn => btn.disabled = true);
                document.getElementById('nextBtn2').disabled = false;
                
                const feedback = document.getElementById('feedback2');
                if (answer === currentAnswer2) {
                    playCorrectSound();
                    feedback.textContent = 'ğŸ‰ ××¢×•×œ×”! ×ª×©×•×‘×” × ×›×•× ×”!';
                    feedback.className = 'feedback correct';
                    score2 += 10;
                } else {
                    playSound(300, 0.2);
                    feedback.textContent = 'âŒ ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™× ' + currentAnswer2;
                    feedback.className = 'feedback incorrect';
                }
                document.getElementById('score2').textContent = '× ×™×§×•×“: ' + score2;
            } catch (e) {}
        }

        function nextQuestion2() {
            if (!answered2) return;
            try {
                playSound(600, 0.1);
                document.getElementById('feedback2').textContent = '';
                round2++;
                
                if (round2 > maxRounds) {
                    document.getElementById('question2').style.display = 'none';
                    document.getElementById('options2').style.display = 'none';
                    document.getElementById('nextBtn2').style.display = 'none';
                    document.getElementById('round2').style.display = 'none';
                    document.getElementById('complete2').style.display = 'block';
                } else {
                    document.getElementById('round2').textContent = `×¡×™×‘×•×‘: ${round2}/${maxRounds}`;
                    generateQuestion2();
                }
            } catch (e) {}
        }
        
        function restartGame2() {
            try {
                playSound(600, 0.1);
                round2 = 1;
                score2 = 0;
                answered2 = false;
                document.getElementById('score2').textContent = '× ×™×§×•×“: 0';
                document.getElementById('round2').textContent = `×¡×™×‘×•×‘: 1/${maxRounds}`;
                document.getElementById('question2').style.display = 'block';
                document.getElementById('options2').style.display = 'flex';
                document.getElementById('nextBtn2').style.display = 'inline-block';
                document.getElementById('round2').style.display = 'block';
                document.getElementById('complete2').style.display = 'none';
                document.getElementById('feedback2').textContent = '';
                generateQuestion2();
            } catch (e) {}
        }

        // ××©×—×§ 3: ××©×¤×—×•×ª
        function generateQuestion3() {
            try {
                answered3 = false;
                document.getElementById('nextBtn3').disabled = true;
                
                const families = [[7,8,15],[6,9,15],[5,11,16],[8,9,17],[9,9,18],[7,12,19],[8,12,20],
                              [6,8,14],[5,8,13],[7,9,16],[6,10,16],[5,12,17],[4,14,18]];
                const [a,b,c] = families[Math.floor(Math.random() * families.length)];
                const eqs = [`${a}+${b}=${c}`, `${b}+${a}=${c}`, `${c}-${a}=${b}`, `${c}-${b}=${a}`];
                const base = eqs[Math.floor(Math.random() * eqs.length)];
                document.getElementById('question3').innerHTML = `<div style="direction:ltr;">${base}</div><div style="direction:rtl;font-size:0.7em;margin-top:10px;">××¦× ×ª×¨×’×™×œ ×××•×ª×” ××©×¤×—×”:</div>`;
                currentAnswer3 = [a,b,c].sort((x,y)=>x-y).join(',');
                
                const correct = eqs.filter(e => e !== base);
                const correctAnswer = correct[Math.floor(Math.random() * correct.length)];
                
                const wrongFamilies = families.filter(f => f.join(',') !== [a,b,c].join(','));
                const wrong1Fam = wrongFamilies[Math.floor(Math.random() * wrongFamilies.length)];
                const wrong2Fam = wrongFamilies.filter(f => f.join(',') !== wrong1Fam.join(','))[Math.floor(Math.random() * (wrongFamilies.length - 1))];
                
                const wrongEqs1 = [`${wrong1Fam[0]}+${wrong1Fam[1]}=${wrong1Fam[2]}`, `${wrong1Fam[2]}-${wrong1Fam[0]}=${wrong1Fam[1]}`];
                const wrongEqs2 = [`${wrong2Fam[0]}+${wrong2Fam[1]}=${wrong2Fam[2]}`, `${wrong2Fam[2]}-${wrong2Fam[0]}=${wrong2Fam[1]}`];
                const wrong1 = wrongEqs1[Math.floor(Math.random() * wrongEqs1.length)];
                const wrong2 = wrongEqs2[Math.floor(Math.random() * wrongEqs2.length)];
                
                const opts = [correctAnswer, wrong1, wrong2].sort(() => Math.random() - 0.5);
                document.getElementById('options3').innerHTML = opts
                    .map(eq => `<button class="option-button" onclick="checkAnswer3('${eq}')" style="direction:ltr;">${eq}</button>`).join('');
            } catch (e) {}
        }

        function checkAnswer3(answer) {
            if (answered3) return;
            try {
                answered3 = true;
                document.querySelectorAll('#options3 button').forEach(btn => btn.disabled = true);
                document.getElementById('nextBtn3').disabled = false;
                
                const feedback = document.getElementById('feedback3');
                const ansNums = answer.match(/\d+/g).map(Number).sort((a,b)=>a-b).join(',');
                if (ansNums === currentAnswer3) {
                    playCorrectSound();
                    feedback.textContent = 'ğŸ‰ ×™×¤×” ×××•×“! ×–××ª ××•×ª×” ××©×¤×—×”!';
                    feedback.className = 'feedback correct';
                    score3 += 10;
                } else {
                    playSound(300, 0.2);
                    feedback.textContent = 'âŒ ×–×• ××©×¤×—×” ××—×¨×ª!';
                    feedback.className = 'feedback incorrect';
                }
                document.getElementById('score3').textContent = '× ×™×§×•×“: ' + score3;
            } catch (e) {}
        }

        function nextQuestion3() {
            if (!answered3) return;
            try {
                playSound(600, 0.1);
                document.getElementById('feedback3').textContent = '';
                round3++;
                
                if (round3 > maxRounds) {
                    document.getElementById('question3').style.display = 'none';
                    document.getElementById('options3').style.display = 'none';
                    document.getElementById('nextBtn3').style.display = 'none';
                    document.getElementById('round3').style.display = 'none';
                    document.getElementById('complete3').style.display = 'block';
                } else {
                    document.getElementById('round3').textContent = `×¡×™×‘×•×‘: ${round3}/${maxRounds}`;
                    generateQuestion3();
                }
            } catch (e) {}
        }
        
        function restartGame3() {
            try {
                playSound(600, 0.1);
                round3 = 1;
                score3 = 0;
                answered3 = false;
                document.getElementById('score3').textContent = '× ×™×§×•×“: 0';
                document.getElementById('round3').textContent = `×¡×™×‘×•×‘: 1/${maxRounds}`;
                document.getElementById('question3').style.display = 'block';
                document.getElementById('options3').style.display = 'flex';
                document.getElementById('nextBtn3').style.display = 'inline-block';
                document.getElementById('round3').style.display = 'block';
                document.getElementById('complete3').style.display = 'none';
                document.getElementById('feedback3').textContent = '';
                generateQuestion3();
            } catch (e) {}
        }

        // ××ª×—×•×œ
        try {
            generateQuestion1();
            generateQuestion2();
            generateQuestion3();
        } catch (e) {
            console.error('Error initializing:', e);
        }
    </script>
</body>
</html>
