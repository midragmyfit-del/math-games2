<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×©×‘×¨×™× ××ª×§×“× - ×›×™×ª×” ×“'</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; background: white; border-radius: 25px; padding: 40px; box-shadow: 0 25px 70px rgba(0,0,0,0.4); }
        h1 { color: #667eea; text-align: center; margin-bottom: 15px; font-size: 3em; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        .subtitle { text-align: center; color: #666; margin-bottom: 35px; font-size: 1.3em; }
        .tabs { display: flex; gap: 12px; margin-bottom: 35px; flex-wrap: wrap; justify-content: center; }
        .tab { padding: 16px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 12px; cursor: pointer; font-size: 1.15em; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white; }
        .tab:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, #7c8ef5 0%, #8a5eb8 100%); }
        .tab.active { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); transform: scale(1.05); }
        .content { display: none; }
        .content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .lesson { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); }
        .lesson h2 { color: #ff6b6b; margin-bottom: 20px; font-size: 1.8em; }
        .lesson p { font-size: 1.2em; line-height: 1.8; margin-bottom: 15px; color: #333; }
        .example { background: white; padding: 20px; border-right: 5px solid #667eea; margin: 20px 0; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.08); }
        .example h3 { color: #f093fb; margin-bottom: 12px; font-size: 1.3em; }
        
        .fraction { 
            display: inline-flex; 
            flex-direction: column; 
            align-items: center; 
            vertical-align: middle;
            margin: 0 10px;
            direction: ltr;
        }
        .fraction .numerator { 
            padding: 5px 15px;
            border-bottom: 3px solid #333;
            font-size: 1.3em;
            font-weight: bold;
        }
        .fraction .denominator { 
            padding: 5px 15px;
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .calculation { 
            font-family: 'Courier New', monospace; 
            background: #f8f9fa; 
            padding: 30px; 
            border-radius: 10px; 
            margin: 15px 0; 
            text-align: center; 
            font-size: 1.3em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            direction: ltr;
        }
        
        .game { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; color: white; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .game h2 { margin-bottom: 20px; font-size: 2em; }
        .question-counter { text-align: center; font-size: 1.3em; margin: 15px 0; color: #fff; background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px; }
        .score { text-align: center; font-size: 1.8em; margin: 25px 0; color: #fff; font-weight: bold; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 12px; }
        .problem-display { 
            font-size: 1.5em; 
            text-align: center; 
            margin: 30px 0; 
            padding: 25px; 
            background: rgba(255,255,255,0.3); 
            border-radius: 15px; 
            font-weight: bold; 
            min-height: 150px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .problem-fraction { 
            display: inline-flex; 
            flex-direction: column; 
            align-items: center; 
            vertical-align: middle;
            margin: 0 15px;
            direction: ltr;
        }
        .problem-fraction .pf-num { 
            padding: 10px 25px; 
            font-size: 1.8em; 
            font-weight: bold;
            border-bottom: 4px solid white;
        }
        .problem-fraction .pf-den { 
            padding: 10px 25px; 
            font-size: 1.8em; 
            font-weight: bold;
        }
        
        input[type="number"] { width: 120px; padding: 15px; font-size: 1.8em; border: 4px solid white; border-radius: 10px; text-align: center; margin: 10px; font-weight: bold; }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        button { background: white; color: #667eea; border: none; padding: 14px 35px; font-size: 1.2em; border-radius: 10px; cursor: pointer; transition: all 0.3s; font-weight: bold; box-shadow: 0 6px 12px rgba(0,0,0,0.2); margin: 5px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .feedback { padding: 80px 120px !important; border-radius: 25px; margin-top: 30px; font-size: 2.2em; text-align: center; font-weight: bold; min-height: 160px !important; min-width: 500px !important; box-shadow: 0 10px 30px rgba(0,0,0,0.3); animation: popIn 0.3s ease-out; display: flex; align-items: center; justify-content: center; }
        .correct { background: linear-gradient(135deg, #51cf66 0%, #40c057 100%) !important; color: white !important; }
        .incorrect { background: linear-gradient(135deg, #ff6b6b 0%, #fa5252 100%) !important; color: white !important; }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .controls { text-align: center; margin: 25px 0; }
        .steps { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: right; }
        .steps p { margin: 10px 0; font-size: 1.1em; }
        .answer-fractions { display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap; }
        .fraction-input-group { display: inline-flex; flex-direction: column; align-items: center; margin: 20px; }
        .fraction-input-group label { display: block; font-size: 1.2em; margin-bottom: 10px; color: white; }
        .fraction-input-container { display: flex; flex-direction: column; align-items: center; }
        .fraction-input-container input { width: 120px; margin: 5px 0; }
        .fraction-divider { width: 140px; height: 4px; background: white; margin: 5px 0; border-radius: 2px; }
        
        .operator {
            font-size: 2em;
            font-weight: bold;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>×©×‘×¨×™× ××ª×§×“×</h1>
        <div class="subtitle">×›×™×ª×” ×“' - ×‘×•××• ×œ×œ××•×“ ×©×‘×¨×™×!</div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('lesson1')">ğŸ“š ×©×™×¢×•×¨: ×©×‘×¨×™× ×©×•×•×™ ×¢×¨×š</button>
            <button class="tab" onclick="switchTab('game1')">ğŸ® ××©×—×§: ×©×•×•×™ ×¢×¨×š</button>
            <button class="tab" onclick="switchTab('lesson2')">ğŸ“š ×©×™×¢×•×¨: ×”×©×•×•××ª ×©×‘×¨×™×</button>
            <button class="tab" onclick="switchTab('game2')">ğŸ¯ ××©×—×§: ×”×©×•×•××”</button>
            <button class="tab" onclick="switchTab('lesson3')">ğŸ“š ×©×™×¢×•×¨: ×—×™×‘×•×¨ ×•×—×™×¡×•×¨</button>
            <button class="tab" onclick="switchTab('game3')">ğŸ† ××©×—×§: ×—×™×‘×•×¨ ×•×—×™×¡×•×¨</button>
            <button class="tab" onclick="switchTab('lesson4')">ğŸ“š ×©×™×¢×•×¨: ×›×¤×œ ×©×‘×¨ ×‘××¡×¤×¨</button>
            <button class="tab" onclick="switchTab('game4')">â­ ××©×—×§: ×›×¤×œ</button>
            <button class="tab" onclick="switchTab('lesson5')">ğŸ“š ×©×™×¢×•×¨: ××¡×¤×¨×™× ××¢×•×¨×‘×™×</button>
            <button class="tab" onclick="switchTab('game5')">ğŸ² ××©×—×§: ××¡×¤×¨×™× ××¢×•×¨×‘×™×</button>
        </div>
        
        <div id="lesson1" class="content active">
            <div class="lesson">
                <h2>×©×‘×¨×™× ×©×•×•×™ ×¢×¨×š - ×”×¨×—×‘×” ×•×¦××¦×•×</h2>
                <p>×©×‘×¨×™× ×©×•×•×™ ×¢×¨×š ×”× ×©×‘×¨×™× ×©××™×™×¦×’×™× ××ª ××•×ª×• ×”×¢×¨×š, ××¤×™×œ×• ×©×”× × ×¨××™× ×©×•× ×”!</p>
                
                <div class="example">
                    <h3>××”×™ ×”×¨×—×‘×ª ×©×‘×¨?</h3>
                    <p>×›×©××¨×—×™×‘×™× ×©×‘×¨, ×›×•×¤×œ×™× ××ª ×”××•× ×” ×•××ª ×”××›× ×” ×‘××•×ª×• ××¡×¤×¨:</p>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">1</div>
                            <div class="denominator">2</div>
                        </div>
                        <span class="operator">=</span>
                        <div class="fraction">
                            <div class="numerator">2</div>
                            <div class="denominator">4</div>
                        </div>
                        <span class="operator">=</span>
                        <div class="fraction">
                            <div class="numerator">3</div>
                            <div class="denominator">6</div>
                        </div>
                        <span class="operator">=</span>
                        <div class="fraction">
                            <div class="numerator">4</div>
                            <div class="denominator">8</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p>×›×•×¤×œ×™× ×‘-2: <span style="direction: ltr; display: inline-block;">(1Ã—2)/(2Ã—2) = 2/4</span></p>
                        <p>×›×•×¤×œ×™× ×‘-3: <span style="direction: ltr; display: inline-block;">(1Ã—3)/(2Ã—3) = 3/6</span></p>
                        <p>×›×•×¤×œ×™× ×‘-4: <span style="direction: ltr; display: inline-block;">(1Ã—4)/(2Ã—4) = 4/8</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>××”×• ×¦××¦×•× ×©×‘×¨?</h3>
                    <p>×›×©××¦××¦××™× ×©×‘×¨, ××—×œ×§×™× ××ª ×”××•× ×” ×•××ª ×”××›× ×” ×‘××•×ª×• ××¡×¤×¨:</p>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">12</div>
                            <div class="denominator">18</div>
                        </div>
                        <span class="operator">=</span>
                        <div class="fraction">
                            <div class="numerator">6</div>
                            <div class="denominator">9</div>
                        </div>
                        <span class="operator">=</span>
                        <div class="fraction">
                            <div class="numerator">2</div>
                            <div class="denominator">3</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘ 1:</strong> ××—×œ×§×™× ×‘-2: <span style="direction: ltr; display: inline-block;">(12Ã·2)/(18Ã·2) = 6/9</span></p>
                        <p><strong>×©×œ×‘ 2:</strong> ××—×œ×§×™× ×‘-3: <span style="direction: ltr; display: inline-block;">(6Ã·3)/(9Ã·3) = 2/3</span></p>
                        <p><strong>2/3 ×”×•× ×”×©×‘×¨ ×”×›×™ ××¦×•××¦×!</strong></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×˜×™×¤ ×—×©×•×‘!</h3>
                    <p>×›×“×™ ×œ××¦×•× ×©×‘×¨×™× ×©×•×•×™ ×¢×¨×š ×‘××”×™×¨×•×ª, ×—×¤×©×• ××ª <strong>×”××—×œ×§ ×”××©×•×ª×£ ×”×’×“×•×œ ×‘×™×•×ª×¨</strong> ×©×œ ×”××•× ×” ×•×”××›× ×”.</p>
                </div>
            </div>
        </div>
        
        <div id="game1" class="content">
            <div class="game">
                <h2>××©×—×§ ×©×‘×¨×™× ×©×•×•×™ ×¢×¨×š</h2>
                <div class="question-counter">×©××œ×” <span id="qc1">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="sc1">0</span></div>
                <div class="problem-display" id="prob1"></div>
                <div class="controls">
                    <div class="answer-fractions">
                        <div class="fraction-input-group">
                            <label>×ª×©×•×‘×”:</label>
                            <div class="fraction-input-container">
                                <input type="number" id="n1" placeholder="××•× ×”">
                                <div class="fraction-divider"></div>
                                <input type="number" id="d1" placeholder="××›× ×”">
                            </div>
                        </div>
                    </div>
                    <br><br>
                    <button onclick="checkAnswer(1)">×‘×“×•×§</button>
                </div>
                <div id="fb1" class="feedback"></div>
            </div>
        </div>
        
        <div id="lesson2" class="content">
            <div class="lesson">
                <h2>×”×©×•×•××ª ×©×‘×¨×™× ×¢× ××›× ×™× ×©×•× ×™×</h2>
                <p>×›×“×™ ×œ×”×©×•×•×ª ×©×‘×¨×™× ×¢× ××›× ×™× ×©×•× ×™×, ×¦×¨×™×š ×œ×”×¤×•×š ××•×ª× ×œ×©×‘×¨×™× ×¢× ××•×ª×• ××›× ×”!</p>
                
                <div class="example">
                    <h3>×“×•×’××” 1: ×”×©×•×•××ª 1/2 ×•-2/3</h3>
                    <div class="steps">
                        <p><strong>×©×œ×‘ 1:</strong> ××•×¦××™× ××›× ×” ××©×•×ª×£ (6 ×”×•× ××›×¤×œ×” ×©×œ 2 ×•-3)</p>
                        <p><strong>×©×œ×‘ 2:</strong> ××¨×—×™×‘×™× ×›×œ ×©×‘×¨:</p>
                        <p><span style="direction: ltr; display: inline-block;">1/2 = (1Ã—3)/(2Ã—3) = 3/6</span></p>
                        <p><span style="direction: ltr; display: inline-block;">2/3 = (2Ã—2)/(3Ã—2) = 4/6</span></p>
                        <p><strong>×©×œ×‘ 3:</strong> ××©×•×•×™×: <span style="direction: ltr; display: inline-block;">3/6 < 4/6</span></p>
                        <p><strong>××¡×§× ×”:</strong> <span style="direction: ltr; display: inline-block;">1/2 < 2/3</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: ×”×©×•×•××ª 3/4 ×•-5/6</h3>
                    <div class="steps">
                        <p><strong>××›× ×” ××©×•×ª×£:</strong> 12</p>
                        <p><span style="direction: ltr; display: inline-block;">3/4 = (3Ã—3)/(4Ã—3) = 9/12</span></p>
                        <p><span style="direction: ltr; display: inline-block;">5/6 = (5Ã—2)/(6Ã—2) = 10/12</span></p>
                        <p><strong>××¡×§× ×”:</strong> <span style="direction: ltr; display: inline-block;">9/12 < 10/12</span>, ×œ×›×Ÿ <span style="direction: ltr; display: inline-block;">3/4 < 5/6</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×˜×¨×™×§ ××”×™×¨!</h3>
                    <p>×× ×©× ×™ ×©×‘×¨×™× ×™×© ×œ×”× ××•×ª×• ××•× ×” - ×”×©×‘×¨ ×¢× ×”××›× ×” ×”×§×˜×Ÿ ×™×•×ª×¨ ×”×•× ×”×’×“×•×œ ×™×•×ª×¨!</p>
                    <p>×“×•×’××”: 1/3 > 1/4 (×©×œ×™×© ×’×“×•×œ ××¨×‘×¢)</p>
                </div>
            </div>
        </div>
        
        <div id="game2" class="content">
            <div class="game">
                <h2>××©×—×§ ×”×©×•×•××ª ×©×‘×¨×™×</h2>
                <div class="question-counter">×©××œ×” <span id="qc2">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="sc2">0</span></div>
                <div class="problem-display" id="prob2"></div>
                <div class="controls">
                    <button onclick="checkComp('<')"><</button>
                    <button onclick="checkComp('=')">=</button>
                    <button onclick="checkComp('>')">></button>
                </div>
                <div id="fb2" class="feedback"></div>
            </div>
        </div>
        
        <div id="lesson3" class="content">
            <div class="lesson">
                <h2>×—×™×‘×•×¨ ×•×—×™×¡×•×¨ ×©×‘×¨×™×</h2>
                <p>×›×©××—×‘×¨×™× ××• ××—×¡×¨×™× ×©×‘×¨×™×, ×”× ×—×™×™×‘×™× ×œ×”×™×•×ª ×¢× ××•×ª×• ××›× ×”!</p>
                
                <div class="example">
                    <h3>×—×™×‘×•×¨ ×©×‘×¨×™× ×¢× ××•×ª×• ××›× ×”</h3>
                    <p><strong>×”×›×œ×œ ×”×¤×©×•×˜:</strong> ×›×©×”××›× ×” ×–×”×” - ××—×‘×¨×™× ×¨×§ ××ª ×”××•× ×™×, ×•×”××›× ×” × ×©××¨!</p>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">2</div>
                            <div class="denominator">5</div>
                        </div>
                        <span class="operator">+</span>
                        <div class="fraction">
                            <div class="numerator">1</div>
                            <div class="denominator">5</div>
                        </div>
                        <span class="operator">=</span>
                        <div class="fraction">
                            <div class="numerator">3</div>
                            <div class="denominator">5</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘ 1:</strong> ×‘×•×“×§×™× - ×”××›× ×” ×–×”×”? ×›×Ÿ! ×©× ×™×”× 5</p>
                        <p><strong>×©×œ×‘ 2:</strong> ××—×‘×¨×™× ××ª ×”××•× ×™×: <span style="direction: ltr; display: inline-block;">2 + 1 = 3</span></p>
                        <p><strong>×©×œ×‘ 3:</strong> ×”××›× ×” × ×©××¨: 5</p>
                        <p><strong>×ª×©×•×‘×”:</strong> <div class="fraction" style="display: inline-flex;"><div class="numerator">3</div><div class="denominator">5</div></div></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×—×™×‘×•×¨ ×©×‘×¨×™× ×¢× ××›× ×™× ×©×•× ×™×</h3>
                    <p><strong>×—×©×•×‘ ×œ×–×›×•×¨:</strong> ××™ ××¤×©×¨ ×œ×—×‘×¨ ×©×‘×¨×™× ×¢× ××›× ×™× ×©×•× ×™× ×™×©×™×¨×•×ª! ×§×•×“× ×¦×¨×™×š ×œ×”×¤×•×š ××•×ª× ×œ××•×ª×• ××›× ×”.</p>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">1</div>
                            <div class="denominator">2</div>
                        </div>
                        <span class="operator">+</span>
                        <div class="fraction">
                            <div class="numerator">1</div>
                            <div class="denominator">4</div>
                        </div>
                        <span class="operator">=</span>
                        <span style="margin: 0 5px;">?</span>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘ 1:</strong> ××•×¦××™× ××›× ×” ××©×•×ª×£ - ××” ××ª××™× ×œ×©× ×™×”×? 4!</p>
                        <p><strong>×©×œ×‘ 2:</strong> ××¨×—×™×‘×™× ××ª <div class="fraction" style="display: inline-flex;"><div class="numerator">1</div><div class="denominator">2</div></div>:</p>
                        <p style="margin-right: 30px;">×›×•×¤×œ×™× ××•× ×” ×•××›× ×” ×‘-2: <span style="direction: ltr; display: inline-block;">(1Ã—2)/(2Ã—2) = </span><div class="fraction" style="display: inline-flex;"><div class="numerator">2</div><div class="denominator">4</div></div></p>
                        <p><strong>×©×œ×‘ 3:</strong> ×”×©×‘×¨ ×”×©× ×™ ×›×‘×¨ ×¢× ××›× ×” 4, ××– × ×©××¨ <div class="fraction" style="display: inline-flex;"><div class="numerator">1</div><div class="denominator">4</div></div></p>
                        <p><strong>×©×œ×‘ 4:</strong> ×¢×›×©×™×• ××—×‘×¨×™×: <span style="direction: rtl; display: inline-block;"><div class="fraction" style="display: inline-flex;"><div class="numerator">3</div><div class="denominator">4</div></div> = <div class="fraction" style="display: inline-flex;"><div class="numerator">1</div><div class="denominator">4</div></div> + <div class="fraction" style="display: inline-flex;"><div class="numerator">2</div><div class="denominator">4</div></div></span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×—×™×¡×•×¨ ×©×‘×¨×™× ×¢× ××•×ª×• ××›× ×”</h3>
                    <p><strong>×”×›×œ×œ:</strong> ×‘×“×™×•×§ ×›××• ×—×™×‘×•×¨ - ×›×©×”××›× ×” ×–×”×”, ××—×¡×¨×™× ×¨×§ ××ª ×”××•× ×™×!</p>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">4</div>
                            <div class="denominator">5</div>
                        </div>
                        <span class="operator">-</span>
                        <div class="fraction">
                            <div class="numerator">2</div>
                            <div class="denominator">5</div>
                        </div>
                        <span class="operator">=</span>
                        <div class="fraction">
                            <div class="numerator">2</div>
                            <div class="denominator">5</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘ 1:</strong> ×”××›× ×” ×–×”×”? ×›×Ÿ! ×©× ×™×”× 5</p>
                        <p><strong>×©×œ×‘ 2:</strong> ××—×¡×¨×™× ××ª ×”××•× ×™×: <span style="direction: ltr; display: inline-block;">4 - 2 = 2</span></p>
                        <p><strong>×©×œ×‘ 3:</strong> ×”××›× ×” × ×©××¨: 5</p>
                        <p><strong>×ª×©×•×‘×”:</strong> <div class="fraction" style="display: inline-flex;"><div class="numerator">2</div><div class="denominator">5</div></div></p>
                        <p style="color: #e74c3c; font-weight: bold;">âš ï¸ ×©×™××• ×œ×‘: ××—×¡×¨×™× ×¨×§ ××ª ×”××•× ×™×, ×œ× ××ª ×”××›× ×™×!</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×—×™×¡×•×¨ ×©×‘×¨×™× ×¢× ××›× ×™× ×©×•× ×™× - ××¤×•×¨×˜!</h3>
                    <p><strong>×“×•×’××” ××¤×•×¨×˜×ª:</strong> × ×—×¡×™×¨ <span style="direction: ltr; display: inline-block;">3/4 - 1/2</span></p>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">3</div>
                            <div class="denominator">4</div>
                        </div>
                        <span class="operator">-</span>
                        <div class="fraction">
                            <div class="numerator">1</div>
                            <div class="denominator">2</div>
                        </div>
                        <span class="operator">=</span>
                        <span style="margin: 0 5px;">?</span>
                    </div>
                    <div class="steps">
                        <p><strong>ğŸ” ×‘×“×™×§×” ×¨××©×•× ×”:</strong> ×”×× ×”××›× ×™× ×–×”×™×?</p>
                        <p style="margin-right: 30px;">4 ×•-2? ×œ×! ××– ×¦×¨×™×š ×œ×”×¤×•×š ××•×ª× ×œ××•×ª×• ××›× ×”</p>
                        
                        <p><strong>ğŸ¯ ×©×œ×‘ 1: ××•×¦××™× ××›× ×” ××©×•×ª×£</strong></p>
                        <p style="margin-right: 30px;">×”××›× ×” ×”××©×•×ª×£ ×”×§×˜×Ÿ ×‘×™×•×ª×¨ ×©×œ 4 ×•-2 ×”×•× 4</p>
                        <p style="margin-right: 30px;">(×›×™ 4 ××ª×—×œ×§ ×’× ×‘-4 ×•×’× ×‘-2)</p>
                        
                        <p><strong>ğŸ”„ ×©×œ×‘ 2: ××¨×—×™×‘×™× ×©×‘×¨×™× ×©×¦×¨×™×š</strong></p>
                        <p style="margin-right: 30px;">×”×©×‘×¨ ×”×¨××©×•×Ÿ <div class="fraction" style="display: inline-flex;"><div class="numerator">3</div><div class="denominator">4</div></div> - ×›×‘×¨ ×¢× ××›× ×” 4, ××¢×•×œ×”! × ×©××¨ <div class="fraction" style="display: inline-flex;"><div class="numerator">3</div><div class="denominator">4</div></div></p>
                        <p style="margin-right: 30px;">×”×©×‘×¨ ×”×©× ×™ <div class="fraction" style="display: inline-flex;"><div class="numerator">1</div><div class="denominator">2</div></div> - ×¦×¨×™×š ×œ×”×¤×•×š ×œ-4</p>
                        <p style="margin-right: 30px;">×›×“×™ ×œ×”×¤×•×š 2 ×œ-4, ×›×•×¤×œ×™× ×‘-2</p>
                        <p style="margin-right: 30px;">××– ×›×•×¤×œ×™× ×’× ××•× ×” ×•×’× ××›× ×” ×‘-2:</p>
                        <p style="margin-right: 60px; direction: ltr; display: inline-block;">1Ã—2 = 2 (×”××•× ×” ×”×—×“×©)</p>
                        <p style="margin-right: 60px; direction: ltr; display: inline-block;">2Ã—2 = 4 (×”××›× ×” ×”×—×“×©)</p>
                        <p style="margin-right: 30px;">×ª×•×¦××”: <div class="fraction" style="display: inline-flex;"><div class="numerator">1</div><div class="denominator">2</div></div> = <div class="fraction" style="display: inline-flex;"><div class="numerator">2</div><div class="denominator">4</div></div></p>
                        
                        <p><strong>âœï¸ ×©×œ×‘ 3: ×›×•×ª×‘×™× ××—×“×© ×¢× ××•×ª×• ××›× ×”</strong></p>
                        <p style="margin-right: 30px; direction: rtl; display: inline-block;">? = <div class="fraction" style="display: inline-flex;"><div class="numerator">2</div><div class="denominator">4</div></div> - <div class="fraction" style="display: inline-flex;"><div class="numerator">3</div><div class="denominator">4</div></div></p>
                        
                        <p><strong>â– ×©×œ×‘ 4: ××—×¡×¨×™× ××ª ×”××•× ×™×</strong></p>
                        <p style="margin-right: 30px;">×”××›× ×” ×–×”×” (4), ××– ××—×¡×¨×™× ×¨×§ ××•× ×™×:</p>
                        <p style="margin-right: 30px; direction: ltr; display: inline-block;">3 - 2 = 1</p>
                        <p style="margin-right: 30px;">×”××›× ×” × ×©××¨: 4</p>
                        
                        <p><strong>âœ… ×ª×©×•×‘×” ×¡×•×¤×™×ª:</strong> <div class="fraction" style="display: inline-flex;"><div class="numerator">1</div><div class="denominator">4</div></div></p>
                        
                        <p style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 15px;">
                            <strong>ğŸ’¡ ×˜×™×¤ ×—×©×•×‘ ×œ×—×™×¡×•×¨:</strong><br>
                            ×ª××™×“ ×•×“××• ×©×”×©×‘×¨ ×”×¨××©×•×Ÿ (×©××× ×• ××—×¡×¨×™×) ×’×“×•×œ ××”×©× ×™!<br>
                            ×× ×œ× - ×”×ª×©×•×‘×” ×ª×”×™×” ×©×œ×™×œ×™×ª, ×•×–×” ×™×•×ª×¨ ××ª×§×“×.
                        </p>
                    </div>
                </div>
                

            </div>
        </div>
        
        <div id="game3" class="content">
            <div class="game">
                <h2>××©×—×§ ×—×™×‘×•×¨ ×•×—×™×¡×•×¨</h2>
                <div class="question-counter">×©××œ×” <span id="qc3">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="sc3">0</span></div>
                <div class="problem-display" id="prob3"></div>
                <div class="controls">
                    <div class="answer-fractions">
                        <div class="fraction-input-group">
                            <label>×ª×©×•×‘×”:</label>
                            <div class="fraction-input-container">
                                <input type="number" id="n3" placeholder="××•× ×”">
                                <div class="fraction-divider"></div>
                                <input type="number" id="d3" placeholder="××›× ×”">
                            </div>
                        </div>
                    </div>
                    <br><br>
                    <button onclick="checkAnswer(3)">×‘×“×•×§</button>
                </div>
                <div id="fb3" class="feedback"></div>
            </div>
        </div>
        
        <div id="lesson4" class="content">
            <div class="lesson">
                <h2>×›×¤×œ ×©×‘×¨ ×‘××¡×¤×¨ ×©×œ×</h2>
                <p>×›×©×›×•×¤×œ×™× ×©×‘×¨ ×‘××¡×¤×¨ ×©×œ×, ×›×•×¤×œ×™× ××ª ×”××•× ×” ×‘××¡×¤×¨ ×•×”××›× ×” × ×©××¨!</p>
                
                <div class="example">
                    <h3>×“×•×’××” 1: 2/3 Ã— 4</h3>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">2</div>
                            <div class="denominator">3</div>
                        </div>
                        <span class="operator">Ã— 4 =</span>
                        <div class="fraction">
                            <div class="numerator">8</div>
                            <div class="denominator">3</div>
                        </div>
                        <span class="operator">=</span>
                        <strong style="font-size: 1.5em;">2</strong>
                        <div class="fraction">
                            <div class="numerator">2</div>
                            <div class="denominator">3</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘ 1:</strong> ×›×•×¤×œ×™× ××ª ×”××•× ×”: <span style="direction: ltr; display: inline-block;">2 Ã— 4 = 8</span></p>
                        <p><strong>×©×œ×‘ 2:</strong> ×”××›× ×” × ×©××¨ 3: <span style="direction: ltr; display: inline-block;">8/3</span></p>
                        <p><strong>×©×œ×‘ 3:</strong> ×”×•×¤×›×™× ×œ××¡×¤×¨ ××¢×•×¨×‘:</p>
                        <div style="direction: rtl; display: flex; align-items: center; gap: 10px; margin-right: 30px; margin-top: 10px;">
                            <div class="fraction" style="display: inline-flex;">
                                <div class="numerator">2</div>
                                <div class="denominator">3</div>
                            </div>
                            <strong style="font-size: 2em;">2</strong>
                            <span style="font-size: 1.5em;">=</span>
                            <div class="fraction" style="display: inline-flex;">
                                <div class="numerator">8</div>
                                <div class="denominator">3</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: 3/5 Ã— 2</h3>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">3</div>
                            <div class="denominator">5</div>
                        </div>
                        <span class="operator">Ã— 2 =</span>
                        <div class="fraction">
                            <div class="numerator">6</div>
                            <div class="denominator">5</div>
                        </div>
                        <span class="operator">=</span>
                        <strong style="font-size: 1.5em;">1</strong>
                        <div class="fraction">
                            <div class="numerator">1</div>
                            <div class="denominator">5</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p><span style="direction: ltr; display: inline-block;">3 Ã— 2 = 6</span>, ××– ×”×ª×©×•×‘×”: <span style="direction: ltr; display: inline-block;">6/5</span></p>
                        <p>×›××¡×¤×¨ ××¢×•×¨×‘: 1 ×•-<span style="direction: ltr; display: inline-block;">1/5</span></p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game4" class="content">
            <div class="game">
                <h2>××©×—×§ ×›×¤×œ ×©×‘×¨</h2>
                <div class="question-counter">×©××œ×” <span id="qc4">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="sc4">0</span></div>
                <div class="problem-display" id="prob4"></div>
                <div class="controls">
                    <div class="answer-fractions">
                        <div class="fraction-input-group">
                            <label>×ª×©×•×‘×”:</label>
                            <div class="fraction-input-container">
                                <input type="number" id="n4" placeholder="××•× ×”">
                                <div class="fraction-divider"></div>
                                <input type="number" id="d4" placeholder="××›× ×”">
                            </div>
                        </div>
                    </div>
                    <br><br>
                    <button onclick="checkAnswer(4)">×‘×“×•×§</button>
                </div>
                <div id="fb4" class="feedback"></div>
            </div>
        </div>
        
        <div id="lesson5" class="content">
            <div class="lesson">
                <h2>××¡×¤×¨×™× ××¢×•×¨×‘×™× ×•×©×‘×¨×™× ×¢×©×¨×•× ×™×™×</h2>
                <p>××¡×¤×¨ ××¢×•×¨×‘ ×”×•× ××¡×¤×¨ ×©×™×© ×‘×• ×—×œ×§ ×©×œ× ×•×—×œ×§ ×©×‘×¨×™!</p>
                
                <div class="example">
                    <h3>××”×• ××¡×¤×¨ ××¢×•×¨×‘?</h3>
                    <p>××¡×¤×¨ ××¢×•×¨×‘ ××•×¨×›×‘ ××©× ×™ ×—×œ×§×™×:</p>
                    <div class="calculation">
                        <strong style="font-size: 1.5em;">2</strong>
                        <div class="fraction">
                            <div class="numerator">3</div>
                            <div class="denominator">4</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p>2 = ×”×—×œ×§ ×”×©×œ×</p>
                        <p><span style="direction: ltr; display: inline-block;">3/4</span> = ×”×—×œ×§ ×”×©×‘×¨×™</p>
                        <p>×‘×™×˜×•×™: ×©× ×™×™× ×•×©×œ×•×©×” ×¨×‘×¢×™×</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×”××¨×” ××©×‘×¨ ×œ× ×¦×¨×•×£ ×œ××¡×¤×¨ ××¢×•×¨×‘</h3>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">11</div>
                            <div class="denominator">4</div>
                        </div>
                        <span class="operator">=</span>
                        <strong style="font-size: 1.5em;">2</strong>
                        <div class="fraction">
                            <div class="numerator">3</div>
                            <div class="denominator">4</div>
                        </div>
                    </div>
                    <div class="steps">
                        <p><strong>×©×œ×‘ 1:</strong> ××—×œ×§×™× ××ª ×”××•× ×” ×‘××›× ×”: <span style="direction: ltr; display: inline-block;">11 Ã· 4 = 2</span> (×©×œ××™×)</p>
                        <p><strong>×©×œ×‘ 2:</strong> ×”×©××¨×™×ª ×”×™× ×”××•× ×” ×”×—×“×©: <span style="direction: ltr; display: inline-block;">11 - 8 = 3</span></p>
                        <p><strong>×ª×©×•×‘×”:</strong> 2 ×©×œ××™× ×•-<span style="direction: ltr; display: inline-block;">3/4</span></p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×©×‘×¨×™× ×¢×©×¨×•× ×™×™× - ×”×™×›×¨×•×ª ×¨××©×•× ×™×ª</h3>
                    <p>×©×‘×¨×™× ×¢×©×¨×•× ×™×™× ×”× ×©×‘×¨×™× ×©×”××›× ×” ×©×œ×”× ×”×•× 10, 100, 1000...</p>
                    <div class="calculation">
                        <div class="fraction">
                            <div class="numerator">3</div>
                            <div class="denominator">10</div>
                        </div>
                        <span class="operator">=</span>
                        <strong style="font-size: 1.5em;">0.3</strong>
                        <span style="margin: 0 20px;"></span>
                        <div class="fraction">
                            <div class="numerator">7</div>
                            <div class="denominator">100</div>
                        </div>
                        <span class="operator">=</span>
                        <strong style="font-size: 1.5em;">0.07</strong>
                    </div>
                    <div class="steps">
                        <p><span style="direction: ltr; display: inline-block;">1/10 = 0.1</span> (×¢×©×™×¨×™×ª)</p>
                        <p><span style="direction: ltr; display: inline-block;">1/100 = 0.01</span> (×××™×ª)</p>
                        <p><span style="direction: ltr; display: inline-block;">5/10 = 0.5</span> (×—××© ×¢×©×™×¨×™×•×ª)</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game5" class="content">
            <div class="game">
                <h2>××©×—×§ ××¡×¤×¨×™× ××¢×•×¨×‘×™×</h2>
                <div class="question-counter">×©××œ×” <span id="qc5">1</span> ××ª×•×š 12</div>
                <div class="score">× ×™×§×•×“: <span id="sc5">0</span></div>
                <div class="problem-display" id="prob5"></div>
                <div class="controls">
                    <div class="answer-fractions" style="direction: ltr;">
                        <div class="fraction-input-group">
                            <label>×—×œ×§ ×©×œ×</label>
                            <input type="number" id="w5" placeholder="×©×œ×" style="width: 100px;">
                        </div>
                        <div class="fraction-input-group">
                            <label>×—×œ×§ ×©×‘×¨×™</label>
                            <div class="fraction-input-container">
                                <input type="number" id="n5" placeholder="××•× ×”">
                                <div class="fraction-divider"></div>
                                <input type="number" id="d5" placeholder="××›× ×”">
                            </div>
                        </div>
                    </div>
                    <br><br>
                    <button onclick="checkAnswer(5)">×‘×“×•×§</button>
                </div>
                <div id="fb5" class="feedback"></div>
            </div>
        </div>
    </div>

<script>
var score = {1:0, 2:0, 3:0, 4:0, 5:0};
var qNum = {1:0, 2:0, 3:0, 4:0, 5:0};
var qs = {1:[], 2:[], 3:[], 4:[], 5:[]};
var curr = {1:{}, 2:{}, 3:{}, 4:{}, 5:{}};
var isAnswering = {1:false, 2:false, 3:false, 4:false, 5:false};

// ×ª×™×§×•×Ÿ 1: ×ª×™×§×•×Ÿ ×¤×•× ×§×¦×™×™×ª gcd ×œ×× ×™×¢×ª ×œ×•×œ××” ××™× ×¡×•×¤×™×ª
function gcd(a,b){
    a = Math.abs(a);
    b = Math.abs(b);
    // ×˜×™×¤×•×œ ×‘××§×¨×” ×©××—×“ ××”×¢×¨×›×™× ×”×•× 0
    if(a === 0) return b || 1;
    if(b === 0) return a || 1;
    
    while(b){
        var t=b;
        b=a%b;
        a=t;
    }
    return a;
}

// ×ª×™×§×•×Ÿ 2: ×ª×™×§×•×Ÿ ×¤×•× ×§×¦×™×™×ª simp ×œ×× ×™×¢×ª ×—×œ×•×§×” ×‘××¤×¡
function simp(n,d){
    // ×‘×“×™×§×” ×©×”××›× ×” ×œ× ××¤×¡
    if(d === 0) return {n: n, d: 1};
    
    var g=gcd(Math.abs(n),Math.abs(d));
    // ×‘×“×™×§×” × ×•×¡×¤×ª ×©×”-gcd ×œ× ××¤×¡
    if(g === 0) g = 1;
    
    return{n:n/g,d:d/g};
}

function makeFrac(n, d) {
    return '<div class="problem-fraction"><div class="pf-num">' + n + '</div><div class="pf-den">' + d + '</div></div>';
}

function gen1(){
    if(Math.random()<0.5){
        var d=[2,3,4,5,6][Math.floor(Math.random()*5)];
        var n=Math.floor(Math.random()*(d-1))+1;
        var m=Math.floor(Math.random()*4)+2;
        return{
            html: '<div style="direction: rtl; display: flex; align-items: center; gap: 15px;"><span>××¦× ×©×‘×¨ ×©×•×•×” ×œ-</span>' + makeFrac(n, d) + '<span>(×”×¨×—×‘ ×¤×™ '+m+')</span></div>',
            an:n*m,
            ad:d*m
        };
    }else{
        var d=[6,8,10,12,15][Math.floor(Math.random()*5)];
        var divs=[];
        for(var i=2;i<=d/2;i++)if(d%i==0)divs.push(i);
        var dv=divs[Math.floor(Math.random()*divs.length)];
        var n=(Math.floor(Math.random()*(d/dv-1))+1)*dv;
        return{
            html: '<div style="direction: rtl; display: flex; align-items: center; gap: 15px;"><span>×¦××¦×:</span>' + makeFrac(n, d) + '</div>',
            an:n/dv,
            ad:d/dv
        };
    }
}

function gen2(){
    var d1=[2,3,4,5,6][Math.floor(Math.random()*5)];
    var d2=[2,3,4,5,6][Math.floor(Math.random()*5)];
    while(d1==d2)d2=[2,3,4,5,6][Math.floor(Math.random()*5)];
    var n1=Math.floor(Math.random()*(d1-1))+1;
    var n2=Math.floor(Math.random()*(d2-1))+1;
    var v1=n1/d1,v2=n2/d2;
    var ans=v1>v2?'>':v1<v2?'<':'=';
    return{
        html: makeFrac(n1, d1) + '<span class="operator">__</span>' + makeFrac(n2, d2),
        ans:ans
    };
}

// ×ª×™×§×•×Ÿ 3: ×ª×™×§×•×Ÿ ×¤×•× ×§×¦×™×™×ª gen3 ×œ×˜×™×¤×•×œ × ×›×•×Ÿ ×‘×ª×•×¦××•×ª ×©×œ×™
function gen3(){
    var op=Math.random()<0.5?'+':'-';
    var d1=[2,3,4,5,6][Math.floor(Math.random()*5)];
    var d2=[2,3,4,5,6][Math.floor(Math.random()*5)];
    var n1=Math.floor(Math.random()*(d1-1))+1;
    var n2=Math.floor(Math.random()*(d2-1))+1;
    var lcd=d1*d2/gcd(d1,d2);
    var new1=n1*(lcd/d1),new2=n2*(lcd/d2);
    var rn=op=='+'?new1+new2:new1-new2;
    
    // ×ª×™×§×•×Ÿ: ×•×™×“×•× ×©×ª×•×¦××” ×ª××™×“ ×—×™×•×‘×™×ª
    if(rn<=0){
        // ×× ×”×ª×•×¦××” ×©×œ×™×œ×™×ª ××• ××¤×¡, ×”×•×¤×›×™× ××ª ×”×¤×¢×•×œ×” ××• ××—×œ×™×¤×™× ××¡×¤×¨×™×
        if(op === '-') {
            // ××—×œ×™×¤×™× ×‘×™×Ÿ n1 ×œ-n2 ×›×š ×©n1 ×™×”×™×” ×’×“×•×œ ×™×•×ª×¨
            var t=n1;n1=n2;n2=t;
            t=d1;d1=d2;d2=t;
            // ××—×©×‘×™× ××—×“×©
            lcd=d1*d2/gcd(d1,d2);
            new1=n1*(lcd/d1);
            new2=n2*(lcd/d2);
            rn=new1-new2;
            
            // ×× ×¢×“×™×™×Ÿ ×©×œ×™×œ×™, × ×‘×¦×¢ ×—×™×‘×•×¨ ×‘××§×•×
            if(rn<=0) {
                op = '+';
                rn=new1+new2;
            }
        }
    }
    
    var s=simp(rn,lcd);
    return{
        html: '<div style="direction: ltr; display: flex; align-items: center; gap: 15px; justify-content: center;">' + makeFrac(n1, d1) + '<span class="operator">' + op + '</span>' + makeFrac(n2, d2) + '<span class="operator">= ?</span></div>',
        an:s.n,
        ad:s.d
    };
}

function gen4(){
    var d=[2,3,4,5,6][Math.floor(Math.random()*5)];
    var n=Math.floor(Math.random()*(d-1))+1;
    var m=Math.floor(Math.random()*4)+2;
    var s=simp(n*m,d);
    return{
        html: '<div style="direction: ltr; display: flex; align-items: center; gap: 15px; justify-content: center;">' + makeFrac(n, d) + '<span class="operator">Ã— ' + m + ' = ?</span></div>',
        an:s.n,
        ad:s.d
    };
}

function gen5(){
    var d=[2,3,4,5,6][Math.floor(Math.random()*5)];
    var w=Math.floor(Math.random()*4)+1;
    var n=Math.floor(Math.random()*(d-1))+1;
    return{
        html: '<div style="direction: rtl; display: flex; align-items: center; gap: 15px;"><span>×”××¨ ×œ××¡×¤×¨ ××¢×•×¨×‘:</span>' + makeFrac(w*d+n, d) + '</div>',
        aw:w,
        an:n,
        ad:d
    };
}

// ×¤×•× ×§×¦×™×™×ª ×¢×¨×‘×•×‘ ××¢×¨×š (Fisher-Yates shuffle)
function shuffleArray(array) {
    for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    return array;
}

function initG(g){
    qs[g]=[];
    // ×™×¦×™×¨×ª 30 ×©××œ×•×ª ×‘×××’×¨
    for(var i=0;i<30;i++){
        if(g==1)qs[g].push(gen1());
        else if(g==2)qs[g].push(gen2());
        else if(g==3)qs[g].push(gen3());
        else if(g==4)qs[g].push(gen4());
        else qs[g].push(gen5());
    }
    // ×¢×¨×‘×•×‘ ×”×©××œ×•×ª ×œ×¤× ×™ ×ª×—×™×œ×ª ×”××©×—×§
    qs[g] = shuffleArray(qs[g]);
    nextQ(g);
}

function nextQ(g){
    if(qNum[g]>=12){
        var finalScore = score[g];
        var percentage = Math.round(finalScore/12*100);
        var emoji, msg;
        
        if(percentage === 100) {
            emoji = 'ğŸŒŸ';
            msg = '××•×©×œ×! ××ª×” ××œ×•×£ ×©×‘×¨×™×!';
        } else if(percentage >= 80) {
            emoji = 'ğŸ‘';
            msg = '××¢×•×œ×”! ×”××©×š ×›×š!';
        } else if(percentage >= 60) {
            emoji = 'ğŸ’ª';
            msg = '×™×¤×”! ×¢×•×“ ×§×¦×ª ×ª×¨×’×•×œ ×•×ª×”×™×” ××•×©×œ×!';
        } else {
            emoji = 'ğŸ“š';
            msg = '×›×“××™ ×œ×—×–×•×¨ ×¢×œ ×”×—×•××¨ ×•×œ× ×¡×•×ª ×©×•×‘!';
        }
        
        var summaryHTML = '<div style="text-align: center;">';
        summaryHTML += '<div style="font-size: 3em; margin: 20px 0;">'+emoji+' ×¡×™×™××ª ××ª ×”×¡×™×‘×•×‘! '+emoji+'</div>';
        summaryHTML += '<div style="font-size: 4em; color: white; font-weight: bold; margin: 20px 0;">'+finalScore+'/12</div>';
        summaryHTML += '<div style="font-size:2em; color:white; font-weight:bold; margin:10px 0;">'+percentage+'%</div>';
        summaryHTML += '<div style="font-size: 1.8em; margin: 20px 0;">'+msg+'</div>';
        summaryHTML += '<button onclick="restartGame('+g+')" style="font-size: 1.3em; padding: 20px 40px; margin-top: 20px;">ğŸ”„ ×¡×™×‘×•×‘ × ×•×¡×£</button>';
        summaryHTML += '</div>';
        
        document.getElementById('prob'+g).innerHTML = summaryHTML;
        document.getElementById('fb'+g).innerHTML='';
        
        // ××¡×ª×™×¨ ××ª ×›×¤×ª×•×¨×™ ×”×ª×©×•×‘×” ×‘×¡×•×£ ×”×¡×™×‘×•×‘
        var controlsDiv = document.querySelector('#game'+g+' .controls');
        if(controlsDiv) controlsDiv.style.display = 'none';
        
        // ×××¤×©×¨ ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ "×¡×™×‘×•×‘ × ×•×¡×£" ×‘×œ×‘×“
        isAnswering[g] = false;
        return;
    }
    
    // ××¦×™×’ ×‘×—×–×¨×” ××ª ×›×¤×ª×•×¨×™ ×”×ª×©×•×‘×” ×× ×”×™×• ××•×¡×ª×¨×™×
    var controlsDiv = document.querySelector('#game'+g+' .controls');
    if(controlsDiv) controlsDiv.style.display = 'block';
    
    curr[g]=qs[g][qNum[g]];
    document.getElementById('qc'+g).textContent=qNum[g]+1;
    var probElem=document.getElementById('prob'+g);
    if(probElem && curr[g]){
        if(curr[g].html){
            probElem.innerHTML=curr[g].html;
        }else{
            probElem.innerHTML='×˜×•×¢×Ÿ ×©××œ×”...';
        }
    }
    if(g==1){document.getElementById('n1').value='';document.getElementById('d1').value='';}
    if(g==3){document.getElementById('n3').value='';document.getElementById('d3').value='';}
    if(g==4){document.getElementById('n4').value='';document.getElementById('d4').value='';}
    if(g==5){document.getElementById('w5').value='';document.getElementById('n5').value='';document.getElementById('d5').value='';}
    document.getElementById('fb'+g).innerHTML='';
}

function restartGame(g){
    // ××•× ×¢ ×”×¤×¢×œ×” ×›×¤×•×œ×”
    if(isAnswering[g]) return;
    
    score[g]=0;
    qNum[g]=0;
    isAnswering[g]=false;
    document.getElementById('sc'+g).textContent='0';
    initG(g);
}

// ×ª×™×§×•×Ÿ 4: ×ª×™×§×•×Ÿ ×”×¡×“×¨ ×©×œ ×”×‘×“×™×§×•×ª ×‘×¤×•× ×§×¦×™×™×ª checkAnswer
// ×ª×™×§×•×Ÿ 5: ×× ×™×¢×ª ×œ×—×™×¦×•×ª ××¨×•×‘×•×ª ×¢×œ ××•×ª×” ×©××œ×”
function checkAnswer(g){
    // ××•× ×¢ ×œ×—×™×¦×•×ª ××¨×•×‘×•×ª
    if(isAnswering[g]) return;
    
    if(g==5){
        var w=parseInt(document.getElementById('w5').value);
        var n=parseInt(document.getElementById('n5').value);
        var d=parseInt(document.getElementById('d5').value);
        
        // ×‘×“×™×§×” ×œ×¤× ×™ ×¢×“×›×•×Ÿ qNum - ×–×” ×”×¡×“×¨ ×”× ×›×•×Ÿ!
        if(isNaN(w)||isNaN(n)||isNaN(d))return;
        
        isAnswering[g] = true;
        
        if(w==curr[g].aw && n==curr[g].an && d==curr[g].ad){
            score[g]++;
            playSound('correct');
            document.getElementById('fb5').innerHTML='<div class="correct">âœ“ ××¦×•×™×Ÿ! ×ª×©×•×‘×” × ×›×•× ×”! âœ“</div>';
        }else{
            playSound('incorrect');
            document.getElementById('fb5').innerHTML='<div class="incorrect">âœ— ×˜×¢×•×ª - ×”×ª×©×•×‘×”: '+curr[g].aw+' ×•-'+curr[g].an+'/'+curr[g].ad+' âœ—</div>';
        }
        
        // ×¢×“×›×•×Ÿ qNum ×¨×§ ××—×¨×™ ×”×‘×“×™×§×”
        qNum[g]++;
        document.getElementById('sc5').textContent=score[g];
        
        setTimeout(function(){
            document.getElementById('fb'+g).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100);
        
        setTimeout(function(){
            isAnswering[g] = false;
            nextQ(g);
        },2000);
    }else{
        var n=parseInt(document.getElementById('n'+g).value);
        var d=parseInt(document.getElementById('d'+g).value);
        
        // ×‘×“×™×§×” ×œ×¤× ×™ ×¢×“×›×•×Ÿ qNum - ×–×” ×”×¡×“×¨ ×”× ×›×•×Ÿ!
        if(isNaN(n)||isNaN(d)||d==0)return;
        
        isAnswering[g] = true;
        
        var s = simp(n, d);
        var correctS = simp(curr[g].an, curr[g].ad);
        
        if(s.n == correctS.n && s.d == correctS.d){
            score[g]++;
            playSound('correct');
            document.getElementById('fb'+g).innerHTML='<div class="correct">âœ“ ××¦×•×™×Ÿ! ×ª×©×•×‘×” × ×›×•× ×”! âœ“</div>';
        }else{
            playSound('incorrect');
            document.getElementById('fb'+g).innerHTML='<div class="incorrect">âœ— ×˜×¢×•×ª - ×”×ª×©×•×‘×” ×”× ×›×•× ×”: '+curr[g].an+'/'+curr[g].ad+' âœ—</div>';
        }
        
        // ×¢×“×›×•×Ÿ qNum ×¨×§ ××—×¨×™ ×”×‘×“×™×§×”
        qNum[g]++;
        document.getElementById('sc'+g).textContent=score[g];
        
        setTimeout(function(){
            document.getElementById('fb'+g).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100);
        
        setTimeout(function(){
            isAnswering[g] = false;
            nextQ(g);
        },2000);
    }
}

function checkComp(ans){
    // ××•× ×¢ ×œ×—×™×¦×•×ª ××¨×•×‘×•×ª
    if(isAnswering[2]) return;
    
    isAnswering[2] = true;
    
    if(ans==curr[2].ans){
        score[2]++;
        playSound('correct');
        document.getElementById('fb2').innerHTML='<div class="correct">âœ“ ××¦×•×™×Ÿ! ×ª×©×•×‘×” × ×›×•× ×”! âœ“</div>';
    }else{
        playSound('incorrect');
        document.getElementById('fb2').innerHTML='<div class="incorrect">âœ— ×˜×¢×•×ª - × ×¡×” ×©×•×‘! âœ—</div>';
    }
    
    // ×¢×“×›×•×Ÿ qNum ×¨×§ ××—×¨×™ ×”×‘×“×™×§×”
    qNum[2]++;
    document.getElementById('sc2').textContent=score[2];
    
    setTimeout(function(){
        document.getElementById('fb2').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }, 100);
    
    setTimeout(function(){
        isAnswering[2] = false;
        nextQ(2);
    },2000);
}

function switchTab(tabId){
    playSound('click');
    var tabs=document.querySelectorAll('.tab');
    var contents=document.querySelectorAll('.content');
    for(var i=0;i<contents.length;i++)contents[i].classList.remove('active');
    for(var i=0;i<tabs.length;i++)tabs[i].classList.remove('active');
    document.getElementById(tabId).classList.add('active');
    event.target.classList.add('active');
    
    if(tabId.includes('game')){
        var gameNum = parseInt(tabId.replace('game',''));
        score[gameNum]=0;
        qNum[gameNum]=0;
        document.getElementById('sc'+gameNum).textContent='0';
        document.getElementById('qc'+gameNum).textContent='1';
        document.getElementById('fb'+gameNum).innerHTML='';
        initG(gameNum);
    }
}

function playSound(type){
    var ctx=new(window.AudioContext||window.webkitAudioContext)();
    if(type=='click'){
        var o=ctx.createOscillator();
        var g=ctx.createGain();
        o.connect(g);g.connect(ctx.destination);
        o.type='sine';o.frequency.value=600;
        g.gain.setValueAtTime(0.15,ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.01,ctx.currentTime+0.15);
        o.start(ctx.currentTime);o.stop(ctx.currentTime+0.15);
    }else if(type=='correct'){
        var notes=[523.25,659.25,783.99];
        for(var i=0;i<notes.length;i++){
            var o=ctx.createOscillator();
            var g=ctx.createGain();
            o.connect(g);g.connect(ctx.destination);
            o.type='sine';o.frequency.value=notes[i];
            g.gain.setValueAtTime(0.1,ctx.currentTime+i*0.1);
            g.gain.exponentialRampToValueAtTime(0.01,ctx.currentTime+i*0.1+0.3);
            o.start(ctx.currentTime+i*0.1);
            o.stop(ctx.currentTime+i*0.1+0.3);
        }
    }else if(type=='incorrect'){
        var o=ctx.createOscillator();
        var g=ctx.createGain();
        o.connect(g);g.connect(ctx.destination);
        o.type='sine';o.frequency.value=200;
        g.gain.setValueAtTime(0.15,ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.01,ctx.currentTime+0.3);
        o.start(ctx.currentTime);o.stop(ctx.currentTime+0.3);
    }
}

window.onload=function(){
    initG(1);
    initG(2);
    initG(3);
    initG(4);
    initG(5);
    
    document.addEventListener('wheel', function(e) {
        if (document.activeElement.type === 'number') {
            document.activeElement.blur();
        }
    });
};
</script>
</body>
</html>
    
