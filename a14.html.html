<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××©×—×§×™ ××¨×•×¥ ×•××ª×’×¨×™× - ×›×™×ª×” ×'</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeIn 1s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .header h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.95;
        }
        
        .menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .game-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
        }
        
        .game-icon {
            font-size: 5em;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .game-card h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .game-card p {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        .game-screen {
            display: none;
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideIn 0.5s;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .game-screen.active {
            display: block;
        }
        
        .back-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 30px;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255,107,107,0.4);
        }
        
        /* ××©×—×§ 1: ××¨×•×¥ ×œ×¤×¡×’×” */
        .mountain-game {
            position: relative;
        }
        
        .mountain {
            width: 100%;
            height: 600px;
            background: linear-gradient(to top, #8B4513 0%, #D2B48C 30%, #F5F5DC 60%, white 100%);
            border-radius: 50% 50% 0 0;
            position: relative;
            margin: 30px 0;
            overflow: hidden;
        }
        
        .mountain-path {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .checkpoint {
            position: absolute;
            width: 80px;
            height: 80px;
            background: white;
            border: 4px solid #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .checkpoint:hover {
            transform: scale(1.1);
            background: #667eea;
            color: white;
        }
        
        .checkpoint.completed {
            background: #51cf66;
            border-color: #51cf66;
            color: white;
        }
        
        .player-token {
            position: absolute;
            width: 50px;
            height: 50px;
            font-size: 2.5em;
            transition: all 0.5s ease-in-out;
            z-index: 10;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }
        
        .summit {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4em;
            animation: pulse 2s infinite;
        }
        
        .question-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            z-index: 100;
            min-width: 400px;
            animation: popIn 0.3s;
        }
        
        @keyframes popIn {
            from { transform: translate(-50%, -50%) scale(0.8); }
            to { transform: translate(-50%, -50%) scale(1); }
        }
        
        .question-modal.active {
            display: block;
        }
        
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 99;
        }
        
        .modal-overlay.active {
            display: block;
        }
        
        .question-text {
            font-size: 2em;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            font-weight: bold;
            direction: ltr;
        }
        
        .answer-input {
            width: 100%;
            padding: 20px;
            font-size: 2em;
            border: 3px solid #667eea;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .submit-answer {
            width: 100%;
            padding: 20px;
            font-size: 1.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .submit-answer:hover {
            transform: scale(1.05);
        }
        
        .feedback {
            text-align: center;
            font-size: 1.5em;
            margin-top: 20px;
            font-weight: bold;
        }
        
        .dice-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .dice {
            font-size: 5em;
            display: inline-block;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dice:hover {
            transform: scale(1.1);
        }
        
        .dice.rolling {
            animation: roll 0.5s ease-in-out;
        }
        
        @keyframes roll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }
        
        /* ××©×—×§ 2: ×§×¨×‘ ×¨×•×‘×•×˜×™× */
        .robot-arena {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin: 30px 0;
        }
        
        .robot {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .robot.player1 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .robot-icon {
            font-size: 8em;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .robot-name {
            color: white;
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .energy-bar {
            background: rgba(255,255,255,0.3);
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
        }
        
        .energy-fill {
            background: linear-gradient(90deg, #51cf66, #40c057);
            height: 100%;
            width: 100%;
            transition: width 0.5s, background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .energy-fill.low {
            background: linear-gradient(90deg, #ff6b6b, #ff5252);
        }
        
        .battle-question {
            background: white;
            padding: 40px;
            border-radius: 25px;
            margin: 30px 0;
            text-align: center;
        }
        
        .battle-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .battle-option {
            padding: 30px;
            font-size: 2em;
            background: #f8f9fa;
            border: 4px solid #667eea;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            direction: ltr;
        }
        
        .battle-option:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }
        
        .battle-option.correct {
            background: #51cf66;
            border-color: #51cf66;
            color: white;
        }
        
        .battle-option.wrong {
            background: #ff6b6b;
            border-color: #ff6b6b;
            color: white;
        }
        
        /* ××©×—×§ 3: ××¢×‘×“×ª ××“×¢×Ÿ */
        .lab-container {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            padding: 40px;
            border-radius: 25px;
        }
        
        .lab-table {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin: 30px 0;
        }
        
        .beaker {
            background: white;
            border-radius: 15px 15px 50% 50%;
            padding: 20px;
            text-align: center;
            position: relative;
            height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .beaker:hover {
            transform: translateY(-10px);
        }
        
        .beaker-number {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            direction: ltr;
        }
        
        .liquid {
            width: 100%;
            height: 0%;
            background: linear-gradient(180deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 0 0 50% 50%;
            position: absolute;
            bottom: 0;
            transition: height 0.5s, background 0.3s;
        }
        
        .liquid.filling {
            animation: bubble 0.5s ease-in-out;
        }
        
        @keyframes bubble {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .experiment-question {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .experiment-equation {
            font-size: 3em;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
            direction: ltr;
        }
        
        .mix-button {
            width: 100%;
            padding: 25px;
            font-size: 1.8em;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .mix-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.4);
        }
        
        .success-counter {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .counter-text {
            font-size: 1.5em;
            color: #667eea;
            font-weight: bold;
        }
        
        .counter-number {
            font-size: 3em;
            color: #51cf66;
            font-weight: bold;
        }
        
        .level-selector {
            text-align: center;
            margin: 30px 0;
        }
        
        .level-btn {
            padding: 15px 35px;
            margin: 0 10px;
            font-size: 1.2em;
            background: white;
            border: 3px solid #667eea;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            color: #667eea;
        }
        
        .level-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .level-btn.active {
            background: #667eea;
            color: white;
        }
        
        .score-board {
            background: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            margin: 20px 0;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        
        .score-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .score-label {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .score-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        /* Victory Modal */
        .victory-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }
        
        .victory-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .victory-modal {
            background: white;
            border-radius: 30px;
            padding: 50px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            position: relative;
            animation: victoryPop 0.5s ease-out;
            box-shadow: 0 30px 80px rgba(0,0,0,0.5);
        }
        
        @keyframes victoryPop {
            0% { transform: scale(0.3) rotate(-10deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .victory-icon {
            font-size: 8em;
            margin-bottom: 20px;
            animation: victoryBounce 1s ease-in-out infinite;
        }
        
        @keyframes victoryBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.1); }
        }
        
        .victory-title {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .victory-winner {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .victory-winner.red {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .victory-winner.tie {
            background: linear-gradient(135deg, #ffd93d 0%, #ff8c42 100%);
        }
        
        .victory-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .victory-stat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }
        
        .victory-stat-label {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 10px;
        }
        
        .victory-stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .victory-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 30px;
        }
        
        .victory-btn {
            padding: 20px;
            font-size: 1.3em;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .victory-btn-play {
            background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);
            color: white;
        }
        
        .victory-btn-play:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(81, 207, 102, 0.4);
        }
        
        .victory-btn-menu {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .victory-btn-menu:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            position: absolute;
            left: 50%;
            animation: confetti-fall 3s linear forwards;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-10vh) translateX(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) translateX(calc(-50vw + var(--x-offset, 0px))) rotate(720deg);
                opacity: 0;
            }
        }
        
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ® ××©×—×§×™ ××¨×•×¥ ×•××ª×’×¨×™× ğŸ®</h1>
            <p>3 ××©×—×§×™× ××œ××™ ××§×©×Ÿ ×•××ª×’×¨×™× ××ª××˜×™×™×!</p>
        </div>
        
        <!-- ×ª×¤×¨×™×˜ ×¨××©×™ -->
        <div class="menu" id="mainMenu">
            <div class="game-card" onclick="startGame('mountain')">
                <div class="game-icon">ğŸ”ï¸</div>
                <h2>××¨×•×¥ ×œ×¤×¡×’×”</h2>
                <p>×˜×¤×¡×• ×œ×”×¨, ×¢× ×• ×¢×œ ×©××œ×•×ª ×•×”×’×™×¢×• ×¨××©×•× ×™× ×œ×¤×¡×’×”!</p>
            </div>
            
            <div class="game-card" onclick="startGame('robots')">
                <div class="game-icon">ğŸ¤–</div>
                <h2>×§×¨×‘ ×¨×•×‘×•×˜×™×</h2>
                <p>×©× ×™ ×¨×•×‘×•×˜×™× × ×œ×—××™×! ×›×œ ×ª×©×•×‘×” × ×›×•× ×” ××•×¡×™×¤×” ×× ×¨×’×™×”</p>
            </div>
            
            <div class="game-card" onclick="startGame('lab')">
                <div class="game-icon">ğŸ”¬</div>
                <h2>××¢×‘×“×ª ×”××“×¢×Ÿ</h2>
                <p>×¢×¨×‘×‘×• ×©×™×§×•×™×™× ××ª××˜×™×™× ×•×”×¦×œ×™×—×• ×‘× ×™×¡×•×™×™×!</p>
            </div>
        </div>
        
        <!-- ××©×—×§ 1: ××¨×•×¥ ×œ×¤×¡×’×” -->
        <div class="game-screen" id="mountainGame">
            <button class="back-btn" onclick="backToMenu()">â†©ï¸ ×—×–×¨×” ×œ×ª×¤×¨×™×˜</button>
            
            <h1 style="text-align: center; color: #667eea; margin-bottom: 20px;">ğŸ”ï¸ ××¨×•×¥ ×œ×¤×¡×’×” ğŸ”ï¸</h1>
            
            <div class="level-selector">
                <button class="level-btn active" onclick="setMountainLevel('easy')">×§×œ (×¢×“ 10)</button>
                <button class="level-btn" onclick="setMountainLevel('medium')">×‘×™× ×•× ×™ (×¢×“ 20)</button>
                <button class="level-btn" onclick="setMountainLevel('hard')">×§×©×” (×¢×“ 100)</button>
            </div>
            
            <div class="score-board">
                <div class="score-item">
                    <div class="score-label">×©××œ×”</div>
                    <div class="score-value" id="mountainQuestion">1/10</div>
                </div>
                <div class="score-item">
                    <div class="score-label">× ×›×•× ×•×ª</div>
                    <div class="score-value" id="mountainCorrect">0</div>
                </div>
                <div class="score-item">
                    <div class="score-label">×˜×¢×•×™×•×ª</div>
                    <div class="score-value" id="mountainWrong">0</div>
                </div>
            </div>
            
            <div class="dice-container">
                <div class="dice" id="dice" onclick="rollDice()">ğŸ²</div>
                <p style="font-size: 1.3em; margin-top: 15px; color: #667eea; font-weight: bold;">×œ×—×¥ ×¢×œ ×”×§×•×‘×™×” ×œ×–×¨×•×§!</p>
            </div>
            
            <div class="mountain" id="mountain">
                <div class="summit">ğŸ†</div>
                <div class="mountain-path" id="mountainPath">
                    <div class="player-token" id="playerToken">ğŸš¶</div>
                </div>
            </div>
        </div>
        
        <!-- ××©×—×§ 2: ×§×¨×‘ ×¨×•×‘×•×˜×™× -->
        <div class="game-screen" id="robotsGame">
            <button class="back-btn" onclick="backToMenu()">â†©ï¸ ×—×–×¨×” ×œ×ª×¤×¨×™×˜</button>
            
            <h1 style="text-align: center; color: #667eea; margin-bottom: 20px;">ğŸ¤– ×§×¨×‘ ×¨×•×‘×•×˜×™× ğŸ¤–</h1>
            
            <div class="level-selector">
                <button class="level-btn active" onclick="setRobotLevel('easy')">×§×œ (×¢×“ 10)</button>
                <button class="level-btn" onclick="setRobotLevel('medium')">×‘×™× ×•× ×™ (×¢×“ 20)</button>
                <button class="level-btn" onclick="setRobotLevel('hard')">×§×©×” (×¢×“ 100)</button>
            </div>
            
            <div class="robot-arena">
                <div class="robot player1">
                    <div class="robot-name">ğŸ”µ ×¨×•×‘×•×˜ ×›×—×•×œ</div>
                    <div class="robot-icon">ğŸ¤–</div>
                    <div class="energy-bar">
                        <div class="energy-fill" id="robot1Energy">100%</div>
                    </div>
                </div>
                
                <div class="robot player2">
                    <div class="robot-name">ğŸ”´ ×¨×•×‘×•×˜ ××“×•×</div>
                    <div class="robot-icon">ğŸ¤–</div>
                    <div class="energy-bar">
                        <div class="energy-fill" id="robot2Energy">100%</div>
                    </div>
                </div>
            </div>
            
            <div class="battle-question">
                <h2 style="color: #667eea; margin-bottom: 20px;">×ª×•×¨: <span id="currentRobot">ğŸ”µ ×¨×•×‘×•×˜ ×›×—×•×œ</span></h2>
                <div class="question-text" id="robotQuestion">5 + 3 = ?</div>
                <div class="battle-options" id="robotOptions"></div>
                <div class="feedback" id="robotFeedback"></div>
            </div>
        </div>
        
        <!-- ××©×—×§ 3: ××¢×‘×“×ª ××“×¢×Ÿ -->
        <div class="game-screen" id="labGame">
            <button class="back-btn" onclick="backToMenu()">â†©ï¸ ×—×–×¨×” ×œ×ª×¤×¨×™×˜</button>
            
            <h1 style="text-align: center; color: #667eea; margin-bottom: 20px;">ğŸ”¬ ××¢×‘×“×ª ×”××“×¢×Ÿ ğŸ”¬</h1>
            
            <div class="level-selector">
                <button class="level-btn active" onclick="setLabLevel('easy')">×§×œ (×¢×“ 10)</button>
                <button class="level-btn" onclick="setLabLevel('medium')">×‘×™× ×•× ×™ (×¢×“ 20)</button>
                <button class="level-btn" onclick="setLabLevel('hard')">×§×©×” (×¢×“ 100)</button>
            </div>
            
            <div class="lab-container">
                <div class="success-counter">
                    <div class="counter-text">× ×™×¡×•×™×™× ××•×¦×œ×—×™×</div>
                    <div class="counter-number" id="labSuccess">0/10</div>
                </div>
                
                <div class="experiment-question">
                    <h2 style="color: #667eea; margin-bottom: 20px;">×”× ×™×¡×•×™ ×”×‘×:</h2>
                    <div class="experiment-equation" id="labEquation">5 + 3 = ?</div>
                    <p style="font-size: 1.3em; color: #666;">×‘×—×¨ ××ª ×”×‘×§×‘×•×§ ×¢× ×”×ª×©×•×‘×” ×”× ×›×•× ×”!</p>
                </div>
                
                <div class="lab-table" id="labTable">
                    <!-- ×”×‘×§×‘×•×§×™× ×™×™×•×•×¦×¨×• ×“×™× ××™×ª -->
                </div>
                
                <div class="feedback" id="labFeedback"></div>
            </div>
        </div>
        
        <!-- ××•×“×œ ×©××œ×” ×œ××©×—×§ ×”×”×¨ -->
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="question-modal" id="questionModal">
            <div class="question-text" id="modalQuestion">5 + 3 = ?</div>
            <input type="number" class="answer-input" id="answerInput" placeholder="×”×§×œ×“ ×ª×©×•×‘×”">
            <button class="submit-answer" onclick="checkMountainAnswer()">×‘×“×•×§ ×ª×©×•×‘×”</button>
            <div class="feedback" id="modalFeedback"></div>
        </div>
        
        <!-- ××¡×š × ×™×¦×—×•×Ÿ ×œ××©×—×§ ×¨×•×‘×•×˜×™× -->
        <div class="victory-overlay" id="victoryOverlay">
            <div class="victory-modal">
                <div class="victory-icon" id="victoryIcon">ğŸ†</div>
                <div class="victory-title" id="victoryTitle">× ×™×¦×—×•×Ÿ!</div>
                <div class="victory-winner" id="victoryWinner">ğŸ”µ ×”×¨×•×‘×•×˜ ×”×›×—×•×œ × ×™×¦×—!</div>
                <div class="victory-stats">
                    <div class="victory-stat">
                        <div class="victory-stat-label">×©××œ×•×ª × ×›×•× ×•×ª</div>
                        <div class="victory-stat-value" id="victoryCorrect">0</div>
                    </div>
                    <div class="victory-stat">
                        <div class="victory-stat-label">×¡×š ×”×›×œ ×©××œ×•×ª</div>
                        <div class="victory-stat-value" id="victoryTotal">0</div>
                    </div>
                </div>
                <div class="victory-buttons">
                    <button class="victory-btn victory-btn-play" onclick="playAgainRobots()">
                        ğŸ”„ ×©×—×§ ×©×•×‘
                    </button>
                    <button class="victory-btn victory-btn-menu" onclick="backToMenuFromVictory()">
                        ğŸ  ×ª×¤×¨×™×˜ ×¨××©×™
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Confetti Container -->
        <div class="confetti-container" id="confettiContainer"></div>
    </div>

    <script>
        // Audio Context
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playTone(frequency, duration) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.value = frequency;
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }
        
        function playCorrectSound() {
            playTone(523.25, 0.1);
            setTimeout(() => playTone(659.25, 0.1), 100);
            setTimeout(() => playTone(783.99, 0.2), 200);
        }
        
        function playWrongSound() {
            playTone(200, 0.3);
        }
        
        function playWinSound() {
            playTone(523.25, 0.15);
            setTimeout(() => playTone(659.25, 0.15), 150);
            setTimeout(() => playTone(783.99, 0.15), 300);
            setTimeout(() => playTone(1046.50, 0.3), 450);
        }
        
        // Navigation
        function startGame(game) {
            document.getElementById('mainMenu').style.display = 'none';
            if (game === 'mountain') {
                document.getElementById('mountainGame').classList.add('active');
                initMountainGame();
            } else if (game === 'robots') {
                document.getElementById('robotsGame').classList.add('active');
                initRobotGame();
            } else if (game === 'lab') {
                document.getElementById('labGame').classList.add('active');
                initLabGame();
            }
        }
        
        function backToMenu() {
            document.querySelectorAll('.game-screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById('mainMenu').style.display = 'grid';
        }
        
        // ××©×—×§ 1: ××¨×•×¥ ×œ×¤×¡×’×”
        let mountainLevel = 'easy';
        let currentCheckpoint = 0;
        let mountainCorrect = 0;
        let mountainWrong = 0;
        let mountainQuestionNum = 1;
        let currentMountainAnswer = 0;
        let diceValue = 0;
        
        const checkpoints = [
            { x: '50%', y: '85%' },
            { x: '30%', y: '70%' },
            { x: '70%', y: '65%' },
            { x: '40%', y: '50%' },
            { x: '65%', y: '45%' },
            { x: '35%', y: '30%' },
            { x: '60%', y: '25%' },
            { x: '45%', y: '15%' },
            { x: '50%', y: '5%' }
        ];
        
        function setMountainLevel(level) {
            mountainLevel = level;
            document.querySelectorAll('#mountainGame .level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ×”×ª×—×œ×ª ××©×—×§ ×—×“×© ×¢× ×”×¨××” ×”×—×“×©×”
            initMountainGame();
        }
        
        function initMountainGame() {
            currentCheckpoint = 0;
            mountainCorrect = 0;
            mountainWrong = 0;
            mountainQuestionNum = 1;
            updateMountainScore();
            
            const path = document.getElementById('mountainPath');
            path.innerHTML = '<div class="summit">ğŸ†</div><div class="player-token" id="playerToken">ğŸš¶</div>';
            
            checkpoints.forEach((pos, index) => {
                const checkpoint = document.createElement('div');
                checkpoint.className = 'checkpoint';
                checkpoint.style.left = pos.x;
                checkpoint.style.top = pos.y;
                checkpoint.style.transform = 'translate(-50%, -50%)';
                checkpoint.textContent = index + 1;
                checkpoint.onclick = () => {
                    if (index === currentCheckpoint) {
                        showMountainQuestion();
                    }
                };
                path.appendChild(checkpoint);
            });
            
            updatePlayerPosition();
        }
        
        function updatePlayerPosition() {
            const token = document.getElementById('playerToken');
            if (currentCheckpoint === 0) {
                token.style.left = '50%';
                token.style.top = '95%';
            } else if (currentCheckpoint <= checkpoints.length) {
                const pos = checkpoints[currentCheckpoint - 1];
                token.style.left = pos.x;
                token.style.top = pos.y;
            }
            token.style.transform = 'translate(-50%, -50%)';
        }
        
        function rollDice() {
            const dice = document.getElementById('dice');
            dice.classList.add('rolling');
            
            setTimeout(() => {
                diceValue = Math.floor(Math.random() * 6) + 1;
                const diceEmojis = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
                dice.textContent = diceEmojis[diceValue - 1];
                dice.classList.remove('rolling');
                
                setTimeout(() => {
                    showMountainQuestion();
                }, 500);
            }, 500);
        }
        
        function showMountainQuestion() {
            let num1, num2;
            if (mountainLevel === 'easy') {
                num1 = Math.floor(Math.random() * 10) + 1;
                num2 = Math.floor(Math.random() * 10) + 1;
            } else if (mountainLevel === 'medium') {
                num1 = Math.floor(Math.random() * 20) + 1;
                num2 = Math.floor(Math.random() * 20) + 1;
            } else {
                num1 = Math.floor(Math.random() * 50) + 1;
                num2 = Math.floor(Math.random() * 50) + 1;
            }
            
            const operation = Math.random() > 0.5 ? '+' : '-';
            if (operation === '-' && num1 < num2) {
                [num1, num2] = [num2, num1];
            }
            
            currentMountainAnswer = operation === '+' ? num1 + num2 : num1 - num2;
            
            document.getElementById('modalQuestion').textContent = `${num1} ${operation} ${num2} = ?`;
            document.getElementById('answerInput').value = '';
            document.getElementById('modalFeedback').textContent = '';
            document.getElementById('questionModal').classList.add('active');
            document.getElementById('modalOverlay').classList.add('active');
            document.getElementById('answerInput').focus();
        }
        
        function checkMountainAnswer() {
            const userAnswer = parseInt(document.getElementById('answerInput').value);
            const feedback = document.getElementById('modalFeedback');
            
            if (userAnswer === currentMountainAnswer) {
                feedback.textContent = 'ğŸ‰ × ×›×•×Ÿ! ×××©×™×š ×œ×¢×œ×•×ª!';
                feedback.style.color = '#51cf66';
                playCorrectSound();
                mountainCorrect++;
                
                setTimeout(() => {
                    currentCheckpoint++;
                    document.querySelectorAll('.checkpoint')[currentCheckpoint - 1].classList.add('completed');
                    updatePlayerPosition();
                    
                    document.getElementById('questionModal').classList.remove('active');
                    document.getElementById('modalOverlay').classList.remove('active');
                    
                    if (currentCheckpoint >= checkpoints.length) {
                        setTimeout(() => {
                            alert('ğŸ† ×”×’×¢×ª ×œ×¤×¡×’×”! ×›×œ ×”×›×‘×•×“! ğŸ†\n×¢× ×™×ª × ×›×•×Ÿ ×¢×œ ' + mountainCorrect + ' ×©××œ×•×ª!');
                            playWinSound();
                            initMountainGame();
                        }, 500);
                    }
                    
                    mountainQuestionNum++;
                    updateMountainScore();
                }, 1500);
            } else {
                feedback.textContent = `âŒ ×œ× × ×›×•×Ÿ. ×”×ª×©×•×‘×” ×”×™× ${currentMountainAnswer}`;
                feedback.style.color = '#ff6b6b';
                playWrongSound();
                mountainWrong++;
                
                setTimeout(() => {
                    document.getElementById('questionModal').classList.remove('active');
                    document.getElementById('modalOverlay').classList.remove('active');
                    mountainQuestionNum++;
                    updateMountainScore();
                }, 2000);
            }
        }
        
        function updateMountainScore() {
            document.getElementById('mountainQuestion').textContent = `${mountainQuestionNum}/10`;
            document.getElementById('mountainCorrect').textContent = mountainCorrect;
            document.getElementById('mountainWrong').textContent = mountainWrong;
        }
        
        // ××©×—×§ 2: ×§×¨×‘ ×¨×•×‘×•×˜×™×
        let robotLevel = 'easy';
        let robot1Health = 100;
        let robot2Health = 100;
        let currentTurn = 1;
        let robotAnswer = 0;
        let robotCorrectAnswers = 0;
        let robotTotalQuestions = 0;
        
        function setRobotLevel(level) {
            robotLevel = level;
            document.querySelectorAll('#robotsGame .level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ×”×ª×—×œ×ª ××©×—×§ ×—×“×© ×¢× ×”×¨××” ×”×—×“×©×”
            initRobotGame();
        }
        
        function initRobotGame() {
            robot1Health = 100;
            robot2Health = 100;
            currentTurn = 1;
            robotCorrectAnswers = 0;
            robotTotalQuestions = 0;
            updateRobotHealth();
            loadRobotQuestion();
        }
        
        function loadRobotQuestion() {
            let num1, num2;
            if (robotLevel === 'easy') {
                num1 = Math.floor(Math.random() * 10) + 1;
                num2 = Math.floor(Math.random() * 10) + 1;
            } else if (robotLevel === 'medium') {
                num1 = Math.floor(Math.random() * 20) + 1;
                num2 = Math.floor(Math.random() * 20) + 1;
            } else {
                num1 = Math.floor(Math.random() * 50) + 1;
                num2 = Math.floor(Math.random() * 50) + 1;
            }
            
            const operation = Math.random() > 0.5 ? '+' : '-';
            if (operation === '-' && num1 < num2) {
                [num1, num2] = [num2, num1];
            }
            
            robotAnswer = operation === '+' ? num1 + num2 : num1 - num2;
            
            document.getElementById('robotQuestion').textContent = `${num1} ${operation} ${num2} = ?`;
            document.getElementById('currentRobot').textContent = currentTurn === 1 ? 'ğŸ”µ ×¨×•×‘×•×˜ ×›×—×•×œ' : 'ğŸ”´ ×¨×•×‘×•×˜ ××“×•×';
            document.getElementById('robotFeedback').textContent = '';
            
            const options = generateOptions(robotAnswer, 4);
            const optionsContainer = document.getElementById('robotOptions');
            optionsContainer.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'battle-option';
                btn.textContent = opt;
                btn.onclick = () => checkRobotAnswer(opt, btn);
                optionsContainer.appendChild(btn);
            });
        }
        
        function checkRobotAnswer(selected, btn) {
            const allBtns = document.querySelectorAll('.battle-option');
            allBtns.forEach(b => b.style.pointerEvents = 'none');
            
            const feedback = document.getElementById('robotFeedback');
            robotTotalQuestions++;
            
            if (selected === robotAnswer) {
                btn.classList.add('correct');
                feedback.textContent = 'ğŸ’¥ ×¤×’×™×¢×”! ×”×¨×•×‘×•×˜ ×”×™×¨×™×‘ ×××‘×“ ×× ×¨×’×™×”!';
                feedback.style.color = '#51cf66';
                playCorrectSound();
                robotCorrectAnswers++;
                
                if (currentTurn === 1) {
                    robot2Health -= 20;
                } else {
                    robot1Health -= 20;
                }
            } else {
                btn.classList.add('wrong');
                feedback.textContent = `âŒ ×”×—×˜××ª! ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™× ${robotAnswer}`;
                feedback.style.color = '#ff6b6b';
                playWrongSound();
                
                if (currentTurn === 1) {
                    robot1Health -= 10;
                } else {
                    robot2Health -= 10;
                }
            }
            
            updateRobotHealth();
            
            setTimeout(() => {
                // ×¢×•×‘×¨ ×œ×ª×•×¨ ×”×‘×
                currentTurn = currentTurn === 1 ? 2 : 1;
                
                // ×‘×•×“×§ × ×™×¦×—×•×Ÿ ×¨×§ ××—×¨×™ ×©×©× ×™ ×”×¨×•×‘×•×˜×™× ×¢× ×• (××¡×¤×¨ ×–×•×’×™ ×©×œ ×©××œ×•×ª)
                if (robotTotalQuestions % 2 === 0 && (robot1Health <= 0 || robot2Health <= 0)) {
                    showVictoryScreen();
                } else if (robot1Health <= 0 || robot2Health <= 0) {
                    // ×× ××™×©×”×• ×”×’×™×¢ ×œ-0 ××‘×œ ×–×” ×œ× ×ª×•×¨ ××œ×, ×××©×™×›×™× ×œ×©××œ×” ×”×‘××”
                    loadRobotQuestion();
                } else {
                    // ××©×—×§ ×¨×’×™×œ ×××©×™×š
                    loadRobotQuestion();
                }
            }, 2000);
        }
        
        function updateRobotHealth() {
            const r1 = document.getElementById('robot1Energy');
            const r2 = document.getElementById('robot2Energy');
            
            robot1Health = Math.max(0, robot1Health);
            robot2Health = Math.max(0, robot2Health);
            
            r1.style.width = robot1Health + '%';
            r1.textContent = robot1Health + '%';
            r2.style.width = robot2Health + '%';
            r2.textContent = robot2Health + '%';
            
            if (robot1Health < 30) r1.classList.add('low');
            if (robot2Health < 30) r2.classList.add('low');
        }
        
        // ××©×—×§ 3: ××¢×‘×“×ª ××“×¢×Ÿ
        let labLevel = 'easy';
        let labSuccess = 0;
        let labTotal = 10;
        let labAnswer = 0;
        
        function setLabLevel(level) {
            labLevel = level;
            document.querySelectorAll('#labGame .level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ×”×ª×—×œ×ª ××©×—×§ ×—×“×© ×¢× ×”×¨××” ×”×—×“×©×”
            initLabGame();
        }
        
        function initLabGame() {
            labSuccess = 0;
            updateLabSuccess();
            loadLabQuestion();
        }
        
        function loadLabQuestion() {
            let num1, num2;
            if (labLevel === 'easy') {
                num1 = Math.floor(Math.random() * 10) + 1;
                num2 = Math.floor(Math.random() * 10) + 1;
            } else if (labLevel === 'medium') {
                num1 = Math.floor(Math.random() * 20) + 1;
                num2 = Math.floor(Math.random() * 20) + 1;
            } else {
                num1 = Math.floor(Math.random() * 50) + 1;
                num2 = Math.floor(Math.random() * 50) + 1;
            }
            
            const operation = Math.random() > 0.5 ? '+' : '-';
            if (operation === '-' && num1 < num2) {
                [num1, num2] = [num2, num1];
            }
            
            labAnswer = operation === '+' ? num1 + num2 : num1 - num2;
            
            document.getElementById('labEquation').textContent = `${num1} ${operation} ${num2} = ?`;
            document.getElementById('labFeedback').textContent = '';
            
            const options = generateOptions(labAnswer, 3);
            const table = document.getElementById('labTable');
            table.innerHTML = '';
            
            options.forEach((opt, index) => {
                const beaker = document.createElement('div');
                beaker.className = 'beaker';
                beaker.innerHTML = `
                    <div class="beaker-number">${opt}</div>
                    <div class="liquid" id="liquid${index}"></div>
                `;
                beaker.onclick = () => checkLabAnswer(opt, index);
                table.appendChild(beaker);
            });
        }
        
        function checkLabAnswer(selected, beakerIndex) {
            const allBeakers = document.querySelectorAll('.beaker');
            allBeakers.forEach(b => b.style.pointerEvents = 'none');
            
            const feedback = document.getElementById('labFeedback');
            const liquid = document.getElementById(`liquid${beakerIndex}`);
            
            if (selected === labAnswer) {
                feedback.textContent = 'ğŸ‰ × ×™×¡×•×™ ××•×¦×œ×—! ×”×©×™×§×•×™ ××•×©×œ×!';
                feedback.style.color = '#51cf66';
                playCorrectSound();
                labSuccess++;
                
                liquid.style.background = 'linear-gradient(180deg, #51cf66 0%, #40c057 100%)';
                liquid.style.height = '80%';
                liquid.classList.add('filling');
                
                setTimeout(() => {
                    updateLabSuccess();
                    if (labSuccess >= labTotal) {
                        alert('ğŸ† ×¡×™×™××ª ××ª ×›×œ ×”× ×™×¡×•×™×™× ×‘×”×¦×œ×—×”! ××“×¢×Ÿ ××¦×˜×™×™×Ÿ! ğŸ†');
                        playWinSound();
                        initLabGame();
                    } else {
                        loadLabQuestion();
                    }
                }, 2000);
            } else {
                feedback.textContent = `âŒ ×”× ×™×¡×•×™ × ×›×©×œ! ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™× ${labAnswer}`;
                feedback.style.color = '#ff6b6b';
                playWrongSound();
                
                liquid.style.background = 'linear-gradient(180deg, #ff6b6b 0%, #ff5252 100%)';
                liquid.style.height = '50%';
                liquid.classList.add('filling');
                
                setTimeout(() => {
                    loadLabQuestion();
                }, 2000);
            }
        }
        
        function updateLabSuccess() {
            document.getElementById('labSuccess').textContent = `${labSuccess}/${labTotal}`;
        }
        
        // Helper function
        function generateOptions(correct, count) {
            const options = [correct];
            while (options.length < count) {
                let wrong = correct + Math.floor(Math.random() * 10) - 5;
                if (wrong !== correct && wrong > 0 && !options.includes(wrong)) {
                    options.push(wrong);
                }
            }
            return options.sort(() => Math.random() - 0.5);
        }
        
        // Victory Screen Functions
        function showVictoryScreen() {
            playWinSound();
            
            // ×‘×“×™×§×” ×× ×™×© ×ª×™×§×•
            const isTie = robot1Health <= 0 && robot2Health <= 0;
            
            if (isTie) {
                // ××¦×‘ ×ª×™×§×•
                document.getElementById('victoryTitle').textContent = '×ª×™×§×•!';
                document.getElementById('victoryWinner').textContent = 'ğŸ”µ ğŸ¤– ×©× ×™ ×”×¨×•×‘×•×˜×™× ××“×”×™××™×! ğŸ¤– ğŸ”´';
                document.getElementById('victoryWinner').className = 'victory-winner tie';
                document.getElementById('victoryIcon').textContent = 'ğŸ¤';
            } else {
                // ×™×© ×× ×¦×—
                const winner = robot1Health > 0 ? 'ğŸ”µ ×”×¨×•×‘×•×˜ ×”×›×—×•×œ' : 'ğŸ”´ ×”×¨×•×‘×•×˜ ×”××“×•×';
                const isBlue = robot1Health > 0;
                
                document.getElementById('victoryTitle').textContent = '× ×™×¦×—×•×Ÿ!';
                document.getElementById('victoryWinner').textContent = winner + ' × ×™×¦×—!';
                document.getElementById('victoryWinner').className = isBlue ? 'victory-winner' : 'victory-winner red';
                document.getElementById('victoryIcon').textContent = 'ğŸ¤–';
            }
            
            document.getElementById('victoryCorrect').textContent = robotCorrectAnswers;
            document.getElementById('victoryTotal').textContent = robotTotalQuestions;
            
            document.getElementById('victoryOverlay').classList.add('active');
            
            createConfetti();
        }
        
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';
            
            const colors = ['#ff6b6b', '#4facfe', '#00f2fe', '#51cf66', '#ffd93d', '#ff85e4', '#a78bfa'];
            const shapes = ['â–ªï¸', 'â–«ï¸', 'ğŸ”·', 'ğŸ”¶', 'â­', 'âœ¨', 'ğŸ’«'];
            
            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                
                const randomShape = Math.random() > 0.7;
                if (randomShape) {
                    confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                    confetti.style.fontSize = (Math.random() * 15 + 10) + 'px';
                } else {
                    confetti.style.width = (Math.random() * 8 + 5) + 'px';
                    confetti.style.height = (Math.random() * 12 + 5) + 'px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                }
                
                const startX = Math.random() * 100;
                const endX = (Math.random() - 0.5) * 200;
                
                confetti.style.left = startX + '%';
                confetti.style.setProperty('--x-offset', endX + 'px');
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (Math.random() * 1.5 + 2.5) + 's';
                
                container.appendChild(confetti);
            }
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }
        
        function playAgainRobots() {
            document.getElementById('victoryOverlay').classList.remove('active');
            initRobotGame();
        }
        
        function backToMenuFromVictory() {
            document.getElementById('victoryOverlay').classList.remove('active');
            backToMenu();
        }
        
        // Enter key support
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (document.getElementById('questionModal').classList.contains('active')) {
                    checkMountainAnswer();
                }
            }
        });
    </script>
</body>
</html>