<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×—×™×©×•×‘×™ ×›×¡×£ - ×›×™×ª×” ×'</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; background: white; border-radius: 25px; padding: 40px; box-shadow: 0 25px 70px rgba(0,0,0,0.4); }
        h1 { color: #43cea2; text-align: center; margin-bottom: 15px; font-size: 3em; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        .subtitle { text-align: center; color: #666; margin-bottom: 35px; font-size: 1.3em; }
        .tabs { display: flex; gap: 12px; margin-bottom: 35px; flex-wrap: wrap; justify-content: center; }
        .tab { padding: 16px 28px; background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); border: none; border-radius: 12px; cursor: pointer; font-size: 1.15em; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white; }
        .tab:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); background: linear-gradient(135deg, #56d8b4 0%, #2a6eb5 100%); }
        .tab.active { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); transform: scale(1.05); }
        .content { display: none; }
        .content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .lesson { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); }
        .lesson h2 { color: #43cea2; margin-bottom: 20px; font-size: 1.8em; }
        .lesson p { font-size: 1.3em; line-height: 1.8; margin-bottom: 15px; color: #333; }
        .example { background: white; padding: 20px; border-right: 5px solid #43cea2; margin: 20px 0; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.08); }
        .example h3 { color: #fda085; margin-bottom: 12px; font-size: 1.3em; }
        .game { background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); padding: 30px; border-radius: 20px; margin-bottom: 25px; color: white; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .game h2 { margin-bottom: 20px; font-size: 2em; }
        .question-counter { text-align: center; font-size: 1.3em; margin: 15px 0; color: #fff; background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px; }
        .score { text-align: center; font-size: 1.8em; margin: 25px 0; color: #fff; font-weight: bold; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 12px; }
        .problem-display { font-size: 1.4em; text-align: right; margin: 30px 0; padding: 25px; background: rgba(255,255,255,0.3); border-radius: 15px; line-height: 1.8; }
        input[type="number"] { width: 250px; padding: 15px; font-size: 1.5em; border: 4px solid white; border-radius: 10px; text-align: center; margin: 10px; font-weight: bold; }
        input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type="number"] { -moz-appearance: textfield; }
        button { background: white; color: #43cea2; border: none; padding: 14px 35px; font-size: 1.2em; border-radius: 10px; cursor: pointer; transition: all 0.3s; font-weight: bold; box-shadow: 0 6px 12px rgba(0,0,0,0.2); margin: 5px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .feedback { padding: 20px; border-radius: 12px; margin-top: 20px; font-size: 1.3em; text-align: center; font-weight: bold; }
        .correct { background: #51cf66; color: white; }
        .incorrect { background: #ff6b6b; color: white; }
        .controls { text-align: center; margin: 25px 0; }
        .round-complete { background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%); padding: 40px; border-radius: 20px; text-align: center; color: white; margin: 20px 0; }
        .round-complete h3 { font-size: 2.5em; margin-bottom: 20px; }
        .round-complete p { font-size: 1.5em; margin: 15px 0; }
        .new-round-btn { background: white; color: #51cf66; font-size: 1.5em; padding: 20px 40px; margin-top: 20px; border: none; border-radius: 15px; cursor: pointer; font-weight: bold; box-shadow: 0 8px 16px rgba(0,0,0,0.2); transition: all 0.3s; }
        .new-round-btn:hover { transform: scale(1.05); box-shadow: 0 12px 24px rgba(0,0,0,0.3); }
        .steps { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: right; }
        .steps p { margin: 10px 0; font-size: 1.2em; }
        .formula-box { background: #fff3cd; border: 3px solid #ffc107; padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center; font-size: 1.4em; font-weight: bold; color: #856404; }
        .money-box { background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); border: 3px solid #f39c12; padding: 25px; border-radius: 10px; margin: 20px 0; text-align: center; }
        .money-box h4 { color: #d35400; margin-bottom: 20px; font-size: 1.4em; }
        .coin-row { display: flex; justify-content: center; align-items: center; gap: 15px; margin: 15px 0; flex-wrap: wrap; }
        .coin { background: #f39c12; color: white; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.3em; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .coin.big { width: 100px; height: 100px; font-size: 1.5em; }
        .bill { background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); color: white; border-radius: 8px; padding: 15px 30px; font-weight: bold; font-size: 1.3em; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .visual-example { display: flex; justify-content: center; align-items: center; gap: 10px; margin: 20px 0; flex-wrap: wrap; font-size: 1.5em; }
        .tip { color: #0d5a3a; font-weight: bold; font-size: 1.1em; margin-top: 10px; }
        .big-text { font-size: 1.5em; font-weight: bold; color: #185a9d; }
    </style>
</head>
<body>
    <div class="container">
        <h1>×—×™×©×•×‘×™ ×›×¡×£ ğŸ’°</h1>
        <div class="subtitle">×›×™×ª×” ×' - ×‘×•××• × ×›×™×¨ ××ª ×”×›×¡×£!</div>
        
        <div class="tabs">
            <button class="tab active" data-tab="lesson1">ğŸ“š ××›×™×¨×™× ××˜×‘×¢×•×ª</button>
            <button class="tab" data-tab="game1">ğŸ® ××©×—×§: ××˜×‘×¢×•×ª</button>
            <button class="tab" data-tab="lesson2">ğŸ“š ×—×™×‘×•×¨ ×›×¡×£</button>
            <button class="tab" data-tab="game2">ğŸ’° ××©×—×§: ×—×™×‘×•×¨</button>
            <button class="tab" data-tab="lesson3">ğŸ“š ×¡×¤×™×¨×ª ×›×¡×£</button>
            <button class="tab" data-tab="game3">ğŸª™ ××©×—×§: ×¡×¤×™×¨×”</button>
        </div>
        
        <!-- ×©×™×¢×•×¨ 1 -->
        <div id="lesson1" class="content active">
            <div class="lesson">
                <h2>××›×™×¨×™× ××ª ×”××˜×‘×¢×•×ª</h2>
                <p>×‘×•××• × ×œ××“ ×¢×œ ×”××˜×‘×¢×•×ª ×©×™×© ×œ× ×• ×‘×™×©×¨××œ! ğŸ‡®ğŸ‡±</p>
                
                <div class="money-box">
                    <h4>ğŸ’° ×”××˜×‘×¢×•×ª ×©×œ× ×•</h4>
                    <div class="coin-row">
                        <div>
                            <div class="coin">1 â‚ª</div>
                            <p style="margin-top: 10px;"><strong>×©×§×œ ××—×“</strong></p>
                        </div>
                        <div>
                            <div class="coin">2 â‚ª</div>
                            <p style="margin-top: 10px;"><strong>×©× ×™ ×©×§×œ×™×</strong></p>
                        </div>
                        <div>
                            <div class="coin big">5 â‚ª</div>
                            <p style="margin-top: 10px;"><strong>×—××™×©×” ×©×§×œ×™×</strong></p>
                        </div>
                        <div>
                            <div class="coin big">10 â‚ª</div>
                            <p style="margin-top: 10px;"><strong>×¢×©×¨×” ×©×§×œ×™×</strong></p>
                        </div>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 1: ××˜×‘×¢ ××—×“</h3>
                    <p class="big-text">×œ×“× ×™ ×™×© ××˜×‘×¢ ×©×œ 5 â‚ª</p>
                    <div class="visual-example">
                        <div class="coin big">5 â‚ª</div>
                        <span>=</span>
                        <span class="big-text">5 ×©×§×œ×™×</span>
                    </div>
                    <p class="tip">ğŸ’¡ ××˜×‘×¢ ××—×“ ×©×œ 5 ×©×•×•×” 5 ×©×§×œ×™×!</p>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: ×©× ×™ ××˜×‘×¢×•×ª</h3>
                    <p class="big-text">×œ×©×¨×” ×™×© 2 ××˜×‘×¢×•×ª ×©×œ 1 â‚ª</p>
                    <div class="visual-example">
                        <div class="coin">1 â‚ª</div>
                        <span>+</span>
                        <div class="coin">1 â‚ª</div>
                        <span>=</span>
                        <span class="big-text">2 ×©×§×œ×™×</span>
                    </div>
                    <p class="tip">ğŸ’¡ 1 + 1 = 2</p>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 3: ××˜×‘×¢×•×ª ×©×•× ×™×</h3>
                    <p class="big-text">×œ×™×•×¡×™ ×™×© ××˜×‘×¢ ×©×œ 5 â‚ª ×•××˜×‘×¢ ×©×œ 2 â‚ª</p>
                    <div class="visual-example">
                        <div class="coin big">5 â‚ª</div>
                        <span>+</span>
                        <div class="coin">2 â‚ª</div>
                        <span>=</span>
                        <span class="big-text">7 ×©×§×œ×™×</span>
                    </div>
                    <p class="tip">ğŸ’¡ 5 + 2 = 7</p>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 4: ×›××” ×–×” ×©×•×•×”?</h3>
                    <p class="big-text">×œ×¨×•× ×™×ª ×™×© ××˜×‘×¢ ×©×œ 10 â‚ª</p>
                    <div class="visual-example">
                        <div class="coin big">10 â‚ª</div>
                        <span>=</span>
                        <span class="big-text">10 ×©×§×œ×™×!</span>
                    </div>
                    <p class="tip">ğŸ’¡ ×–×” ×”××˜×‘×¢ ×”×›×™ ×’×“×•×œ ×©×œ× ×•!</p>
                </div>
                
                <div class="formula-box">×”××˜×‘×¢×•×ª ×©×œ× ×•: 1, 2, 5, 10 ×©×§×œ×™×</div>
            </div>
        </div>
        
        <!-- ××©×—×§ 1 -->
        <div id="game1" class="content">
            <div class="game">
                <h2>××©×—×§: ××›×™×¨×™× ××˜×‘×¢×•×ª</h2>
                <div class="question-counter">×©××œ×” <span id="q-count1">1</span> ××ª×•×š 10</div>
                <div class="score">× ×™×§×•×“: <span id="score1">0</span></div>
                <div class="problem-display" id="problem1">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer1" placeholder="×”×›× ×¡ ×ª×©×•×‘×”">
                    <br><br>
                    <button onclick="checkAns(1);">×‘×“×•×§</button>
                </div>
                <div id="feedback1"></div>
                <div id="round-end1" style="display: none;"></div>
            </div>
        </div>
        
        <!-- ×©×™×¢×•×¨ 2 -->
        <div id="lesson2" class="content">
            <div class="lesson">
                <h2>×—×™×‘×•×¨ ×›×¡×£</h2>
                <p>×‘×•××• × ×œ××“ ×œ×—×‘×¨ ×›×¡×£ ×‘×™×—×“!</p>
                
                <div class="formula-box">×—×™×‘×•×¨ = ×œ×¡×¤×•×¨ ×‘×™×—×“</div>
                
                <div class="example">
                    <h3>×“×•×’××” 1: ×—×™×‘×•×¨ ×§×œ</h3>
                    <p class="big-text">×œ×“× ×™ ×™×© 3 â‚ª ×•×œ×©×¨×” ×™×© 2 â‚ª. ×›××” ×‘×™×—×“?</p>
                    <div class="visual-example">
                        <span class="big-text">3</span>
                        <span>+</span>
                        <span class="big-text">2</span>
                        <span>=</span>
                        <span class="big-text">5 ×©×§×œ×™×</span>
                    </div>
                    <div class="steps">
                        <p><strong>××™×š ×¢×•×©×™×?</strong></p>
                        <p>×¡×¤×¨×•: 1, 2, 3 (×–×” ×©×œ ×“× ×™)</p>
                        <p>×¢×•×“: 4, 5 (×–×” ×©×œ ×©×¨×”)</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 5 ×©×§×œ×™× ×‘×™×—×“!</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: ×—×™×‘×•×¨ ×¢× 5</h3>
                    <p class="big-text">×œ×™×•×¡×™ ×™×© 5 â‚ª ×•×œ×¨×•× ×™×ª ×™×© 3 â‚ª. ×›××” ×‘×™×—×“?</p>
                    <div class="visual-example">
                        <span class="big-text">5</span>
                        <span>+</span>
                        <span class="big-text">3</span>
                        <span>=</span>
                        <span class="big-text">8 ×©×§×œ×™×</span>
                    </div>
                    <p class="tip">ğŸ’¡ 5 + 3 = 8</p>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 3: ×—×™×‘×•×¨ ×¢×“ 10</h3>
                    <p class="big-text">×œ×“× ×” ×™×© 4 â‚ª ×•×œ×ª×•××¨ ×™×© 6 â‚ª. ×›××” ×‘×™×—×“?</p>
                    <div class="visual-example">
                        <span class="big-text">4</span>
                        <span>+</span>
                        <span class="big-text">6</span>
                        <span>=</span>
                        <span class="big-text">10 ×©×§×œ×™×</span>
                    </div>
                    <p class="tip">ğŸ’¡ 4 + 6 = 10</p>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 4: ×©×œ×•×©×” ×™×œ×“×™×</h3>
                    <p class="big-text">×œ×©×œ×•×©×” ×™×œ×“×™× ×™×©: 2 â‚ª, 3 â‚ª, 4 â‚ª. ×›××” ×‘×™×—×“?</p>
                    <div class="visual-example">
                        <span class="big-text">2 + 3 + 4 = 9 ×©×§×œ×™×</span>
                    </div>
                    <div class="steps">
                        <p>×§×•×“×: 2 + 3 = 5</p>
                        <p>××—×¨ ×›×š: 5 + 4 = 9</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ××©×—×§ 2 -->
        <div id="game2" class="content">
            <div class="game">
                <h2>××©×—×§: ×—×™×‘×•×¨ ×›×¡×£</h2>
                <div class="question-counter">×©××œ×” <span id="q-count2">1</span> ××ª×•×š 10</div>
                <div class="score">× ×™×§×•×“: <span id="score2">0</span></div>
                <div class="problem-display" id="problem2">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer2" placeholder="×”×›× ×¡ ×ª×©×•×‘×”">
                    <br><br>
                    <button onclick="checkAns(2);">×‘×“×•×§</button>
                </div>
                <div id="feedback2"></div>
                <div id="round-end2" style="display: none;"></div>
            </div>
        </div>
        
        <!-- ×©×™×¢×•×¨ 3 -->
        <div id="lesson3" class="content">
            <div class="lesson">
                <h2>×¡×¤×™×¨×ª ×›×¡×£</h2>
                <p>×‘×•××• × ×œ××“ ×œ×¡×¤×•×¨ ×›×¡×£ ×¢× ××˜×‘×¢×•×ª ×©×•× ×™×!</p>
                
                <div class="example">
                    <h3>×“×•×’××” 1: ××˜×‘×¢×•×ª ×©×œ 1 â‚ª</h3>
                    <p class="big-text">×›××” ×›×¡×£ ×™×© ×›××Ÿ?</p>
                    <div class="visual-example">
                        <div class="coin">1 â‚ª</div>
                        <div class="coin">1 â‚ª</div>
                        <div class="coin">1 â‚ª</div>
                        <div class="coin">1 â‚ª</div>
                    </div>
                    <div class="steps">
                        <p>×¡×¤×¨×•: 1, 2, 3, 4</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 4 ×©×§×œ×™×</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 2: ××˜×‘×¢×•×ª ×©×œ 2 â‚ª</h3>
                    <p class="big-text">×›××” ×›×¡×£ ×™×© ×›××Ÿ?</p>
                    <div class="visual-example">
                        <div class="coin">2 â‚ª</div>
                        <div class="coin">2 â‚ª</div>
                        <div class="coin">2 â‚ª</div>
                    </div>
                    <div class="steps">
                        <p>×¡×¤×¨×• ×‘×“×™×œ×•×’×™×: 2, 4, 6</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 6 ×©×§×œ×™×</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 3: ××˜×‘×¢×•×ª ××¢×•×¨×‘×™×</h3>
                    <p class="big-text">×›××” ×›×¡×£ ×™×© ×›××Ÿ?</p>
                    <div class="visual-example">
                        <div class="coin big">5 â‚ª</div>
                        <div class="coin">2 â‚ª</div>
                        <div class="coin">1 â‚ª</div>
                    </div>
                    <div class="steps">
                        <p>5 + 2 + 1</p>
                        <p>×§×•×“×: 5 + 2 = 7</p>
                        <p>××—×¨ ×›×š: 7 + 1 = 8</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 8 ×©×§×œ×™×</p>
                    </div>
                </div>
                
                <div class="example">
                    <h3>×“×•×’××” 4: ××˜×‘×¢ ×©×œ 10 â‚ª</h3>
                    <p class="big-text">×›××” ×›×¡×£ ×™×© ×›××Ÿ?</p>
                    <div class="visual-example">
                        <div class="coin big">10 â‚ª</div>
                        <div class="coin">2 â‚ª</div>
                    </div>
                    <div class="steps">
                        <p>10 + 2 = 12</p>
                        <p><strong>×ª×©×•×‘×”:</strong> 12 ×©×§×œ×™×</p>
                    </div>
                </div>
                
                <div class="formula-box">×˜×™×¤: ×ª××™×“ ×¡×¤×¨×• ××ª ×”××˜×‘×¢×•×ª ×”×’×“×•×œ×™× ×§×•×“×!</div>
            </div>
        </div>
        
        <!-- ××©×—×§ 3 -->
        <div id="game3" class="content">
            <div class="game">
                <h2>××©×—×§: ×¡×¤×™×¨×ª ×›×¡×£</h2>
                <div class="question-counter">×©××œ×” <span id="q-count3">1</span> ××ª×•×š 10</div>
                <div class="score">× ×™×§×•×“: <span id="score3">0</span></div>
                <div class="problem-display" id="problem3">×˜×•×¢×Ÿ...</div>
                <div class="controls">
                    <input type="number" id="answer3" placeholder="×”×›× ×¡ ×ª×©×•×‘×”">
                    <br><br>
                    <button onclick="checkAns(3);">×‘×“×•×§</button>
                </div>
                <div id="feedback3"></div>
                <div id="round-end3" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
var scores = {1: 0, 2: 0, 3: 0};
var currentQuestion = {1: 0, 2: 0, 3: 0};
var questionBank = {1: [], 2: [], 3: []};
var gameData = {1: {}, 2: {}, 3: {}};
var answerLocked = {1: false, 2: false, 3: false};

function generateQ1(n) {
    var qs = [
        {t: '×›××” ×©×•×•×” ××˜×‘×¢ ××—×“ ×©×œ 1 â‚ª?', a: 1},
        {t: '×›××” ×©×•×•×” ××˜×‘×¢ ××—×“ ×©×œ 2 â‚ª?', a: 2},
        {t: '×›××” ×©×•×•×” ××˜×‘×¢ ××—×“ ×©×œ 5 â‚ª?', a: 5},
        {t: '×›××” ×©×•×•×” ××˜×‘×¢ ××—×“ ×©×œ 10 â‚ª?', a: 10},
        {t: '×œ×“× ×™ ×™×© ×©× ×™ ××˜×‘×¢×•×ª ×©×œ 1 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×•?', a: 2},
        {t: '×œ×©×¨×” ×™×© ×©×œ×•×©×” ××˜×‘×¢×•×ª ×©×œ 1 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×”?', a: 3},
        {t: '×œ×™×•×¡×™ ×™×© ×©× ×™ ××˜×‘×¢×•×ª ×©×œ 2 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×•?', a: 4},
        {t: '×œ×¨×•× ×™×ª ×™×© ××˜×‘×¢ ×©×œ 5 â‚ª ×•××˜×‘×¢ ×©×œ 1 â‚ª. ×›××” ×‘×™×—×“?', a: 6},
        {t: '×œ×“× ×” ×™×© ××˜×‘×¢ ×©×œ 2 â‚ª ×•××˜×‘×¢ ×©×œ 2 â‚ª. ×›××” ×‘×™×—×“?', a: 4},
        {t: '×œ×ª×•××¨ ×™×© ××˜×‘×¢ ×©×œ 5 â‚ª ×•××˜×‘×¢ ×©×œ 2 â‚ª. ×›××” ×‘×™×—×“?', a: 7},
        {t: '×œ××™×›×œ ×™×© ××¨×‘×¢×” ××˜×‘×¢×•×ª ×©×œ 1 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×”?', a: 4},
        {t: '×œ× ×•×¢×” ×™×© ×©×œ×•×©×” ××˜×‘×¢×•×ª ×©×œ 2 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×”?', a: 6},
        {t: '×œ××‘× ×™×© ××˜×‘×¢ ×©×œ 10 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×•?', a: 10},
        {t: '×œ××× ×™×© ×©× ×™ ××˜×‘×¢×•×ª ×©×œ 5 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×”?', a: 10},
        {t: '×œ×“× ×™ ×™×© ××˜×‘×¢ ×©×œ 5 â‚ª ×•××˜×‘×¢ ×©×œ 5 â‚ª. ×›××” ×‘×™×—×“?', a: 10},
        {t: '×œ×©×¨×” ×™×© ×—××™×©×” ××˜×‘×¢×•×ª ×©×œ 1 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×”?', a: 5},
        {t: '×œ×™×•×¡×™ ×™×© ××˜×‘×¢ ×©×œ 2 â‚ª ×•××˜×‘×¢ ×©×œ 1 â‚ª. ×›××” ×‘×™×—×“?', a: 3},
        {t: '×œ×¨×•× ×™×ª ×™×© ××˜×‘×¢ ×©×œ 10 â‚ª ×•××˜×‘×¢ ×©×œ 2 â‚ª. ×›××” ×‘×™×—×“?', a: 12},
        {t: '×œ×“× ×” ×™×© ×©×™×©×” ××˜×‘×¢×•×ª ×©×œ 1 â‚ª. ×›××” ×©×§×œ×™× ×™×© ×œ×”?', a: 6},
        {t: '×œ×ª×•××¨ ×™×© ××˜×‘×¢ ×©×œ 5 â‚ª, 2 â‚ª ×•-1 â‚ª. ×›××” ×‘×™×—×“?', a: 8}
    ];
    return {text: qs[n].t, answer: qs[n].a};
}

function generateQ2(n) {
    var qs = [
        {t: '×œ×“× ×™ ×™×© 2 â‚ª ×•×œ×©×¨×” ×™×© 3 â‚ª. ×›××” ×‘×™×—×“?', a: 5},
        {t: '×œ×™×•×¡×™ ×™×© 4 â‚ª ×•×œ×¨×•× ×™×ª ×™×© 5 â‚ª. ×›××” ×‘×™×—×“?', a: 9},
        {t: '×œ×“× ×” ×™×© 1 â‚ª ×•×œ×ª×•××¨ ×™×© 6 â‚ª. ×›××” ×‘×™×—×“?', a: 7},
        {t: '×œ××™×›×œ ×™×© 3 â‚ª ×•×œ× ×•×¢×” ×™×© 4 â‚ª. ×›××” ×‘×™×—×“?', a: 7},
        {t: '××‘× × ×ª×Ÿ 5 â‚ª ×•××× × ×ª× ×” 2 â‚ª. ×›××” ×‘×™×—×“?', a: 7},
        {t: '×“× ×™ ×§×™×‘×œ 3 â‚ª ×××× ×•-2 â‚ª ×××‘×. ×›××” ×‘×™×—×“?', a: 5},
        {t: '×©×¨×” ×—×¡×›×” 6 â‚ª ×‘×™×•× ×¨××©×•×Ÿ ×•-3 â‚ª ×‘×™×•× ×©× ×™. ×›××” ×‘×™×—×“?', a: 9},
        {t: '×œ×™×•×¡×™ ×™×© 5 â‚ª ×•×œ×¨×•× ×™×ª ×™×© 5 â‚ª. ×›××” ×‘×™×—×“?', a: 10},
        {t: '×œ×“× ×” ×™×© 2 â‚ª ×‘×›×™×¡ ×•-7 â‚ª ×‘××¨× ×§. ×›××” ×‘×™×—×“?', a: 9},
        {t: '×œ×ª×•××¨ ×™×© 4 â‚ª ×•×œ××™×›×œ ×™×© 4 â‚ª. ×›××” ×‘×™×—×“?', a: 8},
        {t: '× ×•×¢×” ×—×¡×›×” 1 â‚ª, 2 â‚ª ×•-3 â‚ª. ×›××” ×‘×¡×š ×”×›×œ?', a: 6},
        {t: '×œ×“× ×™ ×™×© 7 â‚ª ×•×œ×©×¨×” ×™×© 2 â‚ª. ×›××” ×‘×™×—×“?', a: 9},
        {t: '×™×•×¡×™ ×§×™×‘×œ 4 â‚ª ××¡×‘×ª× ×•-6 â‚ª ××¡×‘×. ×›××” ×‘×™×—×“?', a: 10},
        {t: '×œ×¨×•× ×™×ª ×™×© 3 â‚ª ×•×œ×“× ×” ×™×© 5 â‚ª. ×›××” ×‘×™×—×“?', a: 8},
        {t: '×ª×•××¨ ×—×¡×š 2 â‚ª, 3 â‚ª ×•-4 â‚ª. ×›××” ×‘×¡×š ×”×›×œ?', a: 9},
        {t: '×œ××™×›×œ ×™×© 5 â‚ª ×•×œ× ×•×¢×” ×™×© 4 â‚ª. ×›××” ×‘×™×—×“?', a: 9},
        {t: '××‘× × ×ª×Ÿ 6 â‚ª ×•××× × ×ª× ×” 4 â‚ª. ×›××” ×‘×™×—×“?', a: 10},
        {t: '×œ×“× ×™ ×™×© 1 â‚ª, 2 â‚ª ×•-5 â‚ª. ×›××” ×‘×¡×š ×”×›×œ?', a: 8},
        {t: '×©×¨×” ×§×™×‘×œ×” 3 â‚ª ××“×•×“×” ×•-7 â‚ª ××“×•×“. ×›××” ×‘×™×—×“?', a: 10},
        {t: '×œ××‘× ×™×© 8 â‚ª ×•×œ××× ×™×© 2 â‚ª. ×›××” ×‘×™×—×“?', a: 10}
    ];
    return {text: qs[n].t, answer: qs[n].a};
}

function generateQ3(n) {
    var qs = [
        {t: '×¡×¤×¨×•: 1 â‚ª + 1 â‚ª + 1 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 4},
        {t: '×¡×¤×¨×•: 2 â‚ª + 2 â‚ª + 2 â‚ª. ×›××” ×‘×™×—×“?', a: 6},
        {t: '×¡×¤×¨×•: 5 â‚ª + 1 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 7},
        {t: '×¡×¤×¨×•: 5 â‚ª + 2 â‚ª + 2 â‚ª. ×›××” ×‘×™×—×“?', a: 9},
        {t: '×¡×¤×¨×•: 10 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 11},
        {t: '×¡×¤×¨×•: 5 â‚ª + 5 â‚ª. ×›××” ×‘×™×—×“?', a: 10},
        {t: '×¡×¤×¨×•: 2 â‚ª + 2 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 5},
        {t: '×¡×¤×¨×•: 5 â‚ª + 3 â‚ª. ×›××” ×‘×™×—×“?', a: 8},
        {t: '×¡×¤×¨×•: 10 â‚ª + 2 â‚ª. ×›××” ×‘×™×—×“?', a: 12},
        {t: '×¡×¤×¨×•: 1 â‚ª + 1 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 3},
        {t: '×¡×¤×¨×•: 5 â‚ª + 2 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 8},
        {t: '×¡×¤×¨×•: 2 â‚ª + 2 â‚ª + 2 â‚ª + 2 â‚ª. ×›××” ×‘×™×—×“?', a: 8},
        {t: '×¡×¤×¨×•: 10 â‚ª + 5 â‚ª. ×›××” ×‘×™×—×“?', a: 15},
        {t: '×¡×¤×¨×•: 5 â‚ª + 1 â‚ª + 2 â‚ª. ×›××” ×‘×™×—×“?', a: 8},
        {t: '×¡×¤×¨×•: 1 â‚ª + 1 â‚ª + 1 â‚ª + 1 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 5},
        {t: '×¡×¤×¨×•: 5 â‚ª + 4 â‚ª. ×›××” ×‘×™×—×“?', a: 9},
        {t: '×¡×¤×¨×•: 2 â‚ª + 1 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 4},
        {t: '×¡×¤×¨×•: 10 â‚ª + 1 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 12},
        {t: '×¡×¤×¨×•: 5 â‚ª + 2 â‚ª. ×›××” ×‘×™×—×“?', a: 7},
        {t: '×¡×¤×¨×•: 2 â‚ª + 2 â‚ª + 2 â‚ª + 1 â‚ª. ×›××” ×‘×™×—×“?', a: 7}
    ];
    return {text: qs[n].t, answer: qs[n].a};
}

function initGame(g) {
    questionBank[g] = [];
    var order = [];
    for (var i = 0; i < 20; i++) {
        order.push(i);
    }
    for (var i = order.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = order[i];
        order[i] = order[j];
        order[j] = temp;
    }
    
    for (var i = 0; i < 10; i++) {
        var q;
        if (g === 1) q = generateQ1(order[i]);
        else if (g === 2) q = generateQ2(order[i]);
        else q = generateQ3(order[i]);
        questionBank[g].push(q);
    }
    nextQ(g);
}

function nextQ(g) {
    if (currentQuestion[g] >= 10) {
        document.getElementById('feedback' + g).innerHTML = '';
        showEnd(g);
        return;
    }
    answerLocked[g] = false;
    gameData[g] = questionBank[g][currentQuestion[g]];
    document.getElementById('q-count' + g).textContent = currentQuestion[g] + 1;
    document.getElementById('problem' + g).innerHTML = gameData[g].text;
    document.getElementById('feedback' + g).innerHTML = '';
    document.getElementById('answer' + g).value = '';
    document.getElementById('answer' + g).focus();
}

function checkAns(g) {
    if (answerLocked[g]) return;
    var ans = parseFloat(document.getElementById('answer' + g).value);
    if (isNaN(ans)) {
        alert('×‘×‘×§×©×” ×”×›× ×¡ ××¡×¤×¨!');
        return;
    }
    
    var correct = Math.abs(ans - gameData[g].answer) < 0.01;
    answerLocked[g] = true;
    currentQuestion[g]++;
    
    if (correct) {
        scores[g]++;
        playSound('correct');
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback correct">×›×œ ×”×›×‘×•×“! × ×›×•×Ÿ! ğŸŒŸ</div>';
    } else {
        playSound('incorrect');
        document.getElementById('feedback' + g).innerHTML = '<div class="feedback incorrect">×œ× × ×›×•×Ÿ. ×”×ª×©×•×‘×” ×”× ×›×•× ×”: ' + gameData[g].answer + ' â‚ª</div>';
    }
    document.getElementById('score' + g).textContent = scores[g];
    
    setTimeout(function() {
        var feedbackEl = document.getElementById('feedback' + g);
        if (feedbackEl) {
            feedbackEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }, 100);
    
    setTimeout(function() { nextQ(g); }, 3000);
}

function showEnd(g) {
    var roundEndEl = document.getElementById('round-end' + g);
    var problemEl = document.getElementById('problem' + g);
    var controlsEl = document.querySelector('#game' + g + ' .controls');
    var feedbackEl = document.getElementById('feedback' + g);
    
    if (controlsEl) controlsEl.style.display = 'none';
    if (feedbackEl) {
        feedbackEl.innerHTML = '';
        feedbackEl.style.display = 'none';
    }
    
    var pct = Math.round((scores[g] / 10) * 100);
    var msg = pct >= 80 ? '××¢×•×œ×”! ××œ×•×¤×™×! ğŸŒŸğŸ’°' : pct >= 60 ? '×™×¤×” ×××•×“! ×›×œ ×”×›×‘×•×“! ğŸ‘' : '×™×•×¤×™! ×”××©×™×›×• ×œ×”×ª×××Ÿ! ğŸ’ª';
    roundEndEl.innerHTML = '<div class="round-complete"><h3>×¡×™×™××ª×!</h3><p>' + msg + '</p><p>×¦×™×•×Ÿ: ' + scores[g] + '/10 (' + pct + '%)</p><button class="new-round-btn" onclick="resetGame(' + g + ')">×¢×•×“ ××©×—×§!</button></div>';
    roundEndEl.style.display = 'block';
    if (problemEl) problemEl.style.display = 'none';
}

function resetGame(g) {
    scores[g] = 0;
    currentQuestion[g] = 0;
    answerLocked[g] = false;
    questionBank[g] = [];
    
    document.getElementById('score' + g).textContent = '0';
    document.getElementById('round-end' + g).style.display = 'none';
    
    var feedbackEl = document.getElementById('feedback' + g);
    if (feedbackEl) {
        feedbackEl.innerHTML = '';
        feedbackEl.style.display = 'block';
    }
    
    var problemEl = document.getElementById('problem' + g);
    if (problemEl) problemEl.style.display = 'block';
    
    var controlsEl = document.querySelector('#game' + g + ' .controls');
    if (controlsEl) controlsEl.style.display = 'block';
    
    document.getElementById('answer' + g).value = '';
    
    initGame(g);
}

window.onload = function() {
    var tabs = document.querySelectorAll('.tab');
    for (var i = 0; i < tabs.length; i++) {
        tabs[i].addEventListener('click', function() {
            playSound('click');
            var tabId = this.getAttribute('data-tab');
            var allContent = document.querySelectorAll('.content');
            var allTabs = document.querySelectorAll('.tab');
            
            for (var j = 0; j < allContent.length; j++) {
                allContent[j].classList.remove('active');
            }
            for (var k = 0; k < allTabs.length; k++) {
                allTabs[k].classList.remove('active');
            }
            
            document.getElementById(tabId).classList.add('active');
            this.classList.add('active');
            
            if (tabId === 'game1' || tabId === 'game2' || tabId === 'game3') {
                var gameNum = parseInt(tabId.replace('game', ''));
                scores[gameNum] = 0;
                currentQuestion[gameNum] = 0;
                answerLocked[gameNum] = false;
                questionBank[gameNum] = [];
                
                document.getElementById('score' + gameNum).textContent = '0';
                document.getElementById('round-end' + gameNum).style.display = 'none';
                
                var problemEl = document.getElementById('problem' + gameNum);
                if (problemEl) problemEl.style.display = 'block';
                
                var feedbackEl = document.getElementById('feedback' + gameNum);
                if (feedbackEl) {
                    feedbackEl.innerHTML = '';
                    feedbackEl.style.display = 'block';
                }
                
                var controlsEl = document.querySelector('#game' + gameNum + ' .controls');
                if (controlsEl) controlsEl.style.display = 'block';
                
                document.getElementById('answer' + gameNum).value = '';
                
                setTimeout(function() { initGame(gameNum); }, 50);
            }
        });
    }
    
    document.addEventListener('wheel', function(e) {
        if (document.activeElement && document.activeElement.type === 'number') {
            document.activeElement.blur();
        }
    });
    
    var answerInputs = document.querySelectorAll('input[type="number"]');
    for (var i = 0; i < answerInputs.length; i++) {
        answerInputs[i].addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                var gameNum = parseInt(this.id.replace('answer', ''));
                checkAns(gameNum);
            }
        });
    }
};

function playSound(type) {
    try {
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        if (type === 'click') {
            var osc = audioContext.createOscillator();
            var gain = audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);
            osc.type = 'sine';
            osc.frequency.value = 600;
            gain.gain.setValueAtTime(0.15, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
            osc.start(audioContext.currentTime);
            osc.stop(audioContext.currentTime + 0.15);
        } else if (type === 'correct') {
            var notes = [523.25, 659.25, 783.99];
            for (var i = 0; i < notes.length; i++) {
                var osc = audioContext.createOscillator();
                var gain = audioContext.createGain();
                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.type = 'sine';
                osc.frequency.value = notes[i];
                gain.gain.setValueAtTime(0.1, audioContext.currentTime + i * 0.1);
                gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.1 + 0.3);
                osc.start(audioContext.currentTime + i * 0.1);
                osc.stop(audioContext.currentTime + i * 0.1 + 0.3);
            }
        } else if (type === 'incorrect') {
            var osc = audioContext.createOscillator();
            var gain = audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);
            osc.type = 'sine';
            osc.frequency.value = 200;
            gain.gain.setValueAtTime(0.15, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            osc.start(audioContext.currentTime);
            osc.stop(audioContext.currentTime + 0.3);
        }
    } catch (e) {
        console.log('Audio not supported');
    }
}
    </script>
</body>
</html>
